import{j as e,ac as Je,a5 as Wt,B as Y,_ as Ps,x as Bs,Z as Ds,ad as Ls,u as Is,s as P,R as Us,ae as $s,y as qs,af as Ie,N as Vs,W as zs,h as K,ag as Ue,ah as $e,ai as qe}from"./index-BZ5rpnUn.js";import{r as L}from"./react-Czq5O75u.js";import{u as Qs}from"./useTenant-B6ID2_Bx.js";import{A as it}from"./AppLayout-BFyynFzg.js";import{u as Os}from"./useLogger-CHq9awMe.js";import"./supabase-D02rA7zj.js";import"./router-CZES1Sa0.js";import"./Navbar-Cj7dmE_-.js";var he={},Gs=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Zt={},X={};let pt;const Hs=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];X.getSymbolSize=function(s){if(!s)throw new Error('"version" cannot be null or undefined');if(s<1||s>40)throw new Error('"version" should be in range from 1 to 40');return s*4+17};X.getSymbolTotalCodewords=function(s){return Hs[s]};X.getBCHDigit=function(r){let s=0;for(;r!==0;)s++,r>>>=1;return s};X.setToSJISFunction=function(s){if(typeof s!="function")throw new Error('"toSJISFunc" is not a valid function.');pt=s};X.isKanjiModeEnabled=function(){return typeof pt<"u"};X.toSJIS=function(s){return pt(s)};var Ze={};(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function s(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+o)}}r.isValid=function(a){return a&&typeof a.bit<"u"&&a.bit>=0&&a.bit<4},r.from=function(a,l){if(r.isValid(a))return a;try{return s(a)}catch{return l}}})(Ze);function Xt(){this.buffer=[],this.length=0}Xt.prototype={get:function(r){const s=Math.floor(r/8);return(this.buffer[s]>>>7-r%8&1)===1},put:function(r,s){for(let o=0;o<s;o++)this.putBit((r>>>s-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(r){const s=Math.floor(this.length/8);this.buffer.length<=s&&this.buffer.push(0),r&&(this.buffer[s]|=128>>>this.length%8),this.length++}};var Ks=Xt;function Qe(r){if(!r||r<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=r,this.data=new Uint8Array(r*r),this.reservedBit=new Uint8Array(r*r)}Qe.prototype.set=function(r,s,o,a){const l=r*this.size+s;this.data[l]=o,a&&(this.reservedBit[l]=!0)};Qe.prototype.get=function(r,s){return this.data[r*this.size+s]};Qe.prototype.xor=function(r,s,o){this.data[r*this.size+s]^=o};Qe.prototype.isReserved=function(r,s){return this.reservedBit[r*this.size+s]};var Js=Qe,Ft={};(function(r){const s=X.getSymbolSize;r.getRowColCoords=function(a){if(a===1)return[];const l=Math.floor(a/7)+2,i=s(a),d=i===145?26:Math.ceil((i-13)/(2*l-2))*2,h=[i-7];for(let u=1;u<l-1;u++)h[u]=h[u-1]-d;return h.push(6),h.reverse()},r.getPositions=function(a){const l=[],i=r.getRowColCoords(a),d=i.length;for(let h=0;h<d;h++)for(let u=0;u<d;u++)h===0&&u===0||h===0&&u===d-1||h===d-1&&u===0||l.push([i[h],i[u]]);return l}})(Ft);var es={};const Ys=X.getSymbolSize,Kt=7;es.getPositions=function(s){const o=Ys(s);return[[0,0],[o-Kt,0],[0,o-Kt]]};var ts={};(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const s={N1:3,N2:3,N3:40,N4:10};r.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},r.from=function(l){return r.isValid(l)?parseInt(l,10):void 0},r.getPenaltyN1=function(l){const i=l.size;let d=0,h=0,u=0,w=null,x=null;for(let U=0;U<i;U++){h=u=0,w=x=null;for(let j=0;j<i;j++){let b=l.get(U,j);b===w?h++:(h>=5&&(d+=s.N1+(h-5)),w=b,h=1),b=l.get(j,U),b===x?u++:(u>=5&&(d+=s.N1+(u-5)),x=b,u=1)}h>=5&&(d+=s.N1+(h-5)),u>=5&&(d+=s.N1+(u-5))}return d},r.getPenaltyN2=function(l){const i=l.size;let d=0;for(let h=0;h<i-1;h++)for(let u=0;u<i-1;u++){const w=l.get(h,u)+l.get(h,u+1)+l.get(h+1,u)+l.get(h+1,u+1);(w===4||w===0)&&d++}return d*s.N2},r.getPenaltyN3=function(l){const i=l.size;let d=0,h=0,u=0;for(let w=0;w<i;w++){h=u=0;for(let x=0;x<i;x++)h=h<<1&2047|l.get(w,x),x>=10&&(h===1488||h===93)&&d++,u=u<<1&2047|l.get(x,w),x>=10&&(u===1488||u===93)&&d++}return d*s.N3},r.getPenaltyN4=function(l){let i=0;const d=l.data.length;for(let u=0;u<d;u++)i+=l.data[u];return Math.abs(Math.ceil(i*100/d/5)-10)*s.N4};function o(a,l,i){switch(a){case r.Patterns.PATTERN000:return(l+i)%2===0;case r.Patterns.PATTERN001:return l%2===0;case r.Patterns.PATTERN010:return i%3===0;case r.Patterns.PATTERN011:return(l+i)%3===0;case r.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(i/3))%2===0;case r.Patterns.PATTERN101:return l*i%2+l*i%3===0;case r.Patterns.PATTERN110:return(l*i%2+l*i%3)%2===0;case r.Patterns.PATTERN111:return(l*i%3+(l+i)%2)%2===0;default:throw new Error("bad maskPattern:"+a)}}r.applyMask=function(l,i){const d=i.size;for(let h=0;h<d;h++)for(let u=0;u<d;u++)i.isReserved(u,h)||i.xor(u,h,o(l,u,h))},r.getBestMask=function(l,i){const d=Object.keys(r.Patterns).length;let h=0,u=1/0;for(let w=0;w<d;w++){i(w),r.applyMask(w,l);const x=r.getPenaltyN1(l)+r.getPenaltyN2(l)+r.getPenaltyN3(l)+r.getPenaltyN4(l);r.applyMask(w,l),x<u&&(u=x,h=w)}return h}})(ts);var Xe={};const oe=Ze,He=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Ke=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];Xe.getBlocksCount=function(s,o){switch(o){case oe.L:return He[(s-1)*4+0];case oe.M:return He[(s-1)*4+1];case oe.Q:return He[(s-1)*4+2];case oe.H:return He[(s-1)*4+3];default:return}};Xe.getTotalCodewordsCount=function(s,o){switch(o){case oe.L:return Ke[(s-1)*4+0];case oe.M:return Ke[(s-1)*4+1];case oe.Q:return Ke[(s-1)*4+2];case oe.H:return Ke[(s-1)*4+3];default:return}};var ss={},Fe={};const Ve=new Uint8Array(512),Ye=new Uint8Array(256);(function(){let s=1;for(let o=0;o<255;o++)Ve[o]=s,Ye[s]=o,s<<=1,s&256&&(s^=285);for(let o=255;o<512;o++)Ve[o]=Ve[o-255]})();Fe.log=function(s){if(s<1)throw new Error("log("+s+")");return Ye[s]};Fe.exp=function(s){return Ve[s]};Fe.mul=function(s,o){return s===0||o===0?0:Ve[Ye[s]+Ye[o]]};(function(r){const s=Fe;r.mul=function(a,l){const i=new Uint8Array(a.length+l.length-1);for(let d=0;d<a.length;d++)for(let h=0;h<l.length;h++)i[d+h]^=s.mul(a[d],l[h]);return i},r.mod=function(a,l){let i=new Uint8Array(a);for(;i.length-l.length>=0;){const d=i[0];for(let u=0;u<l.length;u++)i[u]^=s.mul(l[u],d);let h=0;for(;h<i.length&&i[h]===0;)h++;i=i.slice(h)}return i},r.generateECPolynomial=function(a){let l=new Uint8Array([1]);for(let i=0;i<a;i++)l=r.mul(l,new Uint8Array([1,s.exp(i)]));return l}})(ss);const rs=ss;function yt(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}yt.prototype.initialize=function(s){this.degree=s,this.genPoly=rs.generateECPolynomial(this.degree)};yt.prototype.encode=function(s){if(!this.genPoly)throw new Error("Encoder not initialized");const o=new Uint8Array(s.length+this.degree);o.set(s);const a=rs.mod(o,this.genPoly),l=this.degree-a.length;if(l>0){const i=new Uint8Array(this.degree);return i.set(a,l),i}return a};var Ws=yt,ns={},ce={},wt={};wt.isValid=function(s){return!isNaN(s)&&s>=1&&s<=40};var ne={};const as="[0-9]+",Zs="[A-Z $%*+\\-./:]+";let ze="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";ze=ze.replace(/u/g,"\\u");const Xs="(?:(?![A-Z0-9 $%*+\\-./:]|"+ze+`)(?:.|[\r
]))+`;ne.KANJI=new RegExp(ze,"g");ne.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");ne.BYTE=new RegExp(Xs,"g");ne.NUMERIC=new RegExp(as,"g");ne.ALPHANUMERIC=new RegExp(Zs,"g");const Fs=new RegExp("^"+ze+"$"),er=new RegExp("^"+as+"$"),tr=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");ne.testKanji=function(s){return Fs.test(s)};ne.testNumeric=function(s){return er.test(s)};ne.testAlphanumeric=function(s){return tr.test(s)};(function(r){const s=wt,o=ne;r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(i,d){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!s.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?i.ccBits[0]:d<27?i.ccBits[1]:i.ccBits[2]},r.getBestModeForData=function(i){return o.testNumeric(i)?r.NUMERIC:o.testAlphanumeric(i)?r.ALPHANUMERIC:o.testKanji(i)?r.KANJI:r.BYTE},r.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},r.isValid=function(i){return i&&i.bit&&i.ccBits};function a(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+l)}}r.from=function(i,d){if(r.isValid(i))return i;try{return a(i)}catch{return d}}})(ce);(function(r){const s=X,o=Xe,a=Ze,l=ce,i=wt,d=7973,h=s.getBCHDigit(d);function u(j,b,T){for(let p=1;p<=40;p++)if(b<=r.getCapacity(p,T,j))return p}function w(j,b){return l.getCharCountIndicator(j,b)+4}function x(j,b){let T=0;return j.forEach(function(p){const G=w(p.mode,b);T+=G+p.getBitsLength()}),T}function U(j,b){for(let T=1;T<=40;T++)if(x(j,T)<=r.getCapacity(T,b,l.MIXED))return T}r.from=function(b,T){return i.isValid(b)?parseInt(b,10):T},r.getCapacity=function(b,T,p){if(!i.isValid(b))throw new Error("Invalid QR Code version");typeof p>"u"&&(p=l.BYTE);const G=s.getSymbolTotalCodewords(b),S=o.getTotalCodewordsCount(b,T),k=(G-S)*8;if(p===l.MIXED)return k;const v=k-w(p,b);switch(p){case l.NUMERIC:return Math.floor(v/10*3);case l.ALPHANUMERIC:return Math.floor(v/11*2);case l.KANJI:return Math.floor(v/13);case l.BYTE:default:return Math.floor(v/8)}},r.getBestVersionForData=function(b,T){let p;const G=a.from(T,a.M);if(Array.isArray(b)){if(b.length>1)return U(b,G);if(b.length===0)return 1;p=b[0]}else p=b;return u(p.mode,p.getLength(),G)},r.getEncodedBits=function(b){if(!i.isValid(b)||b<7)throw new Error("Invalid QR Code version");let T=b<<12;for(;s.getBCHDigit(T)-h>=0;)T^=d<<s.getBCHDigit(T)-h;return b<<12|T}})(ns);var ls={};const gt=X,is=1335,sr=21522,Jt=gt.getBCHDigit(is);ls.getEncodedBits=function(s,o){const a=s.bit<<3|o;let l=a<<10;for(;gt.getBCHDigit(l)-Jt>=0;)l^=is<<gt.getBCHDigit(l)-Jt;return(a<<10|l)^sr};var os={};const rr=ce;function pe(r){this.mode=rr.NUMERIC,this.data=r.toString()}pe.getBitsLength=function(s){return 10*Math.floor(s/3)+(s%3?s%3*3+1:0)};pe.prototype.getLength=function(){return this.data.length};pe.prototype.getBitsLength=function(){return pe.getBitsLength(this.data.length)};pe.prototype.write=function(s){let o,a,l;for(o=0;o+3<=this.data.length;o+=3)a=this.data.substr(o,3),l=parseInt(a,10),s.put(l,10);const i=this.data.length-o;i>0&&(a=this.data.substr(o),l=parseInt(a,10),s.put(l,i*3+1))};var nr=pe;const ar=ce,ot=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ye(r){this.mode=ar.ALPHANUMERIC,this.data=r}ye.getBitsLength=function(s){return 11*Math.floor(s/2)+6*(s%2)};ye.prototype.getLength=function(){return this.data.length};ye.prototype.getBitsLength=function(){return ye.getBitsLength(this.data.length)};ye.prototype.write=function(s){let o;for(o=0;o+2<=this.data.length;o+=2){let a=ot.indexOf(this.data[o])*45;a+=ot.indexOf(this.data[o+1]),s.put(a,11)}this.data.length%2&&s.put(ot.indexOf(this.data[o]),6)};var lr=ye;const ir=ce;function we(r){this.mode=ir.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}we.getBitsLength=function(s){return s*8};we.prototype.getLength=function(){return this.data.length};we.prototype.getBitsLength=function(){return we.getBitsLength(this.data.length)};we.prototype.write=function(r){for(let s=0,o=this.data.length;s<o;s++)r.put(this.data[s],8)};var or=we;const cr=ce,dr=X;function be(r){this.mode=cr.KANJI,this.data=r}be.getBitsLength=function(s){return s*13};be.prototype.getLength=function(){return this.data.length};be.prototype.getBitsLength=function(){return be.getBitsLength(this.data.length)};be.prototype.write=function(r){let s;for(s=0;s<this.data.length;s++){let o=dr.toSJIS(this.data[s]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[s]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),r.put(o,13)}};var ur=be,cs={exports:{}};(function(r){var s={single_source_shortest_paths:function(o,a,l){var i={},d={};d[a]=0;var h=s.PriorityQueue.make();h.push(a,0);for(var u,w,x,U,j,b,T,p,G;!h.empty();){u=h.pop(),w=u.value,U=u.cost,j=o[w]||{};for(x in j)j.hasOwnProperty(x)&&(b=j[x],T=U+b,p=d[x],G=typeof d[x]>"u",(G||p>T)&&(d[x]=T,h.push(x,T),i[x]=w))}if(typeof l<"u"&&typeof d[l]>"u"){var S=["Could not find a path from ",a," to ",l,"."].join("");throw new Error(S)}return i},extract_shortest_path_from_predecessor_list:function(o,a){for(var l=[],i=a;i;)l.push(i),o[i],i=o[i];return l.reverse(),l},find_path:function(o,a,l){var i=s.single_source_shortest_paths(o,a,l);return s.extract_shortest_path_from_predecessor_list(i,l)},PriorityQueue:{make:function(o){var a=s.PriorityQueue,l={},i;o=o||{};for(i in a)a.hasOwnProperty(i)&&(l[i]=a[i]);return l.queue=[],l.sorter=o.sorter||a.default_sorter,l},default_sorter:function(o,a){return o.cost-a.cost},push:function(o,a){var l={value:o,cost:a};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=s})(cs);var hr=cs.exports;(function(r){const s=ce,o=nr,a=lr,l=or,i=ur,d=ne,h=X,u=hr;function w(S){return unescape(encodeURIComponent(S)).length}function x(S,k,v){const E=[];let I;for(;(I=S.exec(v))!==null;)E.push({data:I[0],index:I.index,mode:k,length:I[0].length});return E}function U(S){const k=x(d.NUMERIC,s.NUMERIC,S),v=x(d.ALPHANUMERIC,s.ALPHANUMERIC,S);let E,I;return h.isKanjiModeEnabled()?(E=x(d.BYTE,s.BYTE,S),I=x(d.KANJI,s.KANJI,S)):(E=x(d.BYTE_KANJI,s.BYTE,S),I=[]),k.concat(v,E,I).sort(function(M,_){return M.index-_.index}).map(function(M){return{data:M.data,mode:M.mode,length:M.length}})}function j(S,k){switch(k){case s.NUMERIC:return o.getBitsLength(S);case s.ALPHANUMERIC:return a.getBitsLength(S);case s.KANJI:return i.getBitsLength(S);case s.BYTE:return l.getBitsLength(S)}}function b(S){return S.reduce(function(k,v){const E=k.length-1>=0?k[k.length-1]:null;return E&&E.mode===v.mode?(k[k.length-1].data+=v.data,k):(k.push(v),k)},[])}function T(S){const k=[];for(let v=0;v<S.length;v++){const E=S[v];switch(E.mode){case s.NUMERIC:k.push([E,{data:E.data,mode:s.ALPHANUMERIC,length:E.length},{data:E.data,mode:s.BYTE,length:E.length}]);break;case s.ALPHANUMERIC:k.push([E,{data:E.data,mode:s.BYTE,length:E.length}]);break;case s.KANJI:k.push([E,{data:E.data,mode:s.BYTE,length:w(E.data)}]);break;case s.BYTE:k.push([{data:E.data,mode:s.BYTE,length:w(E.data)}])}}return k}function p(S,k){const v={},E={start:{}};let I=["start"];for(let m=0;m<S.length;m++){const M=S[m],_=[];for(let R=0;R<M.length;R++){const B=M[R],le=""+m+R;_.push(le),v[le]={node:B,lastCount:0},E[le]={};for(let H=0;H<I.length;H++){const F=I[H];v[F]&&v[F].node.mode===B.mode?(E[F][le]=j(v[F].lastCount+B.length,B.mode)-j(v[F].lastCount,B.mode),v[F].lastCount+=B.length):(v[F]&&(v[F].lastCount=B.length),E[F][le]=j(B.length,B.mode)+4+s.getCharCountIndicator(B.mode,k))}}I=_}for(let m=0;m<I.length;m++)E[I[m]].end=0;return{map:E,table:v}}function G(S,k){let v;const E=s.getBestModeForData(S);if(v=s.from(k,E),v!==s.BYTE&&v.bit<E.bit)throw new Error('"'+S+'" cannot be encoded with mode '+s.toString(v)+`.
 Suggested mode is: `+s.toString(E));switch(v===s.KANJI&&!h.isKanjiModeEnabled()&&(v=s.BYTE),v){case s.NUMERIC:return new o(S);case s.ALPHANUMERIC:return new a(S);case s.KANJI:return new i(S);case s.BYTE:return new l(S)}}r.fromArray=function(k){return k.reduce(function(v,E){return typeof E=="string"?v.push(G(E,null)):E.data&&v.push(G(E.data,E.mode)),v},[])},r.fromString=function(k,v){const E=U(k,h.isKanjiModeEnabled()),I=T(E),m=p(I,v),M=u.find_path(m.map,"start","end"),_=[];for(let R=1;R<M.length-1;R++)_.push(m.table[M[R]].node);return r.fromArray(b(_))},r.rawSplit=function(k){return r.fromArray(U(k,h.isKanjiModeEnabled()))}})(os);const et=X,ct=Ze,gr=Ks,mr=Js,fr=Ft,xr=es,mt=ts,ft=Xe,pr=Ws,We=ns,yr=ls,wr=ce,dt=os;function br(r,s){const o=r.size,a=xr.getPositions(s);for(let l=0;l<a.length;l++){const i=a[l][0],d=a[l][1];for(let h=-1;h<=7;h++)if(!(i+h<=-1||o<=i+h))for(let u=-1;u<=7;u++)d+u<=-1||o<=d+u||(h>=0&&h<=6&&(u===0||u===6)||u>=0&&u<=6&&(h===0||h===6)||h>=2&&h<=4&&u>=2&&u<=4?r.set(i+h,d+u,!0,!0):r.set(i+h,d+u,!1,!0))}}function Nr(r){const s=r.size;for(let o=8;o<s-8;o++){const a=o%2===0;r.set(o,6,a,!0),r.set(6,o,a,!0)}}function jr(r,s){const o=fr.getPositions(s);for(let a=0;a<o.length;a++){const l=o[a][0],i=o[a][1];for(let d=-2;d<=2;d++)for(let h=-2;h<=2;h++)d===-2||d===2||h===-2||h===2||d===0&&h===0?r.set(l+d,i+h,!0,!0):r.set(l+d,i+h,!1,!0)}}function Cr(r,s){const o=r.size,a=We.getEncodedBits(s);let l,i,d;for(let h=0;h<18;h++)l=Math.floor(h/3),i=h%3+o-8-3,d=(a>>h&1)===1,r.set(l,i,d,!0),r.set(i,l,d,!0)}function ut(r,s,o){const a=r.size,l=yr.getEncodedBits(s,o);let i,d;for(i=0;i<15;i++)d=(l>>i&1)===1,i<6?r.set(i,8,d,!0):i<8?r.set(i+1,8,d,!0):r.set(a-15+i,8,d,!0),i<8?r.set(8,a-i-1,d,!0):i<9?r.set(8,15-i-1+1,d,!0):r.set(8,15-i-1,d,!0);r.set(a-8,8,1,!0)}function vr(r,s){const o=r.size;let a=-1,l=o-1,i=7,d=0;for(let h=o-1;h>0;h-=2)for(h===6&&h--;;){for(let u=0;u<2;u++)if(!r.isReserved(l,h-u)){let w=!1;d<s.length&&(w=(s[d]>>>i&1)===1),r.set(l,h-u,w),i--,i===-1&&(d++,i=7)}if(l+=a,l<0||o<=l){l-=a,a=-a;break}}}function Sr(r,s,o){const a=new gr;o.forEach(function(u){a.put(u.mode.bit,4),a.put(u.getLength(),wr.getCharCountIndicator(u.mode,r)),u.write(a)});const l=et.getSymbolTotalCodewords(r),i=ft.getTotalCodewordsCount(r,s),d=(l-i)*8;for(a.getLengthInBits()+4<=d&&a.put(0,4);a.getLengthInBits()%8!==0;)a.putBit(0);const h=(d-a.getLengthInBits())/8;for(let u=0;u<h;u++)a.put(u%2?17:236,8);return Er(a,r,s)}function Er(r,s,o){const a=et.getSymbolTotalCodewords(s),l=ft.getTotalCodewordsCount(s,o),i=a-l,d=ft.getBlocksCount(s,o),h=a%d,u=d-h,w=Math.floor(a/d),x=Math.floor(i/d),U=x+1,j=w-x,b=new pr(j);let T=0;const p=new Array(d),G=new Array(d);let S=0;const k=new Uint8Array(r.buffer);for(let M=0;M<d;M++){const _=M<u?x:U;p[M]=k.slice(T,T+_),G[M]=b.encode(p[M]),T+=_,S=Math.max(S,_)}const v=new Uint8Array(a);let E=0,I,m;for(I=0;I<S;I++)for(m=0;m<d;m++)I<p[m].length&&(v[E++]=p[m][I]);for(I=0;I<j;I++)for(m=0;m<d;m++)v[E++]=G[m][I];return v}function _r(r,s,o,a){let l;if(Array.isArray(r))l=dt.fromArray(r);else if(typeof r=="string"){let w=s;if(!w){const x=dt.rawSplit(r);w=We.getBestVersionForData(x,o)}l=dt.fromString(r,w||40)}else throw new Error("Invalid data");const i=We.getBestVersionForData(l,o);if(!i)throw new Error("The amount of data is too big to be stored in a QR Code");if(!s)s=i;else if(s<i)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+i+`.
`);const d=Sr(s,o,l),h=et.getSymbolSize(s),u=new mr(h);return br(u,s),Nr(u),jr(u,s),ut(u,o,0),s>=7&&Cr(u,s),vr(u,d),isNaN(a)&&(a=mt.getBestMask(u,ut.bind(null,u,o))),mt.applyMask(a,u),ut(u,o,a),{modules:u,version:s,errorCorrectionLevel:o,maskPattern:a,segments:l}}Zt.create=function(s,o){if(typeof s>"u"||s==="")throw new Error("No input text");let a=ct.M,l,i;return typeof o<"u"&&(a=ct.from(o.errorCorrectionLevel,ct.M),l=We.from(o.version),i=mt.from(o.maskPattern),o.toSJISFunc&&et.setToSJISFunction(o.toSJISFunc)),_r(s,l,a,i)};var ds={},bt={};(function(r){function s(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let a=o.slice().replace("#","").split("");if(a.length<3||a.length===5||a.length>8)throw new Error("Invalid hex color: "+o);(a.length===3||a.length===4)&&(a=Array.prototype.concat.apply([],a.map(function(i){return[i,i]}))),a.length===6&&a.push("F","F");const l=parseInt(a.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+a.slice(0,6).join("")}}r.getOptions=function(a){a||(a={}),a.color||(a.color={});const l=typeof a.margin>"u"||a.margin===null||a.margin<0?4:a.margin,i=a.width&&a.width>=21?a.width:void 0,d=a.scale||4;return{width:i,scale:i?4:d,margin:l,color:{dark:s(a.color.dark||"#000000ff"),light:s(a.color.light||"#ffffffff")},type:a.type,rendererOpts:a.rendererOpts||{}}},r.getScale=function(a,l){return l.width&&l.width>=a+l.margin*2?l.width/(a+l.margin*2):l.scale},r.getImageWidth=function(a,l){const i=r.getScale(a,l);return Math.floor((a+l.margin*2)*i)},r.qrToImageData=function(a,l,i){const d=l.modules.size,h=l.modules.data,u=r.getScale(d,i),w=Math.floor((d+i.margin*2)*u),x=i.margin*u,U=[i.color.light,i.color.dark];for(let j=0;j<w;j++)for(let b=0;b<w;b++){let T=(j*w+b)*4,p=i.color.light;if(j>=x&&b>=x&&j<w-x&&b<w-x){const G=Math.floor((j-x)/u),S=Math.floor((b-x)/u);p=U[h[G*d+S]?1:0]}a[T++]=p.r,a[T++]=p.g,a[T++]=p.b,a[T]=p.a}}})(bt);(function(r){const s=bt;function o(l,i,d){l.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=d,i.width=d,i.style.height=d+"px",i.style.width=d+"px"}function a(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(i,d,h){let u=h,w=d;typeof u>"u"&&(!d||!d.getContext)&&(u=d,d=void 0),d||(w=a()),u=s.getOptions(u);const x=s.getImageWidth(i.modules.size,u),U=w.getContext("2d"),j=U.createImageData(x,x);return s.qrToImageData(j.data,i,u),o(U,w,x),U.putImageData(j,0,0),w},r.renderToDataURL=function(i,d,h){let u=h;typeof u>"u"&&(!d||!d.getContext)&&(u=d,d=void 0),u||(u={});const w=r.render(i,d,u),x=u.type||"image/png",U=u.rendererOpts||{};return w.toDataURL(x,U.quality)}})(ds);var us={};const Ar=bt;function Yt(r,s){const o=r.a/255,a=s+'="'+r.hex+'"';return o<1?a+" "+s+'-opacity="'+o.toFixed(2).slice(1)+'"':a}function ht(r,s,o){let a=r+s;return typeof o<"u"&&(a+=" "+o),a}function Tr(r,s,o){let a="",l=0,i=!1,d=0;for(let h=0;h<r.length;h++){const u=Math.floor(h%s),w=Math.floor(h/s);!u&&!i&&(i=!0),r[h]?(d++,h>0&&u>0&&r[h-1]||(a+=i?ht("M",u+o,.5+w+o):ht("m",l,0),l=0,i=!1),u+1<s&&r[h+1]||(a+=ht("h",d),d=0)):l++}return a}us.render=function(s,o,a){const l=Ar.getOptions(o),i=s.modules.size,d=s.modules.data,h=i+l.margin*2,u=l.color.light.a?"<path "+Yt(l.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",w="<path "+Yt(l.color.dark,"stroke")+' d="'+Tr(d,i,l.margin)+'"/>',x='viewBox="0 0 '+h+" "+h+'"',j='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+x+' shape-rendering="crispEdges">'+u+w+`</svg>
`;return typeof a=="function"&&a(null,j),j};const kr=Gs,xt=Zt,hs=ds,Mr=us;function Nt(r,s,o,a,l){const i=[].slice.call(arguments,1),d=i.length,h=typeof i[d-1]=="function";if(!h&&!kr())throw new Error("Callback required as last argument");if(h){if(d<2)throw new Error("Too few arguments provided");d===2?(l=o,o=s,s=a=void 0):d===3&&(s.getContext&&typeof l>"u"?(l=a,a=void 0):(l=a,a=o,o=s,s=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(o=s,s=a=void 0):d===2&&!s.getContext&&(a=o,o=s,s=void 0),new Promise(function(u,w){try{const x=xt.create(o,a);u(r(x,s,a))}catch(x){w(x)}})}try{const u=xt.create(o,a);l(null,r(u,s,a))}catch(u){l(u)}}he.create=xt.create;he.toCanvas=Nt.bind(null,hs.render);he.toDataURL=Nt.bind(null,hs.renderToDataURL);he.toString=Nt.bind(null,function(r,s,o){return Mr.render(r,o)});const Rr=({url:r,title:s="QR Code",description:o="Scan this QR code to access the form",size:a=200,showControls:l=!0})=>{const[i,d]=L.useState(null),[h,u]=L.useState(!1),[w,x]=L.useState(null),[U,j]=L.useState(!1),[b,T]=L.useState(a),[p,G]=L.useState(r||"");L.useRef(null),L.useEffect(()=>{p!=null&&p.trim()&&S(p,b)},[p,b]);const S=async(m,M=200)=>{var _;try{if(u(!0),x(null),!(m!=null&&m.trim()))throw new Error("URL is required to generate QR code");let R=m==null?void 0:m.trim();!(R!=null&&R.startsWith("http://"))&&!(R!=null&&R.startsWith("https://"))&&(R!=null&&R.startsWith("/")?R=`${(_=window==null?void 0:window.location)==null?void 0:_.origin}${R}`:R=`https://${R}`);const B=await(he==null?void 0:he.toDataURL(R,{width:M,height:M,margin:2,color:{dark:"#000000",light:"#FFFFFF"},errorCorrectionLevel:"M"}));d(B)}catch(R){console.error("Error generating QR code:",R),x((R==null?void 0:R.message)||"Failed to generate QR code")}finally{u(!1)}},k=()=>{var m,M;if(i)try{const _=document==null?void 0:document.createElement("a");_.download=`${s==null?void 0:s.replace(/[^a-zA-Z0-9]/g,"_")}_QRCode.png`,_.href=i,(m=document==null?void 0:document.body)==null||m.appendChild(_),_==null||_.click(),(M=document==null?void 0:document.body)==null||M.removeChild(_)}catch(_){console.error("Error downloading QR code:",_),x("Failed to download QR code")}},v=async()=>{var m,M,_;try{if(navigator!=null&&navigator.clipboard&&i){const R=await fetch(i),B=await(R==null?void 0:R.blob());await((m=navigator==null?void 0:navigator.clipboard)==null?void 0:m.write([new ClipboardItem({"image/png":B})])),j(!0),setTimeout(()=>j(!1),2e3)}else await((M=navigator==null?void 0:navigator.clipboard)==null?void 0:M.writeText(p)),j(!0),setTimeout(()=>j(!1),2e3)}catch(R){console.error("Error copying to clipboard:",R);try{await((_=navigator==null?void 0:navigator.clipboard)==null?void 0:_.writeText(p)),j(!0),setTimeout(()=>j(!1),2e3)}catch{x("Failed to copy to clipboard")}}},E=async()=>{try{if(navigator!=null&&navigator.share&&i){const m=await fetch(i),M=await(m==null?void 0:m.blob()),_=new File([M],`${s}_QRCode.png`,{type:"image/png"});await(navigator==null?void 0:navigator.share({title:s,text:o,url:p,files:[_]}))}else await v()}catch(m){console.error("Error sharing QR code:",m),(m==null?void 0:m.name)!=="AbortError"&&x("Failed to share QR code")}},I=()=>{G(r||""),T(a),x(null),j(!1)};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Je,{className:"w-5 h-5 text-blue-600 mr-2"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s})]}),o&&e.jsx("p",{className:"text-gray-600 text-sm mb-6",children:o}),w&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Wt,{className:"w-4 h-4 text-red-600 mr-2"}),e.jsx("p",{className:"text-red-800 text-sm",children:w})]})}),l&&e.jsxs("div",{className:"mb-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL to Generate QR Code"}),e.jsx("input",{type:"url",value:p,onChange:m=>{var M;return G((M=m==null?void 0:m.target)==null?void 0:M.value)},placeholder:"Enter URL (e.g., https://yoursite.com/guest-claims-form)",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["QR Code Size: ",b,"px"]}),e.jsx("input",{type:"range",min:"100",max:"400",step:"25",value:b,onChange:m=>{var M;return T(parseInt((M=m==null?void 0:m.target)==null?void 0:M.value))},className:"w-full"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Y,{onClick:()=>S(p,b),disabled:h||!(p!=null&&p.trim()),variant:"primary",size:"md",className:"","aria-label":"Generate QR Code",children:h?"Generating...":"Generate QR Code"}),e.jsx(Y,{onClick:I,variant:"secondary",size:"md",className:"","aria-label":"Reset to default values",children:"Reset"})]})]}),e.jsxs("div",{className:"flex flex-col items-center mb-6",children:[h&&e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Generating QR Code..."})]}),i&&!h&&e.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-4 shadow-sm",children:e.jsx("img",{src:i,alt:`QR Code for ${s}`,className:"block",style:{width:b,height:b}})}),!i&&!h&&(p==null?void 0:p.trim())&&e.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed border-gray-300 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:'Click "Generate QR Code" to create QR code'})]})}),!(p!=null&&p.trim())&&l&&e.jsx("div",{className:"flex items-center justify-center p-8 border-2 border-dashed border-gray-300 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Je,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),e.jsx("p",{className:"text-gray-500",children:"Enter a URL to generate QR code"})]})})]}),i&&e.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[e.jsxs(Y,{onClick:k,variant:"primary",size:"md",className:"","aria-label":"Download QR Code as PNG",children:[e.jsx(Ps,{className:"w-4 h-4 mr-1"}),"Download PNG"]}),e.jsxs(Y,{onClick:v,variant:"secondary",size:"md",className:"","aria-label":U?"QR Code copied":"Copy QR Code to clipboard",children:[U?e.jsx(Bs,{className:"w-4 h-4 mr-1"}):e.jsx(Ds,{className:"w-4 h-4 mr-1"}),U?"Copied!":"Copy"]}),(navigator==null?void 0:navigator.share)&&e.jsxs(Y,{onClick:E,variant:"secondary",size:"md",className:"","aria-label":"Share QR Code",children:[e.jsx(Ls,{className:"w-4 h-4 mr-1"}),"Share"]})]}),p&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-md",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Target URL:"}),e.jsx("p",{className:"text-sm font-mono text-gray-800 break-all",children:p})]})]})},Vr=()=>{var _t,At,Tt,kt,Mt;const{userProfile:r,user:s,loading:o}=Is(),{orgId:a}=Qs(),{logBusinessAction:l,logError:i}=Os(),[d,h]=L.useState(!0),[u,w]=L.useState("userAccounts"),[x,U]=L.useState(null),[j,b]=L.useState(!0),[T,p]=L.useState(""),[G,S]=L.useState(""),[k,v]=L.useState(""),[E,I]=L.useState(""),[m,M]=L.useState({authUser:null,userProfile:null,profileLoadError:null,showDebug:!1}),[_,R]=L.useState([]),[B,le]=L.useState([]),[H,F]=L.useState([]),[W,jt]=L.useState([]),[Z,Ct]=L.useState([]),[ge,ee]=L.useState(!1),[Ne,vt]=L.useState(null),[gs,Oe]=L.useState(!1),[te,ms]=L.useState(""),[z,St]=L.useState(null),[N,de]=L.useState({full_name:"",email:"",password:"",role:"manager",department:"",phone:""}),[V,je]=L.useState({full_name:"",phone:"",email:"",department:""}),[A,ue]=L.useState({name:"",contact_person:"",phone:"",email:"",specialty:"",rating:""}),[y,ae]=L.useState({name:"",brand:"",category:"",cost:"",unit_price:"",part_number:"",description:"",op_code:""}),[Q,Ge]=L.useState({name:"",message_template:"",template_type:"job_status"}),tt=[{id:"userAccounts",label:"User Accounts",icon:$s},{id:"staffRecords",label:"Staff Records",icon:qs},{id:"vendors",label:"Vendors",icon:Ie},{id:"products",label:"Aftermarket Products",icon:Vs},{id:"smsTemplates",label:"SMS Templates",icon:zs},{id:"qrCodes",label:"QR Code Generator",icon:Je}],st=[{value:"admin",label:"Admin"},{value:"manager",label:"Manager"},{value:"staff",label:"Staff"},{value:"vendor",label:"Vendor"}],rt=[{value:"Delivery Coordinator",label:"Delivery Coordinator"},{value:"Managers",label:"Managers"}],nt=[{value:"Sales Consultants",label:"Sales Consultants"},{value:"Finance Manager",label:"Finance Manager"}],at=[{value:"job_status",label:"Job Status"},{value:"overdue_alert",label:"Overdue Alert"},{value:"customer_notification",label:"Customer Notification"},{value:"vendor_assignment",label:"Vendor Assignment"},{value:"completion_notice",label:"Completion Notice"}];L.useEffect(()=>{o||(async()=>{var g,n,c;try{if(console.log("Admin panel initializing...",{authLoading:o,user:!!s,userProfile:!!r}),!P){U("Database connection unavailable. Please refresh the page."),h(!1);return}const{error:f}=await((c=(n=(g=P)==null?void 0:g.from("user_profiles"))==null?void 0:n.select("id"))==null?void 0:c.limit(1));if(f){console.error("Database connection failed:",f),U("Unable to connect to database. Please check your Supabase configuration."),h(!1);return}await Et(),h(!1)}catch(f){console.error("Admin initialization failed:",f),U("Failed to initialize admin panel: "+(f==null?void 0:f.message)),h(!1)}})()},[o]);const fs=async()=>{var t,g,n,c,f,D,q,se,Ae,Te,ke,Me,Re,Pe,Be;console.log("=== ADMIN ACCESS DEBUG ===");try{const{data:{session:$},error:me}=await((g=(t=P)==null?void 0:t.auth)==null?void 0:g.getSession());if(console.log("Current session:",{hasSession:!!$,sessionError:me,userId:(n=$==null?void 0:$.user)==null?void 0:n.id,userEmail:(c=$==null?void 0:$.user)==null?void 0:c.email}),$!=null&&$.user){console.log("Auth user:",{id:(f=$==null?void 0:$.user)==null?void 0:f.id,email:(D=$==null?void 0:$.user)==null?void 0:D.email,role:(q=$==null?void 0:$.user)==null?void 0:q.role}),console.log("Attempting to fetch user profile...");const{data:xe,error:Le}=await((Me=(ke=(Ae=(se=P)==null?void 0:se.from("user_profiles"))==null?void 0:Ae.select("*"))==null?void 0:ke.eq("id",(Te=$==null?void 0:$.user)==null?void 0:Te.id))==null?void 0:Me.single());console.log("Direct profile fetch result:",{profile:xe,profileError:Le,hasProfile:!!xe}),M({authUser:$==null?void 0:$.user,userProfile:xe,profileLoadError:Le,showDebug:!0})}else console.log("No authenticated user found"),M({authUser:null,userProfile:null,profileLoadError:{message:"No authenticated user"},showDebug:!0});console.log("Testing database access...");const{data:fe,error:De}=await((Be=(Pe=(Re=P)==null?void 0:Re.from("user_profiles"))==null?void 0:Pe.select("id, full_name, role"))==null?void 0:Be.limit(5));console.log("Database access test:",{canAccess:!De,recordCount:(fe==null?void 0:fe.length)||0,error:De})}catch($){console.error("Debug error:",$),M(me=>({...me,profileLoadError:$,showDebug:!0}))}},Et=async()=>{console.log("Loading admin data...");try{const t=await Promise.allSettled([Ce(),ve(),Se(),Ee(),lt()]);t==null||t.forEach((g,n)=>{const c=["User Accounts","Staff Records","Vendors","Products","SMS Templates"];(g==null?void 0:g.status)==="rejected"?console.error(`Failed to load ${c==null?void 0:c[n]}:`,g==null?void 0:g.reason):console.log(`Successfully loaded ${c==null?void 0:c[n]}`)})}catch(t){console.error("Error loading admin data:",t),U("Failed to load some admin data. Please try refreshing the page.")}},Ce=async()=>{var t,g,n;try{console.log("Loading user accounts...");let c=(n=(g=(t=P)==null?void 0:t.from("user_profiles"))==null?void 0:g.select("*",{count:"exact"}))==null?void 0:n.in("role",["admin","manager"]);j&&a&&(c=c==null?void 0:c.eq("org_id",a)),c=c==null?void 0:c.order("created_at",{ascending:!1});const{data:f,error:D,count:q}=await c;if(D)throw console.error("User accounts query error:",D),D;console.log(`User accounts query result: ${(f==null?void 0:f.length)||0} records`),R(f||[])}catch(c){console.error("Error loading user accounts:",c)}},ve=async()=>{var t,g,n;try{console.log("Loading staff records...");let c=(n=(g=(t=P)==null?void 0:t.from("user_profiles"))==null?void 0:g.select("*",{count:"exact"}))==null?void 0:n.eq("role","staff");j&&a&&(c=c==null?void 0:c.eq("org_id",a)),c=c==null?void 0:c.order("created_at",{ascending:!1});const{data:f,error:D}=await c;if(D)throw console.error("Staff records query error:",D),D;console.log(`Staff records: ${f==null?void 0:f.length} staff members found`),le(f||[])}catch(c){console.error("Error loading staff records:",c)}},xs=async()=>{var t,g,n,c;if(p(""),!a){p("No organization detected for current user.");return}try{ee(!0);const{error:f}=await((c=(n=(g=(t=P)==null?void 0:t.from("user_profiles"))==null?void 0:g.update({org_id:a,is_active:!0}))==null?void 0:n.is("org_id",null))==null?void 0:c.eq("role","staff"));if(f)throw f;p("Assigned org to active staff without org."),await ve();try{await(l==null?void 0:l("assign_org_staff","system",null,"Assigned org to staff without org",{orgId:a}))}catch{}}catch(f){console.error("assignOrgToActiveStaff error:",f),p((f==null?void 0:f.message)||"Failed to assign org to staff");try{await(i==null?void 0:i(f,{where:"assignOrgToActiveStaff",orgId:a}))}catch{}}finally{ee(!1)}},ps=async()=>{var t,g,n,c;if(S(""),!a){S("No organization detected for current user.");return}try{ee(!0);const{error:f}=await((c=(n=(g=(t=P)==null?void 0:t.from("user_profiles"))==null?void 0:g.update({org_id:a,is_active:!0}))==null?void 0:n.is("org_id",null))==null?void 0:c.in("role",["admin","manager"]));if(f)throw f;S("Assigned org to admin/manager accounts without org."),await Ce()}catch(f){console.error("assignOrgToAccounts error:",f),S((f==null?void 0:f.message)||"Failed to assign org to accounts")}finally{ee(!1)}};L.useEffect(()=>{ve(),Ce(),Se(),Ee()},[j,a]);const Se=async()=>{var t,g;try{console.log("Loading vendors...");let n=(g=(t=P)==null?void 0:t.from("vendors"))==null?void 0:g.select("*",{count:"exact"});j&&a&&(n=n==null?void 0:n.eq("org_id",a)),n=n==null?void 0:n.order("created_at",{ascending:!1});const{data:c,error:f,count:D}=await n;if(f)throw console.error("Vendors query error:",f),f;console.log(`Vendors query result: ${(c==null?void 0:c.length)||0} records`),F(c||[])}catch(n){console.error("Error loading vendors:",n)}},Ee=async()=>{var t,g;try{console.log("Loading products...");let n=(g=(t=P)==null?void 0:t.from("products"))==null?void 0:g.select("*, vendors(name)",{count:"exact"});j&&a&&(n=n==null?void 0:n.eq("org_id",a)),n=n==null?void 0:n.order("created_at",{ascending:!1});const{data:c,error:f,count:D}=await n;if(f)throw console.error("Products query error:",f),f;console.log(`Products query result: ${(c==null?void 0:c.length)||0} records`),jt(c||[])}catch(n){console.error("Error loading products:",n)}},ys=async()=>{var t,g,n;if(v(""),!a){v("No organization detected for current user.");return}try{ee(!0);const{error:c}=await((n=(g=(t=P)==null?void 0:t.from("vendors"))==null?void 0:g.update({org_id:a}))==null?void 0:n.is("org_id",null));if(c)throw c;v("Assigned org to vendors without org."),await Se();try{await(l==null?void 0:l("assign_org_vendors","system",null,"Assigned org to vendors without org",{orgId:a}))}catch{}}catch(c){console.error("assignOrgToVendors error:",c),v((c==null?void 0:c.message)||"Failed to assign org to vendors");try{await(i==null?void 0:i(c,{where:"assignOrgToVendors",orgId:a}))}catch{}}finally{ee(!1)}},ws=async()=>{var t,g,n;if(I(""),!a){I("No organization detected for current user.");return}try{ee(!0);const{error:c}=await((n=(g=(t=P)==null?void 0:t.from("products"))==null?void 0:g.update({org_id:a}))==null?void 0:n.is("org_id",null));if(c)throw c;I("Assigned org to products without org."),await Ee();try{await(l==null?void 0:l("assign_org_products","system",null,"Assigned org to products without org",{orgId:a}))}catch{}}catch(c){console.error("assignOrgToProducts error:",c),I((c==null?void 0:c.message)||"Failed to assign org to products");try{await(i==null?void 0:i(c,{where:"assignOrgToProducts",orgId:a}))}catch{}}finally{ee(!1)}},lt=async()=>{var t,g,n;try{console.log("Loading SMS templates...");const{data:c,error:f,count:D}=await((n=(g=(t=P)==null?void 0:t.from("sms_templates"))==null?void 0:g.select("*",{count:"exact"}))==null?void 0:n.order("created_at",{ascending:!1}));if(f)throw console.error("SMS templates query error:",f),f;console.log(`SMS templates query result: ${(c==null?void 0:c.length)||0} records`),Ct(c||[])}catch(c){console.error("Error loading SMS templates:",c)}},re=(t,g=null)=>{ms(t),St(g),Oe(!0),t==="userAccount"?de(g||{full_name:"",email:"",password:"",role:"manager",department:"",phone:""}):t==="staff"?je(g||{full_name:"",phone:"",email:"",department:""}):t==="vendor"?ue(g||{name:"",contact_person:"",phone:"",email:"",specialty:"",rating:""}):t==="product"?ae(g||{name:"",brand:"",category:"",cost:"",unit_price:"",part_number:"",description:"",op_code:""}):t==="template"&&Ge(g||{name:"",message_template:"",template_type:"job_status"})},bs=async t=>{t==null||t.preventDefault(),ee(!0);try{te==="userAccount"?await Ns():te==="staff"?await js():te==="vendor"?await Cs():te==="product"?await vs():te==="template"&&await Ss(),Oe(!1),St(null)}catch(g){console.error("Error submitting form:",g),alert("Error: "+(g==null?void 0:g.message))}finally{ee(!1)}},Ns=async()=>{var t,g,n,c,f;if(z){const{error:D}=await((n=(g=(t=P)==null?void 0:t.from("user_profiles"))==null?void 0:g.update({full_name:N==null?void 0:N.full_name,email:N==null?void 0:N.email,role:N==null?void 0:N.role,department:N==null?void 0:N.department,phone:N==null?void 0:N.phone}))==null?void 0:n.eq("id",z==null?void 0:z.id));if(D)throw D}else{if(!(N!=null&&N.password))throw new Error("Password is required for new users");const{data:D,error:q}=await((f=(c=P)==null?void 0:c.auth)==null?void 0:f.signUp({email:N==null?void 0:N.email,password:N==null?void 0:N.password,options:{data:{full_name:N==null?void 0:N.full_name,role:N==null?void 0:N.role,department:N==null?void 0:N.department,phone:N==null?void 0:N.phone}}}));if(q)throw q}await Ce()},js=async()=>{var g,n,c,f,D;const t={full_name:V==null?void 0:V.full_name,phone:(V==null?void 0:V.phone)||null,email:(V==null?void 0:V.email)||null,department:V==null?void 0:V.department,role:"staff",is_active:!0,vendor_id:null};if(z){const{error:q}=await((c=(n=(g=P)==null?void 0:g.from("user_profiles"))==null?void 0:n.update(t))==null?void 0:c.eq("id",z==null?void 0:z.id));if(q)throw q}else{const{error:q}=await((D=(f=P)==null?void 0:f.from("user_profiles"))==null?void 0:D.insert([t]));if(q)throw q}await ve()},Cs=async()=>{var g,n,c,f,D;const t={name:A==null?void 0:A.name,contact_person:A==null?void 0:A.contact_person,phone:A==null?void 0:A.phone,email:A==null?void 0:A.email,specialty:A==null?void 0:A.specialty,rating:A!=null&&A.rating?parseFloat(A==null?void 0:A.rating):null};if(z){const{error:q}=await((c=(n=(g=P)==null?void 0:g.from("vendors"))==null?void 0:n.update(t))==null?void 0:c.eq("id",z==null?void 0:z.id));if(q)throw q}else{const{error:q}=await((D=(f=P)==null?void 0:f.from("vendors"))==null?void 0:D.insert([t]));if(q)throw q}await Se()},vs=async()=>{var g,n,c,f,D;const t={name:y==null?void 0:y.name,brand:y==null?void 0:y.brand,category:y==null?void 0:y.category,cost:y!=null&&y.cost?parseFloat(y==null?void 0:y.cost):0,unit_price:y!=null&&y.unit_price?parseFloat(y==null?void 0:y.unit_price):0,part_number:y==null?void 0:y.part_number,description:y==null?void 0:y.description,op_code:(y==null?void 0:y.op_code)||null};if(z){const{error:q}=await((c=(n=(g=P)==null?void 0:g.from("products"))==null?void 0:n.update(t))==null?void 0:c.eq("id",z==null?void 0:z.id));if(q)throw q}else{const{error:q}=await((D=(f=P)==null?void 0:f.from("products"))==null?void 0:D.insert([t]));if(q)throw q}await Ee()},Ss=async()=>{var n,c,f,D,q;let t=Q==null?void 0:Q.message_template;if(!(t!=null&&t.startsWith("Stock #"))&&!(t!=null&&t.startsWith("{{stock"))&&(t="Stock #{{stock_number}}: "+t),(t==null?void 0:t.length)>160)throw new Error("SMS template must be under 160 characters");const g={name:Q==null?void 0:Q.name,message_template:t,template_type:Q==null?void 0:Q.template_type};if(z){const{error:se}=await((f=(c=(n=P)==null?void 0:n.from("sms_templates"))==null?void 0:c.update(g))==null?void 0:f.eq("id",z==null?void 0:z.id));if(se)throw se}else{const{error:se}=await((q=(D=P)==null?void 0:D.from("sms_templates"))==null?void 0:q.insert([g]));if(se)throw se}await lt()},_e=async(t,g,n=null)=>{var c,f,D,q,se,Ae,Te,ke,Me,Re,Pe,Be,$,me,fe,De,xe,Le,Rt,Pt,Bt,Dt,Lt,It,Ut,$t,qt,Vt,zt,Qt,Ot,Gt,Ht;if(confirm("Are you sure you want to delete this item?")){vt(g),ee(!0);try{if(console.log(`Deleting from ${t} with id: ${g}`),t==="user_profiles"){console.log("Cleaning up foreign key dependencies...");const C=[(D=(f=(c=P)==null?void 0:c.from("jobs"))==null?void 0:f.update({assigned_to:null,created_by:null,delivery_coordinator_id:null}))==null?void 0:D.or(`assigned_to.eq.${g},created_by.eq.${g},delivery_coordinator_id.eq.${g}`)];C==null||C.push((Ae=(se=(q=P)==null?void 0:q.from("transactions"))==null?void 0:se.update({processed_by:null}))==null?void 0:Ae.eq("processed_by",g)),C==null||C.push((Me=(ke=(Te=P)==null?void 0:Te.from("vehicles"))==null?void 0:ke.update({created_by:null}))==null?void 0:Me.eq("created_by",g)),C==null||C.push((Be=(Pe=(Re=P)==null?void 0:Re.from("vendors"))==null?void 0:Pe.update({created_by:null}))==null?void 0:Be.eq("created_by",g)),C==null||C.push((fe=(me=($=P)==null?void 0:$.from("products"))==null?void 0:me.update({created_by:null}))==null?void 0:fe.eq("created_by",g)),C==null||C.push((Le=(xe=(De=P)==null?void 0:De.from("sms_templates"))==null?void 0:xe.update({created_by:null}))==null?void 0:Le.eq("created_by",g)),C==null||C.push((Bt=(Pt=(Rt=P)==null?void 0:Rt.from("filter_presets"))==null?void 0:Pt.delete())==null?void 0:Bt.eq("user_id",g)),C==null||C.push((It=(Lt=(Dt=P)==null?void 0:Dt.from("notification_preferences"))==null?void 0:Lt.delete())==null?void 0:It.eq("user_id",g)),C==null||C.push((qt=($t=(Ut=P)==null?void 0:Ut.from("activity_history"))==null?void 0:$t.delete())==null?void 0:qt.eq("performed_by",g)),C==null||C.push((Qt=(zt=(Vt=P)==null?void 0:Vt.from("communications"))==null?void 0:zt.delete())==null?void 0:Qt.eq("sent_by",g)),await Promise.allSettled(C),console.log("Foreign key cleanup completed")}const{error:ie}=await((Ht=(Gt=(Ot=P)==null?void 0:Ot.from(t))==null?void 0:Gt.delete())==null?void 0:Ht.eq("id",g));if(ie)throw console.error("Delete operation failed:",ie),ie;console.log("Delete operation successful"),t==="user_profiles"?(n==="userAccount"?R(C=>{const O=C==null?void 0:C.filter(J=>(J==null?void 0:J.id)!==g);return console.log(`User accounts updated: ${O==null?void 0:O.length} remaining`),O||[]}):le(C=>{const O=C==null?void 0:C.filter(J=>(J==null?void 0:J.id)!==g);return console.log(`Staff records updated: ${O==null?void 0:O.length} remaining`),O||[]}),setTimeout(async()=>{try{await Promise.all([Ce(),ve()]),console.log("Data reloaded successfully after deletion")}catch(C){console.error("Error refreshing data after deletion:",C)}},500)):t==="vendors"?(F(C=>{const O=C==null?void 0:C.filter(J=>(J==null?void 0:J.id)!==g);return console.log(`Vendors updated: ${O==null?void 0:O.length} remaining`),O||[]}),setTimeout(async()=>{try{await Se(),console.log("Vendors reloaded successfully")}catch(C){console.error("Error refreshing vendors:",C)}},500)):t==="products"?(jt(C=>{const O=C==null?void 0:C.filter(J=>(J==null?void 0:J.id)!==g);return console.log(`Products updated: ${O==null?void 0:O.length} remaining`),O||[]}),setTimeout(async()=>{try{await Ee(),console.log("Products reloaded successfully")}catch(C){console.error("Error refreshing products:",C)}},500)):t==="sms_templates"&&(Ct(C=>{const O=C==null?void 0:C.filter(J=>(J==null?void 0:J.id)!==g);return console.log(`SMS templates updated: ${O==null?void 0:O.length} remaining`),O||[]}),setTimeout(async()=>{try{await lt(),console.log("SMS templates reloaded successfully")}catch(C){console.error("Error refreshing SMS templates:",C)}},500)),console.log(`Successfully deleted item from ${t}`)}catch(ie){console.error("Error deleting item:",ie),alert("Error deleting item: "+((ie==null?void 0:ie.message)||"Unknown error")),setTimeout(async()=>{try{await Et(),console.log("All data reloaded after error")}catch(C){console.error("Error refreshing all data after deletion error:",C)}},1e3)}finally{ee(!1),vt(null)}}},Es=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["User Accounts (",(_==null?void 0:_.length)||0,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-blue-600 appearance-auto",checked:j,onChange:t=>b(t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Only my org"})]}),e.jsxs(Y,{onClick:ps,disabled:!a||ge,className:"bg-emerald-600 hover:bg-emerald-700 text-white flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Assign Org to Accounts"]}),e.jsxs(Y,{onClick:()=>re("userAccount"),className:"bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Add User Account"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_==null?void 0:_.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t==null?void 0:t.full_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t==null?void 0:t.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${(t==null?void 0:t.role)==="admin"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:t==null?void 0:t.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t==null?void 0:t.department}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t!=null&&t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t!=null&&t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>re("userAccount",t),className:"text-blue-600 hover:text-blue-900",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_e("user_profiles",t==null?void 0:t.id,"userAccount"),disabled:Ne===(t==null?void 0:t.id),className:"text-red-600 hover:text-red-900 disabled:opacity-50",children:e.jsx(qe,{className:"w-4 h-4"})})]})})]},t==null?void 0:t.id))})]})}),(_==null?void 0:_.length)===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:'No user accounts found. Click "Add User Account" to create one.'}),G?e.jsx("div",{className:"mt-3 p-3 rounded bg-blue-50 text-blue-700",children:G}):null]}),_s=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Staff Records (",(B==null?void 0:B.length)||0,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-blue-600 appearance-auto",checked:j,onChange:t=>b(t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Only my org"})]}),e.jsxs(Y,{onClick:xs,disabled:!a||ge,className:"bg-emerald-600 hover:bg-emerald-700 text-white flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Assign Org to Staff"]}),e.jsxs(Y,{onClick:()=>re("staff"),className:"bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Add Staff Member"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Department"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:B==null?void 0:B.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t==null?void 0:t.full_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${(t==null?void 0:t.department)==="Sales Consultants"?"bg-green-100 text-green-800":"bg-purple-100 text-purple-800"}`,children:t==null?void 0:t.department})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t==null?void 0:t.phone)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t==null?void 0:t.email)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t!=null&&t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t!=null&&t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>re("staff",t),className:"text-blue-600 hover:text-blue-900",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_e("user_profiles",t==null?void 0:t.id,"staff"),disabled:Ne===(t==null?void 0:t.id),className:"text-red-600 hover:text-red-900 disabled:opacity-50",children:e.jsx(qe,{className:"w-4 h-4"})})]})})]},t==null?void 0:t.id))})]})}),(B==null?void 0:B.length)===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:'No staff records found. Click "Add Staff Member" to create one.'}),T?e.jsx("div",{className:"mt-3 p-3 rounded bg-blue-50 text-blue-700",children:T}):null]}),As=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Vendors (",(H==null?void 0:H.length)||0,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-blue-600 appearance-auto",checked:j,onChange:t=>b(t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Only my org"})]}),e.jsxs(Y,{onClick:ys,disabled:!a||ge,className:"bg-emerald-600 hover:bg-emerald-700 text-white flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Assign Org to Vendors"]}),e.jsxs(Y,{onClick:()=>re("vendor"),className:"bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Add Vendor"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Person"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Specialty"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rating"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:H==null?void 0:H.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t==null?void 0:t.contact_person)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t==null?void 0:t.phone)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t==null?void 0:t.specialty)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t!=null&&t.rating?`${t==null?void 0:t.rating}/5`:"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t!=null&&t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t!=null&&t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>re("vendor",t),className:"text-blue-600 hover:text-blue-900",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_e("vendors",t==null?void 0:t.id),disabled:Ne===(t==null?void 0:t.id),className:"text-red-600 hover:text-red-900 disabled:opacity-50",children:e.jsx(qe,{className:"w-4 h-4"})})]})})]},t==null?void 0:t.id))})]})}),(H==null?void 0:H.length)===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:'No vendors found. Click "Add Vendor" to create one.'}),k?e.jsx("div",{className:"mt-3 p-3 rounded bg-blue-50 text-blue-700",children:k}):null]}),Ts=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Aftermarket Products (",(W==null?void 0:W.length)||0,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 accent-blue-600 appearance-auto",checked:j,onChange:t=>b(t.target.checked)}),e.jsx("span",{className:"text-sm",children:"Only my org"})]}),e.jsxs(Y,{onClick:ws,disabled:!a||ge,className:"bg-emerald-600 hover:bg-emerald-700 text-white flex items-center gap-2 disabled:opacity-50",children:[e.jsx(Ie,{className:"w-4 h-4"}),"Assign Org to Products"]}),e.jsxs(Y,{onClick:()=>re("product"),className:"bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Add Product"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Brand"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Op Code"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W==null?void 0:W.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t==null?void 0:t.brand)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(t==null?void 0:t.category)||"N/A"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-mono bg-gray-100 text-gray-800 rounded",children:(t==null?void 0:t.op_code)||"N/A"})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",(t==null?void 0:t.cost)||"0.00"]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",(t==null?void 0:t.unit_price)||"0.00"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t!=null&&t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t!=null&&t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>re("product",t),className:"text-blue-600 hover:text-blue-900",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_e("products",t==null?void 0:t.id),disabled:Ne===(t==null?void 0:t.id),className:"text-red-600 hover:text-red-900 disabled:opacity-50",children:e.jsx(qe,{className:"w-4 h-4"})})]})})]},t==null?void 0:t.id))})]})}),(W==null?void 0:W.length)===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:'No products found. Click "Add Product" to create one.'}),E?e.jsx("div",{className:"mt-3 p-3 rounded bg-blue-50 text-blue-700",children:E}):null]}),ks=()=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["SMS Templates (",(Z==null?void 0:Z.length)||0,")"]}),e.jsxs(Y,{onClick:()=>re("template"),className:"bg-blue-600 hover:bg-blue-700 text-white flex items-center gap-2",children:[e.jsx(Ue,{className:"w-4 h-4"}),"Add Template"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Message Preview"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Z==null?void 0:Z.map(t=>{var g;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:t==null?void 0:t.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:(g=t==null?void 0:t.template_type)==null?void 0:g.replace("_"," ")})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-500 max-w-xs truncate",children:t==null?void 0:t.message_template}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t!=null&&t.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t!=null&&t.is_active?"Active":"Inactive"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>re("template",t),className:"text-blue-600 hover:text-blue-900",children:e.jsx($e,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_e("sms_templates",t==null?void 0:t.id),disabled:Ne===(t==null?void 0:t.id),className:"text-red-600 hover:text-red-900 disabled:opacity-50",children:e.jsx(qe,{className:"w-4 h-4"})})]})})]},t==null?void 0:t.id)})})]})}),(Z==null?void 0:Z.length)===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:'No SMS templates found. Click "Add Template" to create one.'})]}),Ms=()=>{var g;const t=`${(g=window==null?void 0:window.location)==null?void 0:g.origin}/guest-claims-submission-form`;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"QR Code Generator"}),e.jsx("p",{className:"text-gray-600",children:"Generate QR codes for easy access to your guest claims form and other important links."})]}),e.jsx("div",{children:e.jsx(Rr,{url:t,title:"Guest Claims Submission Form",description:"Generate a QR code for customers to quickly access your guest claims form. Perfect for printing on business cards, flyers, or displaying in your shop.",size:250,showControls:!0})}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-3",children:"How to Use QR Codes:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"📱 For Customers:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Open camera app on smartphone"}),e.jsx("li",{children:"• Point camera at QR code"}),e.jsx("li",{children:"• Tap notification to open claims form"}),e.jsx("li",{children:"• No app download required"})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium mb-2",children:"🖨️ For Your Business:"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"• Download and print QR codes"}),e.jsx("li",{children:"• Add to business cards"}),e.jsx("li",{children:"• Display in waiting areas"}),e.jsx("li",{children:"• Include in email signatures"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-6",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"QR Code Benefits:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"95%"}),e.jsx("div",{className:"text-gray-600",children:"Smartphone QR Support"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"3x"}),e.jsx("div",{className:"text-gray-600",children:"Faster Than Typing URLs"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"100%"}),e.jsx("div",{className:"text-gray-600",children:"Contactless Access"})]})]})]})]})},Rs=()=>{var g;if(!gs)return null;const t=()=>{switch(te){case"userAccount":return z?"Edit User Account":"Add User Account";case"staff":return z?"Edit Staff Member":"Add Staff Member";case"vendor":return z?"Edit Vendor":"Add Vendor";case"product":return z?"Edit Product":"Add Product";case"template":return z?"Edit SMS Template":"Add SMS Template";default:return"Form"}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:t()}),e.jsx("button",{onClick:()=>Oe(!1),className:"text-gray-400 hover:text-gray-600",children:"×"})]}),e.jsxs("form",{onSubmit:bs,className:"space-y-4",children:[te==="userAccount"&&e.jsxs(e.Fragment,{children:[e.jsx(K,{label:"Full Name",value:N==null?void 0:N.full_name,onChange:n=>{var c;return de({...N,full_name:(c=n==null?void 0:n.target)==null?void 0:c.value})},required:!0}),e.jsx(K,{label:"Email",type:"email",value:N==null?void 0:N.email,onChange:n=>{var c;return de({...N,email:(c=n==null?void 0:n.target)==null?void 0:c.value})},required:!0}),!z&&e.jsx(K,{label:"Password",type:"password",value:N==null?void 0:N.password,onChange:n=>{var c;return de({...N,password:(c=n==null?void 0:n.target)==null?void 0:c.value})},required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsx("select",{value:N==null?void 0:N.role,onChange:n=>{var c;return de({...N,role:(c=n==null?void 0:n.target)==null?void 0:c.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:st==null?void 0:st.map(n=>e.jsx("option",{value:n==null?void 0:n.value,children:n==null?void 0:n.label},n==null?void 0:n.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsxs("select",{value:N==null?void 0:N.department,onChange:n=>{var c;return de({...N,department:(c=n==null?void 0:n.target)==null?void 0:c.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),rt==null?void 0:rt.map(n=>e.jsx("option",{value:n==null?void 0:n.value,children:n==null?void 0:n.label},n==null?void 0:n.value))]})]}),e.jsx(K,{label:"Phone",value:N==null?void 0:N.phone,onChange:n=>{var c;return de({...N,phone:(c=n==null?void 0:n.target)==null?void 0:c.value})}})]}),te==="staff"&&e.jsxs(e.Fragment,{children:[e.jsx(K,{label:"Full Name",value:V==null?void 0:V.full_name,onChange:n=>{var c;return je({...V,full_name:(c=n==null?void 0:n.target)==null?void 0:c.value})},required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Department"}),e.jsxs("select",{value:V==null?void 0:V.department,onChange:n=>{var c;return je({...V,department:(c=n==null?void 0:n.target)==null?void 0:c.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:[e.jsx("option",{value:"",children:"Select Department"}),nt==null?void 0:nt.map(n=>e.jsx("option",{value:n==null?void 0:n.value,children:n==null?void 0:n.label},n==null?void 0:n.value))]})]}),e.jsx(K,{label:"Phone",value:V==null?void 0:V.phone,onChange:n=>{var c;return je({...V,phone:(c=n==null?void 0:n.target)==null?void 0:c.value})}}),e.jsx(K,{label:"Email",type:"email",value:V==null?void 0:V.email,onChange:n=>{var c;return je({...V,email:(c=n==null?void 0:n.target)==null?void 0:c.value})}})]}),te==="vendor"&&e.jsxs(e.Fragment,{children:[e.jsx(K,{label:"Vendor Name",value:A==null?void 0:A.name,onChange:n=>{var c;return ue({...A,name:(c=n==null?void 0:n.target)==null?void 0:c.value})},required:!0}),e.jsx(K,{label:"Contact Person",value:A==null?void 0:A.contact_person,onChange:n=>{var c;return ue({...A,contact_person:(c=n==null?void 0:n.target)==null?void 0:c.value})}}),e.jsx(K,{label:"Phone",value:A==null?void 0:A.phone,onChange:n=>{var c;return ue({...A,phone:(c=n==null?void 0:n.target)==null?void 0:c.value})}}),e.jsx(K,{label:"Email",type:"email",value:A==null?void 0:A.email,onChange:n=>{var c;return ue({...A,email:(c=n==null?void 0:n.target)==null?void 0:c.value})}}),e.jsx(K,{label:"Specialty",value:A==null?void 0:A.specialty,onChange:n=>{var c;return ue({...A,specialty:(c=n==null?void 0:n.target)==null?void 0:c.value})}}),e.jsx(K,{label:"Rating (1-5)",type:"number",min:"1",max:"5",step:"0.1",value:A==null?void 0:A.rating,onChange:n=>{var c;return ue({...A,rating:(c=n==null?void 0:n.target)==null?void 0:c.value})}})]}),te==="product"&&e.jsxs(e.Fragment,{children:[e.jsx(K,{label:"Product Name",value:y==null?void 0:y.name,onChange:n=>{var c;return ae({...y,name:(c=n==null?void 0:n.target)==null?void 0:c.value})},required:!0}),e.jsx(K,{label:"Brand",value:y==null?void 0:y.brand,onChange:n=>{var c;return ae({...y,brand:(c=n==null?void 0:n.target)==null?void 0:c.value})}}),e.jsx(K,{label:"Category",value:y==null?void 0:y.category,onChange:n=>{var c;return ae({...y,category:(c=n==null?void 0:n.target)==null?void 0:c.value})}}),e.jsx(K,{label:"Op Code",value:y==null?void 0:y.op_code,onChange:n=>{var c;return ae({...y,op_code:(c=n==null?void 0:n.target)==null?void 0:c.value})},placeholder:"e.g., EN3, EN5"}),e.jsx(K,{label:"Cost",type:"number",step:"0.01",value:y==null?void 0:y.cost,onChange:n=>{var c;return ae({...y,cost:(c=n==null?void 0:n.target)==null?void 0:c.value})},required:!0}),e.jsx(K,{label:"Unit Price",type:"number",step:"0.01",value:y==null?void 0:y.unit_price,onChange:n=>{var c;return ae({...y,unit_price:(c=n==null?void 0:n.target)==null?void 0:c.value})},required:!0}),e.jsx(K,{label:"Part Number",value:y==null?void 0:y.part_number,onChange:n=>{var c;return ae({...y,part_number:(c=n==null?void 0:n.target)==null?void 0:c.value})}}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{value:y==null?void 0:y.description,onChange:n=>{var c;return ae({...y,description:(c=n==null?void 0:n.target)==null?void 0:c.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:"3"})]})]}),te==="template"&&e.jsxs(e.Fragment,{children:[e.jsx(K,{label:"Template Name",value:Q==null?void 0:Q.name,onChange:n=>{var c;return Ge({...Q,name:(c=n==null?void 0:n.target)==null?void 0:c.value})},required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Template Type"}),e.jsx("select",{value:Q==null?void 0:Q.template_type,onChange:n=>{var c;return Ge({...Q,template_type:(c=n==null?void 0:n.target)==null?void 0:c.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:at==null?void 0:at.map(n=>e.jsx("option",{value:n==null?void 0:n.value,children:n==null?void 0:n.label},n==null?void 0:n.value))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Message Template (",((g=Q==null?void 0:Q.message_template)==null?void 0:g.length)||0,"/160)"]}),e.jsx("textarea",{value:Q==null?void 0:Q.message_template,onChange:n=>{var c;return Ge({...Q,message_template:(c=n==null?void 0:n.target)==null?void 0:c.value})},className:"w-full px-3 py-2 border border-gray-300 rounded-md",rows:"4",maxLength:"160",placeholder:"Use {{stock_number}}, {{vehicle_info}}, {{status}} as variables",required:!0})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(Y,{type:"button",onClick:()=>Oe(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200",children:"Cancel"}),e.jsx(Y,{type:"submit",disabled:ge,className:"px-4 py-2 bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50",children:ge?"Saving...":z?"Update":"Create"})]})]})]})})};return d?e.jsx(it,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading admin panel..."})]})})}):x?e.jsx(it,{children:e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{className:"max-w-md w-full bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Wt,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Admin Panel Error"}),e.jsx("p",{className:"text-gray-600 mb-6",children:x}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(Y,{onClick:()=>{var t;return(t=window.location)==null?void 0:t.reload()},className:"w-full bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center gap-2",children:[e.jsx(Us,{className:"w-4 h-4"}),"Refresh Page"]}),e.jsx(Y,{onClick:fs,className:"w-full bg-gray-600 hover:bg-gray-700 text-white",children:"Debug Connection"}),e.jsx(Y,{onClick:()=>window.location.href="/authentication-portal",className:"w-full bg-green-600 hover:bg-green-700 text-white",children:"Go to Login"})]}),(m==null?void 0:m.showDebug)&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-100 rounded-lg text-left text-sm",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Debug Information:"}),e.jsxs("div",{className:"space-y-1 font-mono text-xs",children:[e.jsxs("div",{children:["Auth User: ",((_t=m==null?void 0:m.authUser)==null?void 0:_t.email)||"None"]}),e.jsxs("div",{children:["User ID: ",((At=m==null?void 0:m.authUser)==null?void 0:At.id)||"None"]}),e.jsxs("div",{children:["Profile Found: ",m!=null&&m.userProfile?"Yes":"No"]}),e.jsxs("div",{children:["User Role: ",((Tt=m==null?void 0:m.userProfile)==null?void 0:Tt.role)||"None"]}),e.jsxs("div",{children:["Department: ",((kt=m==null?void 0:m.userProfile)==null?void 0:kt.department)||"None"]}),(m==null?void 0:m.profileLoadError)&&e.jsxs("div",{className:"text-red-600 mt-2",children:["Error: ",(Mt=m==null?void 0:m.profileLoadError)==null?void 0:Mt.message]})]})]})]})})})}):e.jsx(it,{children:e.jsxs("div",{className:"min-h-screen bg-gray-50 pt-20",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Panel"}),e.jsx("p",{className:"text-gray-600",children:"Complete administrative management for Priority Automotive Tracker"}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"System Status"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Auth Status:"}),e.jsx("span",{className:`ml-1 ${s?"text-green-600":"text-orange-600"}`,children:s?"Authenticated":"Demo Mode"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"User Role:"}),e.jsx("span",{className:"ml-1 text-blue-600",children:(r==null?void 0:r.role)||"Admin"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Access Level:"}),e.jsx("span",{className:"ml-1 text-green-600",children:"Full Access"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Database:"}),e.jsx("span",{className:"ml-1 text-green-600",children:"Connected"})]})]})]})]}),e.jsxs("div",{className:"mb-8 p-4 bg-white border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Current Data Status"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"User Accounts:"}),e.jsxs("span",{className:`ml-1 ${(_==null?void 0:_.length)>0?"text-green-600":"text-red-600"}`,children:[(_==null?void 0:_.length)||0," found"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Staff Records:"}),e.jsxs("span",{className:`ml-1 ${(B==null?void 0:B.length)>0?"text-green-600":"text-red-600"}`,children:[(B==null?void 0:B.length)||0," found"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Vendors:"}),e.jsxs("span",{className:`ml-1 ${(H==null?void 0:H.length)>0?"text-green-600":"text-red-600"}`,children:[(H==null?void 0:H.length)||0," found"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Products:"}),e.jsxs("span",{className:`ml-1 ${(W==null?void 0:W.length)>0?"text-green-600":"text-red-600"}`,children:[(W==null?void 0:W.length)||0," found"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"SMS Templates:"}),e.jsxs("span",{className:`ml-1 ${(Z==null?void 0:Z.length)>0?"text-green-600":"text-red-600"}`,children:[(Z==null?void 0:Z.length)||0," found"]})]})]})]}),e.jsx("div",{className:"mb-8",children:e.jsx("nav",{className:"flex space-x-8 border-b border-gray-200",children:tt==null?void 0:tt.map(t=>{const g=t==null?void 0:t.icon;let n=0;return(t==null?void 0:t.id)==="userAccounts"&&(n=(_==null?void 0:_.length)||0),(t==null?void 0:t.id)==="staffRecords"&&(n=(B==null?void 0:B.length)||0),(t==null?void 0:t.id)==="vendors"&&(n=(H==null?void 0:H.length)||0),(t==null?void 0:t.id)==="products"&&(n=(W==null?void 0:W.length)||0),(t==null?void 0:t.id)==="smsTemplates"&&(n=(Z==null?void 0:Z.length)||0),(t==null?void 0:t.id)==="qrCodes"&&(n=null),e.jsxs("button",{onClick:()=>w(t==null?void 0:t.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm ${u===(t==null?void 0:t.id)?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(g,{className:"w-5 h-5"}),t==null?void 0:t.label,n!==null&&e.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${n>0?"bg-green-100 text-green-800":"bg-gray-100 text-gray-500"}`,children:n})]},t==null?void 0:t.id)})})}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[u==="userAccounts"&&Es(),u==="staffRecords"&&_s(),u==="vendors"&&As(),u==="products"&&Ts(),u==="smsTemplates"&&ks(),u==="qrCodes"&&Ms()]})]}),Rs()]})})};export{Vr as default};
//# sourceMappingURL=index-DgCFh2ye.js.map
