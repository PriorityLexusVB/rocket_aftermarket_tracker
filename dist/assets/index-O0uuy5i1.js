import{j as e,C as Ke,T as Oe,U as qe,n as Be,P as Xe,M as Ye,o as Ue,q as Ne,A as Ae,s as O,X as Te,r as ve,t as Je,v as pe,D as es,F as ss,w as rs,x as ls,y as Me,R as ye,z as ds,E as as,G as be,H as Ve,J as He,K as cs,L as ke,N as is,O as xs,Q as ts}from"./index-BmnpmxFD.js";import{R as os,r as N}from"./react-Czq5O75u.js";import{A as We}from"./AppLayout-Cej0Ve1v.js";import{a as hs}from"./router-CZES1Sa0.js";import"./supabase-D02rA7zj.js";import"./Navbar-vn7mReQc.js";const ns=({appointment:s,onClick:y,onUpdateStatus:a,isSelected:u,bulkMode:k,onToggleSelect:j})=>{var r,_,P,G,F,K,V,X,g,Q,ee,R,Y,ae,ce,A,J,ie,xe,te,oe,he,ne,ge,p,se,ue;const w=(r=s==null?void 0:s.statusConfig)==null?void 0:r.icon,T=s==null?void 0:s.isOverdue,h=f=>{var M;return f?(M=new Date(f))==null?void 0:M.toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"Not scheduled"},S=(()=>{if(!(s!=null&&s.promised_date))return null;const f=new Date,fe=new Date(s==null?void 0:s.promised_date)-f,re=Math.floor(fe/(1e3*60*60)),me=Math.floor(re/24);return fe<0?"Overdue":me>0?`${me}d ${re%24}h remaining`:re>0?`${re}h remaining`:"Due soon"})(),U=(f,M)=>{M==null||M.stopPropagation(),a==null||a(s==null?void 0:s.id,f)},L=f=>{k&&j?(f==null||f.stopPropagation(),j()):y()},E=f=>{f==null||f.stopPropagation(),j==null||j()};return e.jsxs("div",{onClick:L,className:`group relative bg-white rounded-2xl shadow-sm border transition-all duration-300 overflow-hidden cursor-pointer hover:shadow-xl hover:border-gray-200 ${T?"border-red-200 bg-red-50/30":"border-gray-100"} ${u?"ring-2 ring-indigo-500 border-indigo-200":""} ${k?"hover:ring-2 hover:ring-indigo-300":""}`,children:[e.jsx("div",{className:`absolute top-0 left-0 w-full h-1 ${u?"bg-gradient-to-r from-indigo-500 to-purple-500":T?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600"}`}),k&&e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsx("div",{onClick:E,className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center cursor-pointer transition-all duration-200 ${u?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300 hover:border-indigo-400"}`,children:u&&e.jsx(Ke,{className:"w-4 h-4"})})}),T&&e.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-2 flex items-center space-x-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"OVERDUE - Immediate Attention Required"})]}),e.jsxs("div",{className:`p-6 ${k?"ml-8":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ${u?"bg-gradient-to-br from-indigo-600 to-indigo-700":T?"bg-gradient-to-br from-red-600 to-red-700":"bg-gradient-to-br from-indigo-600 to-purple-700"}`,children:e.jsx(w,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["#",s==null?void 0:s.job_number]}),e.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${(_=s==null?void 0:s.priorityConfig)==null?void 0:_.bg} ${(P=s==null?void 0:s.priorityConfig)==null?void 0:P.color}`,children:(G=s==null?void 0:s.priority)==null?void 0:G.toUpperCase()}),((s==null?void 0:s.has_active_loaner)||(s==null?void 0:s.customer_needs_loaner))&&e.jsx("span",{className:"px-1.5 py-0.5 rounded-full text-[10px] font-semibold bg-violet-100 text-violet-800 whitespace-nowrap",children:"Loaner"}),(s==null?void 0:s.assigned_to_profile)&&e.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(qe,{className:"w-3 h-3 mr-1"}),(V=(K=(F=s==null?void 0:s.assigned_to_profile)==null?void 0:F.full_name)==null?void 0:K.split(" "))==null?void 0:V[0]]})]}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 leading-tight",children:s==null?void 0:s.title})]})]}),e.jsxs("div",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold ${(X=s==null?void 0:s.statusConfig)==null?void 0:X.bg} ${(g=s==null?void 0:s.statusConfig)==null?void 0:g.text} ${(Q=s==null?void 0:s.statusConfig)==null?void 0:Q.border} border`,children:[e.jsx(w,{className:"w-3 h-3 mr-1.5"}),(ee=s==null?void 0:s.statusConfig)==null?void 0:ee.label]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 font-medium",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Vehicle"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[(R=s==null?void 0:s.vehicles)==null?void 0:R.year," ",(Y=s==null?void 0:s.vehicles)==null?void 0:Y.make," ",(ae=s==null?void 0:s.vehicles)==null?void 0:ae.model]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[((ce=s==null?void 0:s.vehicles)==null?void 0:ce.stock_number)&&e.jsxs("div",{children:["Stock: #",(A=s==null?void 0:s.vehicles)==null?void 0:A.stock_number]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:((ie=(J=s==null?void 0:s.vehicles)==null?void 0:J.color)==null?void 0:ie.toLowerCase())||"#gray"}}),e.jsx("span",{children:(xe=s==null?void 0:s.vehicles)==null?void 0:xe.color}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:(te=s==null?void 0:s.vehicles)==null?void 0:te.license_plate})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 font-medium",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Customer"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:((oe=s==null?void 0:s.vehicles)==null?void 0:oe.owner_name)||"No customer info"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[((he=s==null?void 0:s.vehicles)==null?void 0:he.owner_phone)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xe,{className:"w-3 h-3 mr-2 text-gray-400"}),(ne=s==null?void 0:s.vehicles)==null?void 0:ne.owner_phone]}),((ge=s==null?void 0:s.vehicles)==null?void 0:ge.owner_email)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"w-3 h-3 mr-2 text-gray-400"}),e.jsx("div",{className:"truncate",children:(p=s==null?void 0:s.vehicles)==null?void 0:p.owner_email})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 font-medium",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Vendor"})]}),e.jsx("div",{children:s!=null&&s.vendors?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:(se=s==null?void 0:s.vendors)==null?void 0:se.name}),e.jsx("div",{className:"text-sm text-gray-600",children:(ue=s==null?void 0:s.vendors)==null?void 0:ue.specialty})]}):e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No vendor assigned"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 font-medium",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Schedule"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:h(s==null?void 0:s.scheduled_start_time)}),S&&e.jsx("div",{className:`text-xs font-semibold ${T?"text-red-600":S!=null&&S.includes("remaining")?"text-green-600":"text-orange-600"}`,children:S})]})]})]}),!k&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[(s==null?void 0:s.job_status)==="scheduled"&&e.jsx("button",{onClick:f=>U("in_progress",f),className:"px-3 py-1.5 text-xs font-medium bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors duration-200",children:"Start Work"}),(s==null?void 0:s.job_status)==="in_progress"&&e.jsx("button",{onClick:f=>U("quality_check",f),className:"px-3 py-1.5 text-xs font-medium bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors duration-200",children:"Quality Check"}),(s==null?void 0:s.job_status)==="quality_check"&&e.jsx("button",{onClick:f=>U("completed",f),className:"px-3 py-1.5 text-xs font-medium bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors duration-200",children:"Complete"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 group-hover:text-indigo-600 transition-colors",children:[e.jsx("span",{className:"mr-2",children:"View Details"}),e.jsx(Ae,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform duration-200"})]})]}),k&&e.jsx("div",{className:"pt-4 border-t border-gray-100 text-center",children:e.jsx("div",{className:"text-xs text-gray-500",children:u?"Selected for bulk operation":"Click to select for bulk operation"})})]})]})};function gs(s,y){const a=s.appointment||{},u=y.appointment||{};return a.id===u.id&&a.job_status===u.job_status&&a.promised_date===u.promised_date&&a.scheduled_start_time===u.scheduled_start_time&&a.scheduled_end_time===u.scheduled_end_time&&s.isSelected===y.isSelected&&s.bulkMode===y.bulkMode}const us=os.memo(ns,gs),fs=({appointment:s,onClose:y,onUpdate:a})=>{var ae,ce,A,J,ie,xe,te,oe,he,ne,ge,p,se,ue,f,M,fe,re,me,we,Se,$e,De,Ee,Pe,ze,b,l,c,i,x,n;const[u,k]=N.useState([]),[j,w]=N.useState([]),[T,h]=N.useState(!0),[$,S]=N.useState(!1),[U,L]=N.useState((s==null?void 0:s.calendar_notes)||""),[E,r]=N.useState(""),[_,P]=N.useState(!1),G=(ae=s==null?void 0:s.statusConfig)==null?void 0:ae.icon,F=s==null?void 0:s.isOverdue;N.useEffect(()=>{K()},[s==null?void 0:s.id]);const K=async()=>{var d,t,m,o,C,W,H;if(s!=null&&s.id)try{h(!0);const{data:q,error:Z}=await((o=(m=(t=(d=O)==null?void 0:d.from("communications"))==null?void 0:t.select(`
          *,
          sent_by_profile:user_profiles!sent_by (full_name, email)
        `))==null?void 0:m.eq("job_id",s==null?void 0:s.id))==null?void 0:o.order("sent_at",{ascending:!1}));if(Z)throw Z;k(q||[]);const{data:v,error:z}=await((H=(W=(C=O)==null?void 0:C.from("job_parts"))==null?void 0:W.select(`
          *,
          products (name, estimated_cost, vendor_id)
        `))==null?void 0:H.eq("job_id",s==null?void 0:s.id));if(z)throw z;w(v||[])}catch(q){console.error("Error loading appointment details:",q)}finally{h(!1)}},V=async()=>{var d,t,m,o;try{const{error:C}=await((o=(m=(d=O)==null?void 0:d.from("jobs"))==null?void 0:m.update({calendar_notes:U,updated_at:(t=new Date)==null?void 0:t.toISOString()}))==null?void 0:o.eq("id",s==null?void 0:s.id));if(C)throw C;S(!1),a==null||a()}catch(C){console.error("Error saving notes:",C)}},X=async()=>{var d,t,m;if(E!=null&&E.trim())try{P(!0);const{error:o}=await((m=(d=O)==null?void 0:d.from("communications"))==null?void 0:m.insert({job_id:s==null?void 0:s.id,vehicle_id:s==null?void 0:s.vehicle_id,communication_type:"note",message:E==null?void 0:E.trim(),sent_at:(t=new Date)==null?void 0:t.toISOString(),is_successful:!0}));if(o)throw o;r(""),K()}catch(o){console.error("Error sending message:",o)}finally{P(!1)}},g=d=>{var t;return d?(t=new Date(d))==null?void 0:t.toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}):"Not scheduled"},Q=d=>{var t;return d?(t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}))==null?void 0:t.format(d):"$0.00"},R=(()=>{if(!(s!=null&&s.promised_date))return null;const d=new Date,m=new Date(s==null?void 0:s.promised_date)-d,o=Math.floor(m/(1e3*60*60)),C=Math.floor(o/24);return m<0?{text:"Overdue",urgent:!0}:C>0?{text:`${C}d ${o%24}h remaining`,urgent:!1}:o>0?{text:`${o}h remaining`,urgent:o<=2}:{text:"Due very soon",urgent:!0}})(),Y=j==null?void 0:j.reduce((d,t)=>{var m;return d+(parseFloat((m=t==null?void 0:t.products)==null?void 0:m.estimated_cost)||0)},0);return e.jsxs("div",{className:"h-full flex flex-col bg-white/95 backdrop-blur-xl",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Appointment Details"}),e.jsx("button",{onClick:y,className:"w-10 h-10 rounded-xl bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-all duration-200",children:e.jsx(Te,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${F?"bg-gradient-to-r from-red-50 to-red-100 border-red-200":"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ${F?"bg-gradient-to-br from-red-600 to-red-700":"bg-gradient-to-br from-indigo-600 to-purple-700"}`,children:e.jsx(G,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["#",s==null?void 0:s.job_number]}),e.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${(ce=s==null?void 0:s.priorityConfig)==null?void 0:ce.bg} ${(A=s==null?void 0:s.priorityConfig)==null?void 0:A.color}`,children:(J=s==null?void 0:s.priority)==null?void 0:J.toUpperCase()})]}),e.jsx("h4",{className:"text-base font-semibold text-gray-900",children:s==null?void 0:s.title})]})]}),e.jsxs("div",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-semibold ${(ie=s==null?void 0:s.statusConfig)==null?void 0:ie.bg} ${(xe=s==null?void 0:s.statusConfig)==null?void 0:xe.text} ${(te=s==null?void 0:s.statusConfig)==null?void 0:te.border} border`,children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),(oe=s==null?void 0:s.statusConfig)==null?void 0:oe.label]})]}),R&&e.jsxs("div",{className:`flex items-center space-x-2 px-4 py-2 rounded-xl ${R!=null&&R.urgent?"bg-red-100 text-red-800 border border-red-200":"bg-green-100 text-green-800 border border-green-200"}`,children:[R!=null&&R.urgent?e.jsx(Oe,{className:"w-4 h-4"}):e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:R==null?void 0:R.text})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Be,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Vehicle Information"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Vehicle:"}),e.jsxs("div",{className:"text-gray-900 font-semibold",children:[(he=s==null?void 0:s.vehicles)==null?void 0:he.year," ",(ne=s==null?void 0:s.vehicles)==null?void 0:ne.make," ",(ge=s==null?void 0:s.vehicles)==null?void 0:ge.model]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Stock #:"}),e.jsx("div",{className:"text-gray-900",children:((p=s==null?void 0:s.vehicles)==null?void 0:p.stock_number)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Color:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:((ue=(se=s==null?void 0:s.vehicles)==null?void 0:se.color)==null?void 0:ue.toLowerCase())||"#gray"}}),e.jsx("span",{className:"text-gray-900",children:(f=s==null?void 0:s.vehicles)==null?void 0:f.color})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"License:"}),e.jsx("div",{className:"text-gray-900",children:((M=s==null?void 0:s.vehicles)==null?void 0:M.license_plate)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(qe,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Customer Information"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Name:"}),e.jsx("div",{className:"text-gray-900 font-semibold",children:((fe=s==null?void 0:s.vehicles)==null?void 0:fe.owner_name)||"No customer info"})]}),((re=s==null?void 0:s.vehicles)==null?void 0:re.owner_phone)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Phone:"}),e.jsx("div",{className:"text-gray-900",children:(me=s==null?void 0:s.vehicles)==null?void 0:me.owner_phone})]}),e.jsx("a",{href:`tel:${(we=s==null?void 0:s.vehicles)==null?void 0:we.owner_phone}`,className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Call"})]}),((Se=s==null?void 0:s.vehicles)==null?void 0:Se.owner_email)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Email:"}),e.jsx("div",{className:"text-gray-900 truncate",children:($e=s==null?void 0:s.vehicles)==null?void 0:$e.owner_email})]}),e.jsx("a",{href:`mailto:${(De=s==null?void 0:s.vehicles)==null?void 0:De.owner_email}`,className:"text-indigo-600 hover:text-indigo-700 font-medium ml-2",children:"Email"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Je,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Schedule Information"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Scheduled Start:"}),e.jsx("div",{className:"text-gray-900",children:g(s==null?void 0:s.scheduled_start_time)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Scheduled End:"}),e.jsx("div",{className:"text-gray-900",children:g(s==null?void 0:s.scheduled_end_time)})]})]}),(s==null?void 0:s.promised_date)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Promised Completion:"}),e.jsx("div",{className:"text-gray-900",children:g(s==null?void 0:s.promised_date)})]}),(s==null?void 0:s.location)&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(pe,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Location:"}),e.jsx("div",{className:"text-gray-900",children:s==null?void 0:s.location})]})]})]})]}),(s==null?void 0:s.vendors)&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ue,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Vendor Information"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Vendor:"}),e.jsx("div",{className:"text-gray-900 font-semibold",children:(Ee=s==null?void 0:s.vendors)==null?void 0:Ee.name})]}),((Pe=s==null?void 0:s.vendors)==null?void 0:Pe.specialty)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Specialty:"}),e.jsx("div",{className:"text-gray-900",children:(ze=s==null?void 0:s.vendors)==null?void 0:ze.specialty})]}),((b=s==null?void 0:s.vendors)==null?void 0:b.contact_person)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Contact:"}),e.jsx("div",{className:"text-gray-900",children:(l=s==null?void 0:s.vendors)==null?void 0:l.contact_person})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[((c=s==null?void 0:s.vendors)==null?void 0:c.phone)&&e.jsx("a",{href:`tel:${(i=s==null?void 0:s.vendors)==null?void 0:i.phone}`,className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Call Vendor"}),((x=s==null?void 0:s.vendors)==null?void 0:x.email)&&e.jsx("a",{href:`mailto:${(n=s==null?void 0:s.vendors)==null?void 0:n.email}`,className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Email Vendor"})]})]})]})]}),((s==null?void 0:s.estimated_cost)||Y>0||(s==null?void 0:s.actual_cost))&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(es,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Cost Information"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(s==null?void 0:s.estimated_cost)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Estimated Labor:"}),e.jsx("div",{className:"text-gray-900 font-semibold",children:Q(s==null?void 0:s.estimated_cost)})]}),Y>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Estimated Parts:"}),e.jsx("div",{className:"text-gray-900 font-semibold",children:Q(Y)})]}),(s==null?void 0:s.actual_cost)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Actual Cost:"}),e.jsx("div",{className:"text-gray-900 font-semibold",children:Q(s==null?void 0:s.actual_cost)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Notes"})]}),e.jsx("button",{onClick:()=>$?V():S(!0),className:"text-indigo-600 hover:text-indigo-700 font-medium text-sm flex items-center space-x-1",children:$?e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit"})]})})]}),$?e.jsx("textarea",{value:U,onChange:d=>{var t;return L((t=d==null?void 0:d.target)==null?void 0:t.value)},placeholder:"Add appointment notes...",className:"w-full h-32 p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none text-sm"}):e.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:(s==null?void 0:s.calendar_notes)||U||"No notes available"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Me,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Communications"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("textarea",{value:E,onChange:d=>{var t;return r((t=d==null?void 0:d.target)==null?void 0:t.value)},placeholder:"Add a communication note...",className:"flex-1 p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none text-sm",rows:"2"}),e.jsxs("button",{onClick:X,disabled:!(E!=null&&E.trim())||_,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 text-sm font-medium",children:[_?e.jsx(ye,{className:"w-4 h-4 animate-spin"}):e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Note"})]})]})}),T?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ye,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading communications..."})]}):(u==null?void 0:u.length)>0?e.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:u==null?void 0:u.map((d,t)=>{var m,o;return e.jsx("div",{className:"flex space-x-3 p-3 bg-gray-50 rounded-xl",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:((m=d==null?void 0:d.sent_by_profile)==null?void 0:m.full_name)||"System"}),e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs rounded-full ${(d==null?void 0:d.communication_type)==="sms"?"bg-blue-100 text-blue-800":(d==null?void 0:d.communication_type)==="email"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:d==null?void 0:d.communication_type}),e.jsx("span",{className:"text-xs text-gray-500",children:(o=new Date(d==null?void 0:d.sent_at))==null?void 0:o.toLocaleString()})]}),e.jsx("p",{className:"text-sm text-gray-700",children:d==null?void 0:d.message})]})},(d==null?void 0:d.id)||t)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Me,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No communications yet"})]})]})]})]})},ms=({statusFilter:s,setStatusFilter:y,vendorFilter:a,setVendorFilter:u,priorityFilter:k,setPriorityFilter:j,vendors:w})=>{var T;return e.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-xl border border-gray-200/50 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ds,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Filter Appointments"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:s,onChange:h=>{var $;return y(($=h==null?void 0:h.target)==null?void 0:$.value)},className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 appearance-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"quality_check",children:"Quality Check"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"overdue",children:"Overdue Items"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Vendor"})]}),e.jsxs("select",{value:a,onChange:h=>{var $;return u(($=h==null?void 0:h.target)==null?void 0:$.value)},className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 appearance-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"All Vendors"}),w==null?void 0:w.map(h=>e.jsx("option",{value:h==null?void 0:h.id,children:h==null?void 0:h.name},h==null?void 0:h.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx("span",{children:"Priority"})]}),e.jsxs("select",{value:k,onChange:h=>{var $;return j(($=h==null?void 0:h.target)==null?void 0:$.value)},className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 appearance-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"urgent",children:"ðŸ”´ Urgent"}),e.jsx("option",{value:"high",children:"ðŸŸ  High"}),e.jsx("option",{value:"medium",children:"ðŸŸ¡ Medium"}),e.jsx("option",{value:"low",children:"ðŸŸ¢ Low"})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 mt-4",children:(s!=="all"||a!=="all"||k!=="all")&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active filters:"}),s!=="all"&&e.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:[e.jsxs("span",{children:["Status: ",s==null?void 0:s.replace("_"," ")]}),e.jsx("button",{onClick:()=>y("all"),className:"ml-2 text-blue-600 hover:text-blue-800",children:"Ã—"})]}),a!=="all"&&e.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:[e.jsxs("span",{children:["Vendor: ",(T=w==null?void 0:w.find(h=>(h==null?void 0:h.id)===a))==null?void 0:T.name]}),e.jsx("button",{onClick:()=>u("all"),className:"ml-2 text-green-600 hover:text-green-800",children:"Ã—"})]}),k!=="all"&&e.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:[e.jsxs("span",{children:["Priority: ",k]}),e.jsx("button",{onClick:()=>j("all"),className:"ml-2 text-purple-600 hover:text-purple-800",children:"Ã—"})]}),e.jsx("button",{onClick:()=>{y("all"),u("all"),j("all")},className:"text-sm text-gray-600 hover:text-gray-800 font-medium",children:"Clear all"})]})})]})},vs=({selectedCount:s,onStatusUpdate:y,onAssign:a,onCancel:u})=>e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-2xl border-b border-indigo-500/20",children:e.jsxs("div",{className:"px-8 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(be,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:[s," appointment",s!==1?"s":""," selected"]})]}),e.jsx("div",{className:"h-6 w-px bg-white/20"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Bulk Actions:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>y("in_progress"),className:"flex items-center space-x-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200 text-sm font-medium",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:"Start"})]}),e.jsxs("button",{onClick:()=>y("quality_check"),className:"flex items-center space-x-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200 text-sm font-medium",children:[e.jsx(be,{className:"w-4 h-4"}),e.jsx("span",{children:"QC"})]}),e.jsxs("button",{onClick:()=>y("scheduled"),className:"flex items-center space-x-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200 text-sm font-medium",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Schedule"})]})]}),e.jsx("div",{className:"h-4 w-px bg-white/20"}),e.jsxs("button",{onClick:a,className:"flex items-center space-x-2 px-4 py-1.5 bg-green-500/80 hover:bg-green-500 rounded-lg transition-all duration-200 text-sm font-medium",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Assign Staff"})]}),e.jsxs("button",{onClick:()=>y("cancelled"),className:"flex items-center space-x-1 px-3 py-1.5 bg-red-500/20 hover:bg-red-500/40 rounded-lg transition-all duration-200 text-sm font-medium border border-red-400/30",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsx("span",{children:"Cancel"})]})]})]}),e.jsxs("button",{onClick:u,className:"flex items-center space-x-2 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Exit Bulk Mode"})]})]}),e.jsx("div",{className:"mt-3 text-xs text-white/60",children:"ðŸ’¡ Select appointments by clicking on them, then choose a bulk action above"})]})}),js=({metrics:s,onClose:y})=>{const a=j=>j<1?`${Math.round(j*60)} min`:`${j==null?void 0:j.toFixed(1)}h`,u=j=>j>=80?"text-green-600":j>=60?"text-yellow-600":"text-red-600",k=j=>j>=80?"bg-green-50 border-green-200":j>=60?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200";return e.jsxs("div",{className:"bg-white/95 backdrop-blur-xl shadow-2xl border border-gray-200/50 mx-8 mb-6 rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center",children:e.jsx(He,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Workflow Performance"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Real-time efficiency metrics"})]})]}),e.jsx("button",{onClick:y,className:"w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors duration-200",children:e.jsx(Te,{className:"w-4 h-4 text-gray-600"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:`rounded-2xl border-2 p-4 ${k((s==null?void 0:s.todayCompletionRate)||0)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Ne,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{className:`text-xs font-semibold ${u((s==null?void 0:s.todayCompletionRate)||0)}`,children:[Math.round((s==null?void 0:s.todayCompletionRate)||0),"%"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Today"}),e.jsxs("div",{className:"text-xs text-gray-600",children:[(s==null?void 0:s.todayCompleted)||0," of ",(s==null?void 0:s.todayTotal)||0," completed"]})]})]}),e.jsxs("div",{className:`rounded-2xl border-2 p-4 ${k((s==null?void 0:s.weekCompletionRate)||0)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(cs,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{className:`text-xs font-semibold ${u((s==null?void 0:s.weekCompletionRate)||0)}`,children:[Math.round((s==null?void 0:s.weekCompletionRate)||0),"%"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"This Week"}),e.jsxs("div",{className:"text-xs text-gray-600",children:[(s==null?void 0:s.weekCompleted)||0," of ",(s==null?void 0:s.weekTotal)||0," completed"]})]})]}),e.jsxs("div",{className:"rounded-2xl border-2 p-4 bg-blue-50 border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ve,{className:"w-5 h-5 text-blue-600"}),e.jsx("div",{className:"text-xs font-semibold text-blue-600",children:a((s==null?void 0:s.avgCompletionTime)||0)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Avg Time"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Per job completion"})]})]}),e.jsxs("div",{className:"rounded-2xl border-2 p-4 bg-purple-50 border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(be,{className:"w-5 h-5 text-purple-600"}),e.jsx("div",{className:"text-xs font-semibold text-purple-600",children:s!=null&&s.weekCompletionRate?(s==null?void 0:s.weekCompletionRate)>75?"Excellent":(s==null?void 0:s.weekCompletionRate)>60?"Good":"Needs Improvement":"No Data"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Efficiency"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Overall rating"})]})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200/50",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Quick Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${((s==null?void 0:s.weekCompletionRate)||0)>((s==null?void 0:s.todayCompletionRate)||0)?"bg-green-500":"bg-red-500"}`}),e.jsx("div",{className:"text-xs text-gray-700",children:((s==null?void 0:s.weekCompletionRate)||0)>((s==null?void 0:s.todayCompletionRate)||0)?"Weekly performance is above today's rate":"Today is performing better than weekly average"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${((s==null?void 0:s.avgCompletionTime)||0)<24?"bg-green-500":"bg-yellow-500"}`}),e.jsx("div",{className:"text-xs text-gray-700",children:((s==null?void 0:s.avgCompletionTime)||0)<24?"Jobs are completing within 24 hours":"Jobs taking longer than 24 hours on average"})]})]})]})]})]})},Ns=({unassignedJobs:s,staffMembers:y,selectedAppointments:a,onQuickAssign:u,onBulkAssign:k,onClose:j})=>{var E;const[w,T]=N.useState(""),[h,$]=N.useState((a==null?void 0:a.size)>0?"bulk":"individual"),S=()=>{!w||(a==null?void 0:a.size)===0||(k(w),T(""))},U=r=>{w&&u(r,w)},L=r=>{var _;return r?(_=new Date(r))==null?void 0:_.toLocaleDateString():"Not scheduled"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-200 w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-600 to-indigo-600 flex items-center justify-center shadow-lg",children:e.jsx(ke,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Assignment Center"}),e.jsx("p",{className:"text-sm text-gray-600",children:(a==null?void 0:a.size)>0?`Manage ${a==null?void 0:a.size} selected appointment${(a==null?void 0:a.size)!==1?"s":""} and ${s==null?void 0:s.length} unassigned job${(s==null?void 0:s.length)!==1?"s":""}`:`Assign ${s==null?void 0:s.length} unassigned job${(s==null?void 0:s.length)!==1?"s":""}`})]})]}),e.jsx("button",{onClick:j,className:"w-10 h-10 rounded-xl bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-all duration-200",children:e.jsx(Te,{className:"w-5 h-5 text-gray-600"})})]})}),e.jsxs("div",{className:"p-8",children:[(a==null?void 0:a.size)>0&&e.jsxs("div",{className:"flex items-center space-x-4 mb-6 p-4 bg-indigo-50 rounded-2xl border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"bulk",name:"assignmentMode",value:"bulk",checked:h==="bulk",onChange:r=>{var _;return $((_=r==null?void 0:r.target)==null?void 0:_.value)},className:"text-indigo-600 focus:ring-indigo-500"}),e.jsxs("label",{htmlFor:"bulk",className:"text-sm font-medium text-gray-900",children:["Bulk assign ",a==null?void 0:a.size," selected appointment",(a==null?void 0:a.size)!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"individual",name:"assignmentMode",value:"individual",checked:h==="individual",onChange:r=>{var _;return $((_=r==null?void 0:r.target)==null?void 0:_.value)},className:"text-indigo-600 focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"individual",className:"text-sm font-medium text-gray-900",children:"Individual assignments"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-0",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{children:"Select Staff Member"})]}),e.jsx("div",{className:"space-y-3",children:y==null?void 0:y.map(r=>{var _,P;return e.jsx("div",{onClick:()=>T(r==null?void 0:r.id),className:`p-4 rounded-2xl border-2 cursor-pointer transition-all duration-200 ${w===(r==null?void 0:r.id)?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-indigo-300 hover:bg-indigo-50/50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-white ${w===(r==null?void 0:r.id)?"bg-indigo-600":"bg-gray-400"}`,children:(P=(_=r==null?void 0:r.full_name)==null?void 0:_.charAt(0))==null?void 0:P.toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:r==null?void 0:r.full_name}),e.jsxs("div",{className:"text-sm text-gray-600",children:[r==null?void 0:r.role," â€¢ ",r==null?void 0:r.department]})]}),w===(r==null?void 0:r.id)&&e.jsx(be,{className:"w-5 h-5 text-indigo-600"})]})},r==null?void 0:r.id)})}),h==="bulk"&&(a==null?void 0:a.size)>0&&e.jsxs("button",{onClick:S,disabled:!w,className:"w-full mt-6 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 rounded-2xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(ke,{className:"w-5 h-5"}),e.jsxs("span",{children:["Assign ",a==null?void 0:a.size," Appointment",(a==null?void 0:a.size)!==1?"s":""]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(ve,{className:"w-5 h-5"}),e.jsxs("span",{children:["Unassigned Jobs (",s==null?void 0:s.length,")"]})]}),h==="individual"&&e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:(s==null?void 0:s.length)>0?s==null?void 0:s.map(r=>{var _,P,G,F,K,V,X,g;return e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl p-4 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",r==null?void 0:r.job_number]}),e.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${(r==null?void 0:r.priority)==="urgent"?"bg-red-100 text-red-700":(r==null?void 0:r.priority)==="high"?"bg-orange-100 text-orange-700":(r==null?void 0:r.priority)==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:(_=r==null?void 0:r.priority)==null?void 0:_.toUpperCase()})]}),e.jsx("h5",{className:"font-medium text-gray-900 mb-1",children:r==null?void 0:r.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsxs("span",{children:[(P=r==null?void 0:r.vehicles)==null?void 0:P.year," ",(G=r==null?void 0:r.vehicles)==null?void 0:G.make," ",(F=r==null?void 0:r.vehicles)==null?void 0:F.model]})]}),((K=r==null?void 0:r.vehicles)==null?void 0:K.stock_number)&&e.jsxs("span",{children:["Stock: #",(V=r==null?void 0:r.vehicles)==null?void 0:V.stock_number]})]}),((X=r==null?void 0:r.vehicles)==null?void 0:X.owner_name)&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Customer: ",(g=r==null?void 0:r.vehicles)==null?void 0:g.owner_name]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Created: ",L(r==null?void 0:r.created_at)]})]}),e.jsxs("button",{onClick:()=>U(r==null?void 0:r.id),disabled:!w,className:"ml-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-xl text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:from-green-700 hover:to-emerald-700 transition-all duration-200 flex items-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Assign"})]})]})},r==null?void 0:r.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ve,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"No unassigned jobs at the moment"})]})}),h==="bulk"&&e.jsx("div",{className:"bg-indigo-50 rounded-2xl p-6 border border-indigo-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{className:"w-12 h-12 mx-auto mb-3 text-indigo-600"}),e.jsx("h5",{className:"font-semibold text-gray-900 mb-2",children:"Bulk Assignment Mode"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Select a staff member on the left to assign all ",a==null?void 0:a.size," selected appointment",(a==null?void 0:a.size)!==1?"s":""," at once."]}),w&&e.jsxs("div",{className:"text-sm text-indigo-700",children:["Ready to assign to: ",e.jsx("strong",{children:(E=y==null?void 0:y.find(r=>(r==null?void 0:r.id)===w))==null?void 0:E.full_name})]})]})})]})]})]})]})})},Ss=()=>{const[s,y]=N.useState([]),[a,u]=N.useState([]),[k,j]=N.useState(!0),[w,T]=N.useState(null),[h,$]=N.useState(!1),[S,U]=N.useState(""),[L,E]=N.useState("active"),[r,_]=N.useState("all"),[P,G]=N.useState("all"),[F,K]=N.useState([]),[V,X]=N.useState(!1),[g,Q]=N.useState(new Set),[ee,R]=N.useState(!1),[Y,ae]=N.useState(!1),[ce,A]=N.useState(!1),[J,ie]=N.useState([]),[xe,te]=N.useState([]),[oe,he]=N.useState({}),ne=hs();N.useEffect(()=>{var c,i,x;f(),ue(),ge(),p(),se();const l=(x=(i=(c=O)==null?void 0:c.channel("job_updates"))==null?void 0:i.on("postgres_changes",{event:"*",schema:"public",table:"jobs"},()=>{f(),p(),se()}))==null?void 0:x.subscribe();return()=>{l==null||l.unsubscribe()}},[]),N.useEffect(()=>{M()},[S,L,r,P,a]);const ge=async()=>{var l,c,i,x;try{const{data:n,error:d}=await((x=(i=(c=(l=O)==null?void 0:l.from("user_profiles"))==null?void 0:c.select("id, full_name, email, role, department"))==null?void 0:i.eq("is_active",!0))==null?void 0:x.order("full_name"));if(d)throw d;te(n||[])}catch(n){console.error("Error loading staff members:",n)}},p=async()=>{var l,c,i,x,n,d;try{const{data:t,error:m}=await((d=(n=(x=(i=(c=(l=O)==null?void 0:l.from("jobs"))==null?void 0:c.select(`
          *,
          vehicles (
            id, stock_number, year, make, model, owner_name
          ),
          vendors (
            id, name
          )
        `))==null?void 0:i.is("assigned_to",null))==null?void 0:x.eq("job_status","pending"))==null?void 0:n.order("created_at",{ascending:!1}))==null?void 0:d.limit(10));if(m)throw m;ie(t||[])}catch(t){console.error("Error loading unassigned jobs:",t)}},se=async()=>{var l,c,i,x,n,d,t,m,o,C,W,H,q,Z;try{const v=(i=(c=(l=new Date)==null?void 0:l.toISOString())==null?void 0:c.split("T"))==null?void 0:i[0],{data:z,error:le}=await((t=(d=(n=(x=O)==null?void 0:x.from("jobs"))==null?void 0:n.select("job_status, created_at, completed_at"))==null?void 0:d.gte("created_at",`${v}T00:00:00Z`))==null?void 0:t.lte("created_at",`${v}T23:59:59Z`));if(le)throw le;const I=new Date;I==null||I.setDate((I==null?void 0:I.getDate())-(I==null?void 0:I.getDay()));const Re=(o=(m=I==null?void 0:I.toISOString())==null?void 0:m.split("T"))==null?void 0:o[0],{data:B,error:_e}=await((H=(W=(C=O)==null?void 0:C.from("jobs"))==null?void 0:W.select("job_status, created_at, completed_at"))==null?void 0:H.gte("created_at",`${Re}T00:00:00Z`));if(_e)throw _e;const Ce=((q=z==null?void 0:z.filter(D=>(D==null?void 0:D.job_status)==="completed"))==null?void 0:q.length)||0,Ie=(z==null?void 0:z.length)||0,Qe=((Z=B==null?void 0:B.filter(D=>(D==null?void 0:D.job_status)==="completed"))==null?void 0:Z.length)||0,Le=(B==null?void 0:B.length)||0,de=B==null?void 0:B.filter(D=>(D==null?void 0:D.job_status)==="completed"&&(D==null?void 0:D.completed_at)&&(D==null?void 0:D.created_at)),Ze=(de==null?void 0:de.length)>0?(de==null?void 0:de.reduce((D,je)=>{const Ge=new Date(je==null?void 0:je.created_at),Fe=new Date(je==null?void 0:je.completed_at);return D+(Fe-Ge)/(1e3*60*60)},0))/(de==null?void 0:de.length):0;he({todayCompleted:Ce,todayTotal:Ie,todayCompletionRate:Ie>0?Ce/Ie*100:0,weekCompleted:Qe,weekTotal:Le,weekCompletionRate:Le>0?Qe/Le*100:0,avgCompletionTime:(Math==null?void 0:Math.round(Ze*100))/100})}catch(v){console.error("Error loading performance metrics:",v)}},ue=async()=>{var l,c,i,x;try{const{data:n,error:d}=await((x=(i=(c=(l=O)==null?void 0:l.from("vendors"))==null?void 0:c.select("id, name"))==null?void 0:i.eq("is_active",!0))==null?void 0:x.order("name"));if(d)throw d;K(n||[])}catch(n){console.error("Error loading vendors:",n)}},f=async()=>{var l,c,i,x,n,d,t,m,o;try{j(!0);const{data:C,error:W}=await((x=(i=(c=(l=O)==null?void 0:l.from("jobs"))==null?void 0:c.select(`
          *,
          vehicles (
            id, stock_number, year, make, model, color, owner_name, 
            owner_phone, owner_email, license_plate
          ),
          vendors (
            id, name, phone, email, specialty, contact_person
          ),
          assigned_to_profile:user_profiles!assigned_to (
            id, full_name, email, phone
          ),
          created_by_profile:user_profiles!created_by (
            id, full_name, email
          )
        `))==null?void 0:i.in("job_status",["pending","in_progress","scheduled","quality_check"]))==null?void 0:x.order("scheduled_start_time",{ascending:!0}));if(W)throw W;const H=(C||[]).map(v=>v==null?void 0:v.id).filter(Boolean);let q=[];if(H.length){const{data:v}=await((m=(t=(d=(n=O)==null?void 0:n.from("loaner_assignments"))==null?void 0:d.select("job_id, id"))==null?void 0:t.in("job_id",H))==null?void 0:m.is("returned_at",null));q=v||[]}const Z=(o=C||[])==null?void 0:o.map(v=>{var z;return{...v,has_active_loaner:!!((z=q.find(le=>(le==null?void 0:le.job_id)===(v==null?void 0:v.id)))!=null&&z.id),isOverdue:(v==null?void 0:v.promised_date)&&new Date(v==null?void 0:v.promised_date)<new Date,statusConfig:fe(v==null?void 0:v.job_status),priorityConfig:re(v==null?void 0:v.priority)}});u(Z),y(Z)}catch(C){console.error("Error loading appointments:",C)}finally{j(!1)}},M=()=>{var c;let l=[...a];if(L==="active"?l=l==null?void 0:l.filter(i=>["in_progress","scheduled"].includes(i==null?void 0:i.job_status)):L==="overdue"?l=l==null?void 0:l.filter(i=>i==null?void 0:i.isOverdue):L!=="all"&&(l=l==null?void 0:l.filter(i=>(i==null?void 0:i.job_status)===L)),r!=="all"&&(l=l==null?void 0:l.filter(i=>(i==null?void 0:i.vendor_id)===r)),P!=="all"&&(l=l==null?void 0:l.filter(i=>(i==null?void 0:i.priority)===P)),S!=null&&S.trim()){const i=(c=S==null?void 0:S.toLowerCase())==null?void 0:c.trim();l=l==null?void 0:l.filter(x=>{var n,d,t,m,o,C,W,H,q,Z,v,z,le,I,Re,B,_e,Ce;return((d=(n=x==null?void 0:x.job_number)==null?void 0:n.toLowerCase())==null?void 0:d.includes(i))||((m=(t=x==null?void 0:x.title)==null?void 0:t.toLowerCase())==null?void 0:m.includes(i))||((W=(C=(o=x==null?void 0:x.vehicles)==null?void 0:o.stock_number)==null?void 0:C.toLowerCase())==null?void 0:W.includes(i))||((Z=(q=(H=x==null?void 0:x.vehicles)==null?void 0:H.owner_name)==null?void 0:q.toLowerCase())==null?void 0:Z.includes(i))||((le=(z=(v=x==null?void 0:x.vendors)==null?void 0:v.name)==null?void 0:z.toLowerCase())==null?void 0:le.includes(i))||((Ce=(_e=`${(I=x==null?void 0:x.vehicles)==null?void 0:I.year} ${(Re=x==null?void 0:x.vehicles)==null?void 0:Re.make} ${(B=x==null?void 0:x.vehicles)==null?void 0:B.model}`)==null?void 0:_e.toLowerCase())==null?void 0:Ce.includes(i))})}y(l)},fe=l=>{const c={scheduled:{color:"from-blue-500 to-blue-600",bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200",icon:Ne,label:"Scheduled"},in_progress:{color:"from-orange-500 to-orange-600",bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200",icon:ye,label:"In Progress"},quality_check:{color:"from-green-500 to-green-600",bg:"bg-green-50",text:"text-green-700",border:"border-green-200",icon:be,label:"Quality Check"},pending:{color:"from-gray-500 to-gray-600",bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200",icon:ve,label:"Pending"}};return(c==null?void 0:c[l])||(c==null?void 0:c.pending)},re=l=>{const c={urgent:{color:"text-red-600",bg:"bg-red-100"},high:{color:"text-orange-600",bg:"bg-orange-100"},medium:{color:"text-yellow-600",bg:"bg-yellow-100"},low:{color:"text-green-600",bg:"bg-green-100"}};return(c==null?void 0:c[l])||(c==null?void 0:c.medium)},me=l=>{ee?we(l==null?void 0:l.id):(T(l),$(!0))},we=l=>{const c=new Set(g);c!=null&&c.has(l)?c==null||c.delete(l):c==null||c.add(l),Q(c)},Se=async(l,c)=>{var i,x,n,d;try{const{error:t}=await((d=(n=(i=O)==null?void 0:i.from("jobs"))==null?void 0:n.update({job_status:c,updated_at:(x=new Date)==null?void 0:x.toISOString()}))==null?void 0:d.eq("id",l));if(t)throw t;f()}catch(t){console.error("Error updating appointment status:",t)}},$e=async l=>{var c,i,x,n;if((g==null?void 0:g.size)!==0)try{const d=Array==null?void 0:Array.from(g),{error:t}=await((n=(x=(c=O)==null?void 0:c.from("jobs"))==null?void 0:x.update({job_status:l,updated_at:(i=new Date)==null?void 0:i.toISOString()}))==null?void 0:n.in("id",d));if(t)throw t;Q(new Set),f()}catch(d){console.error("Error bulk updating appointments:",d)}},De=async l=>{var c,i,x,n;if((g==null?void 0:g.size)!==0)try{const d=Array==null?void 0:Array.from(g),{error:t}=await((n=(x=(c=O)==null?void 0:c.from("jobs"))==null?void 0:x.update({assigned_to:l,updated_at:(i=new Date)==null?void 0:i.toISOString()}))==null?void 0:n.in("id",d));if(t)throw t;Q(new Set),A(!1),f()}catch(d){console.error("Error bulk assigning appointments:",d)}},Ee=async(l,c)=>{var i,x,n,d;try{const{error:t}=await((d=(n=(i=O)==null?void 0:i.from("jobs"))==null?void 0:n.update({assigned_to:c,job_status:"scheduled",updated_at:(x=new Date)==null?void 0:x.toISOString()}))==null?void 0:d.eq("id",l));if(t)throw t;p(),f()}catch(t){console.error("Error assigning job:",t)}},Pe=async()=>{X(!0),await(Promise==null?void 0:Promise.all([f(),p(),se()])),setTimeout(()=>X(!1),1e3)},b=(()=>{var d,t,m;const l=(a==null?void 0:a.length)||0,c=((d=a==null?void 0:a.filter(o=>(o==null?void 0:o.job_status)==="in_progress"))==null?void 0:d.length)||0,i=((t=a==null?void 0:a.filter(o=>(o==null?void 0:o.job_status)==="scheduled"))==null?void 0:t.length)||0,x=((m=a==null?void 0:a.filter(o=>o==null?void 0:o.isOverdue))==null?void 0:m.length)||0,n=(J==null?void 0:J.length)||0;return{total:l,inProgress:c,scheduled:i,overdue:x,unassigned:n}})();return k?e.jsx(We,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-indigo-600 to-purple-600 flex items-center justify-center shadow-xl",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent"})}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading workflow center..."})]})})}):e.jsx(We,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-indigo-50",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200/50 sticky top-0 z-40",children:e.jsxs("div",{className:"px-8 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 flex items-center justify-center shadow-xl",children:e.jsx(ve,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Workflow Management Center"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Active Appointments & Operations Hub"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-4 top-4 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search jobs, vehicles, customers, or vendors...",value:S,onChange:l=>{var c;return U((c=l==null?void 0:l.target)==null?void 0:c.value)},className:"pl-12 pr-6 py-3.5 border border-gray-200 rounded-2xl w-96 focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md transition-all duration-200 text-gray-900 placeholder-gray-500"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>ae(!Y),className:`px-4 py-3 rounded-xl border text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 flex items-center space-x-2 ${Y?"bg-indigo-50 border-indigo-200 text-indigo-600":"border-gray-200"}`,children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{children:"Analytics"})]}),e.jsxs("button",{onClick:()=>R(!ee),className:`px-4 py-3 rounded-xl border text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 flex items-center space-x-2 ${ee?"bg-orange-50 border-orange-200 text-orange-600":"border-gray-200"}`,children:[e.jsx(xs,{className:"w-4 h-4"}),e.jsx("span",{children:"Bulk Ops"}),(g==null?void 0:g.size)>0&&e.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full text-xs font-semibold",children:g==null?void 0:g.size})]}),e.jsxs("button",{onClick:Pe,disabled:V,className:`px-4 py-3 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 flex items-center space-x-2 ${V?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(ye,{className:`w-4 h-4 ${V?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>ne("/calendar"),className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-3 rounded-xl hover:from-emerald-700 hover:to-teal-700 flex items-center space-x-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[e.jsx(Ne,{className:"w-5 h-5"}),e.jsx("span",{children:"Schedule New"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-50 rounded-xl border border-blue-200",children:[e.jsx(Ne,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[b==null?void 0:b.total," Total Active"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-orange-50 rounded-xl border border-orange-200",children:[e.jsx(ye,{className:"w-4 h-4 text-orange-600"}),e.jsxs("span",{className:"text-sm font-medium text-orange-800",children:[b==null?void 0:b.inProgress," In Progress"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-green-50 rounded-xl border border-green-200",children:[e.jsx(be,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium text-green-800",children:[b==null?void 0:b.scheduled," Scheduled"]})]}),(b==null?void 0:b.overdue)>0&&e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-red-50 rounded-xl border border-red-200",children:[e.jsx(Oe,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{className:"text-sm font-medium text-red-800",children:[b==null?void 0:b.overdue," Overdue"]})]}),(b==null?void 0:b.unassigned)>0&&e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-purple-50 rounded-xl border border-purple-200",children:[e.jsx(ke,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{className:"text-sm font-medium text-purple-800",children:[b==null?void 0:b.unassigned," Unassigned"]})]})]}),(b==null?void 0:b.unassigned)>0&&e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center space-x-2 px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-xl transition-all duration-200 text-sm font-medium",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Assign Jobs"}),e.jsx(ts,{className:"w-4 h-4"})]})]})]})}),Y&&e.jsx(js,{metrics:oe,onClose:()=>ae(!1)}),ee&&(g==null?void 0:g.size)>0&&e.jsx(vs,{selectedCount:g==null?void 0:g.size,onStatusUpdate:$e,onAssign:()=>A(!0),onCancel:()=>{Q(new Set),R(!1)}}),ce&&e.jsx(Ns,{unassignedJobs:J,staffMembers:xe,selectedAppointments:g,onQuickAssign:Ee,onBulkAssign:De,onClose:()=>A(!1)}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex-1 p-8",style:{width:h?"60%":"100%"},children:[e.jsx(ms,{statusFilter:L,setStatusFilter:E,vendorFilter:r,setVendorFilter:_,priorityFilter:P,setPriorityFilter:G,vendors:F}),(s==null?void 0:s.length)>0?e.jsx("div",{className:"space-y-4",children:s==null?void 0:s.map(l=>e.jsx(us,{appointment:l,onClick:()=>me(l),onUpdateStatus:Se,isSelected:g==null?void 0:g.has(l==null?void 0:l.id),bulkMode:ee,onToggleSelect:()=>we(l==null?void 0:l.id)},l==null?void 0:l.id))}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center",children:e.jsx(ve,{className:"w-12 h-12 text-indigo-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Active Appointments"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:S||L!=="all"||r!=="all"||P!=="all"?"No appointments match your current filters. Try adjusting your search criteria.":"All appointments are completed or there are no scheduled appointments at this time."})]})]}),h&&w&&e.jsx("div",{className:"w-2/5 border-l border-gray-200/50",children:e.jsx(fs,{appointment:w,onClose:()=>$(!1),onUpdate:f})})]})]})})};export{Ss as default};
//# sourceMappingURL=index-O0uuy5i1.js.map
