import{s as o}from"./index-BmnpmxFD.js";import{s,t}from"./options-CllavUpK.js";async function c(r){let e=o.from("vendors").select("*").order("name",{ascending:!0});r&&(e=e.or(`org_id.eq.${r},org_id.is.null`));const n=await s(e,"vendors:listByOrg");return t(n,{labelKey:"name",valueKey:"id"})}const d={async getAll(r=null){try{let e=o.from("vendors").select("*").eq("is_active",!0).order("name",{ascending:!0});r&&(e=e.or(`org_id.eq.${r},org_id.is.null`));const n=await s(e,"vendors:getAll");return t(n,{labelKey:"name",valueKey:"id"})}catch(e){return console.error("vendorService.getAll failed",e),[]}},async search(r,e=null){try{if(!(r!=null&&r.trim()))return this.getAll(e);let n=o.from("vendors").select("*").or(`name.ilike.%${r}%,specialty.ilike.%${r}%,contact_person.ilike.%${r}%`).eq("is_active",!0).order("name",{ascending:!0}).limit(50);e&&(n=n.or(`org_id.eq.${e},org_id.is.null`));const l=await s(n,"vendors:search");return t(l,{labelKey:"name",valueKey:"id"})}catch(n){return console.error("vendorService.search failed",n),[]}},async getById(r,e=null){if(!r)return null;try{let n=o.from("vendors").select("*, vendor_hours:vendor_hours(*), products:products(count)").eq("id",r).single();return e&&(n=n.eq("org_id",e)),(await n.throwOnError()).data}catch(n){return console.error("vendorService.getById failed",n),null}}};export{c as l,d as v};
//# sourceMappingURL=vendorService-B5OgXZ8W.js.map
