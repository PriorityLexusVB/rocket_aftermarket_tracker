{"version":3,"file":"NewDeal-Hlfgrnsi.js","sources":["../../src/pages/deals/NewDeal.jsx"],"sourcesContent":["// src/pages/deals/NewDeal.jsx\r\nimport React from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport DealForm from './DealForm'\r\nimport * as dealService from '../../services/dealService'\r\n\r\nexport default function NewDeal() {\r\n  const navigate = useNavigate()\r\n  const [saving, setSaving] = React.useState(false)\r\n\r\n  // Handler passed into DealForm as onSave\r\n  async function onSave(formState) {\r\n    setSaving(true)\r\n    try {\r\n      const created = await dealService.createDeal(formState)\r\n      if (created?.id) {\r\n        // Routes expect /deals/:dealId/edit\r\n        navigate(`/deals/${created.id}/edit`)\r\n      } else {\r\n        alert('Deal created but no id was returned')\r\n        throw new Error('Deal created but no id was returned')\r\n      }\r\n    } catch (e) {\r\n      const msg = e?.message || 'Failed to create deal'\r\n      alert(msg)\r\n      // Re-throw so DealForm can surface the error inline for E2E visibility\r\n      throw new Error(msg)\r\n    } finally {\r\n      setSaving(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-5xl mx-auto p-4 md:p-8\">\r\n      <header className=\"mb-4\">\r\n        <h1 className=\"text-xl font-semibold\">Deal # New / Stock # â€”</h1>\r\n      </header>\r\n\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-2xl font-semibold\">Create Deal</h1>\r\n        <p className=\"text-gray-600\">Enter details below. You can edit later.</p>\r\n      </div>\r\n\r\n      <DealForm mode=\"create\" onSave={onSave} onCancel={() => navigate('/deals')} saving={saving} />\r\n    </div>\r\n  )\r\n}\r\n"],"names":["NewDeal","navigate","useNavigate","saving","setSaving","React","onSave","formState","created","dealService.createDeal","msg","jsxs","jsx","DealForm"],"mappings":"uXAMA,SAAwBA,GAAU,CAChC,MAAMC,EAAWC,EAAA,EACX,CAACC,EAAQC,CAAS,EAAIC,EAAM,SAAS,EAAK,EAGhD,eAAeC,EAAOC,EAAW,CAC/BH,EAAU,EAAI,EACd,GAAI,CACF,MAAMI,EAAU,MAAMC,EAAuBF,CAAS,EACtD,GAAIC,GAAA,MAAAA,EAAS,GAEXP,EAAS,UAAUO,EAAQ,EAAE,OAAO,MAEpC,aAAM,qCAAqC,EACrC,IAAI,MAAM,qCAAqC,CAEzD,OAAS,EAAG,CACV,MAAME,GAAM,iBAAG,UAAW,wBAC1B,YAAMA,CAAG,EAEH,IAAI,MAAMA,CAAG,CACrB,QAAA,CACEN,EAAU,EAAK,CACjB,CACF,CAEA,OACEO,EAAAA,KAAC,MAAA,CAAI,UAAU,+BACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CAAO,UAAU,OAChB,SAAAA,EAAAA,IAAC,MAAG,UAAU,wBAAwB,kCAAsB,CAAA,CAC9D,EAEAD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,yBAAyB,SAAA,cAAW,EAClDA,EAAAA,IAAC,IAAA,CAAE,UAAU,gBAAgB,SAAA,0CAAA,CAAwC,CAAA,EACvE,EAEAA,EAAAA,IAACC,EAAA,CAAS,KAAK,SAAS,OAAAP,EAAgB,SAAU,IAAML,EAAS,QAAQ,EAAG,OAAAE,CAAA,CAAgB,CAAA,EAC9F,CAEJ"}