import{j as e,C as Ke,T as Re,U as qe,n as Be,P as Xe,M as Ye,o as Ue,q as ve,A as Ae,s as T,X as Te,r as me,t as Je,v as pe,D as es,F as ss,w as rs,x as ls,y as Me,R as Ne,z as ds,E as as,G as ye,H as Ve,J as He,K as cs,L as ke,N as is,O as xs,Q as ts}from"./index-ChFOcr8K.js";import{R as os,r as v}from"./react-Czq5O75u.js";import{A as We}from"./AppLayout-CW1ee6hB.js";import{a as hs}from"./router-CZES1Sa0.js";import"./supabase-D02rA7zj.js";import"./Navbar-DlTrAlxI.js";const ns=({appointment:s,onClick:N,onUpdateStatus:a,isSelected:u,bulkMode:_,onToggleSelect:j})=>{var r,w,D,V,Q,W,B,H,g,U,X,E,Z,se,ae,G,F,ce,ie,xe,te,oe,he,ne,K,Y,ge;const b=(r=s==null?void 0:s.statusConfig)==null?void 0:r.icon,O=s==null?void 0:s.isOverdue,h=f=>{var I;return f?(I=new Date(f))==null?void 0:I.toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"Not scheduled"},C=(()=>{if(!(s!=null&&s.promised_date))return null;const f=new Date,ue=new Date(s==null?void 0:s.promised_date)-f,A=Math.floor(ue/(1e3*60*60)),fe=Math.floor(A/24);return ue<0?"Overdue":fe>0?`${fe}d ${A%24}h remaining`:A>0?`${A}h remaining`:"Due soon"})(),q=(f,I)=>{I==null||I.stopPropagation(),a==null||a(s==null?void 0:s.id,f)},z=f=>{_&&j?(f==null||f.stopPropagation(),j()):N()},$=f=>{f==null||f.stopPropagation(),j==null||j()};return e.jsxs("div",{onClick:z,className:`group relative bg-white rounded-2xl shadow-sm border transition-all duration-300 overflow-hidden cursor-pointer hover:shadow-xl hover:border-gray-200 ${O?"border-red-200 bg-red-50/30":"border-gray-100"} ${u?"ring-2 ring-indigo-500 border-indigo-200":""} ${_?"hover:ring-2 hover:ring-indigo-300":""}`,children:[e.jsx("div",{className:`absolute top-0 left-0 w-full h-1 ${u?"bg-gradient-to-r from-indigo-500 to-purple-500":O?"bg-gradient-to-r from-red-500 to-red-600":"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600"}`}),_&&e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsx("div",{onClick:$,className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center cursor-pointer transition-all duration-200 ${u?"bg-indigo-500 border-indigo-500 text-white":"bg-white border-gray-300 hover:border-indigo-400"}`,children:u&&e.jsx(Ke,{className:"w-4 h-4"})})}),O&&e.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-2 flex items-center space-x-2",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"OVERDUE - Immediate Attention Required"})]}),e.jsxs("div",{className:`p-6 ${_?"ml-8":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ${u?"bg-gradient-to-br from-indigo-600 to-indigo-700":O?"bg-gradient-to-br from-red-600 to-red-700":"bg-gradient-to-br from-indigo-600 to-purple-700"}`,children:e.jsx(b,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["#",s==null?void 0:s.job_number]}),e.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${(w=s==null?void 0:s.priorityConfig)==null?void 0:w.bg} ${(D=s==null?void 0:s.priorityConfig)==null?void 0:D.color}`,children:(V=s==null?void 0:s.priority)==null?void 0:V.toUpperCase()}),(s==null?void 0:s.assigned_to_profile)&&e.jsxs("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700",children:[e.jsx(qe,{className:"w-3 h-3 mr-1"}),(B=(W=(Q=s==null?void 0:s.assigned_to_profile)==null?void 0:Q.full_name)==null?void 0:W.split(" "))==null?void 0:B[0]]})]}),e.jsx("h3",{className:"text-base font-semibold text-gray-900 leading-tight",children:s==null?void 0:s.title})]})]}),e.jsxs("div",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold ${(H=s==null?void 0:s.statusConfig)==null?void 0:H.bg} ${(g=s==null?void 0:s.statusConfig)==null?void 0:g.text} ${(U=s==null?void 0:s.statusConfig)==null?void 0:U.border} border`,children:[e.jsx(b,{className:"w-3 h-3 mr-1.5"}),(X=s==null?void 0:s.statusConfig)==null?void 0:X.label]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 font-medium",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsx("span",{children:"Vehicle"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[(E=s==null?void 0:s.vehicles)==null?void 0:E.year," ",(Z=s==null?void 0:s.vehicles)==null?void 0:Z.make," ",(se=s==null?void 0:s.vehicles)==null?void 0:se.model]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[((ae=s==null?void 0:s.vehicles)==null?void 0:ae.stock_number)&&e.jsxs("div",{children:["Stock: #",(G=s==null?void 0:s.vehicles)==null?void 0:G.stock_number]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:((ce=(F=s==null?void 0:s.vehicles)==null?void 0:F.color)==null?void 0:ce.toLowerCase())||"#gray"}}),e.jsx("span",{children:(ie=s==null?void 0:s.vehicles)==null?void 0:ie.color}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:(xe=s==null?void 0:s.vehicles)==null?void 0:xe.license_plate})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 font-medium",children:[e.jsx(qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Customer"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:((te=s==null?void 0:s.vehicles)==null?void 0:te.owner_name)||"No customer info"}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[((oe=s==null?void 0:s.vehicles)==null?void 0:oe.owner_phone)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xe,{className:"w-3 h-3 mr-2 text-gray-400"}),(he=s==null?void 0:s.vehicles)==null?void 0:he.owner_phone]}),((ne=s==null?void 0:s.vehicles)==null?void 0:ne.owner_email)&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ye,{className:"w-3 h-3 mr-2 text-gray-400"}),e.jsx("div",{className:"truncate",children:(K=s==null?void 0:s.vehicles)==null?void 0:K.owner_email})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 font-medium",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Vendor"})]}),e.jsx("div",{children:s!=null&&s.vendors?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:(Y=s==null?void 0:s.vendors)==null?void 0:Y.name}),e.jsx("div",{className:"text-sm text-gray-600",children:(ge=s==null?void 0:s.vendors)==null?void 0:ge.specialty})]}):e.jsx("div",{className:"text-sm text-gray-500 italic",children:"No vendor assigned"})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 font-medium",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Schedule"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-900 font-medium",children:h(s==null?void 0:s.scheduled_start_time)}),C&&e.jsx("div",{className:`text-xs font-semibold ${O?"text-red-600":C!=null&&C.includes("remaining")?"text-green-600":"text-orange-600"}`,children:C})]})]})]}),!_&&e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[(s==null?void 0:s.job_status)==="scheduled"&&e.jsx("button",{onClick:f=>q("in_progress",f),className:"px-3 py-1.5 text-xs font-medium bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors duration-200",children:"Start Work"}),(s==null?void 0:s.job_status)==="in_progress"&&e.jsx("button",{onClick:f=>q("quality_check",f),className:"px-3 py-1.5 text-xs font-medium bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors duration-200",children:"Quality Check"}),(s==null?void 0:s.job_status)==="quality_check"&&e.jsx("button",{onClick:f=>q("completed",f),className:"px-3 py-1.5 text-xs font-medium bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors duration-200",children:"Complete"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 group-hover:text-indigo-600 transition-colors",children:[e.jsx("span",{className:"mr-2",children:"View Details"}),e.jsx(Ae,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform duration-200"})]})]}),_&&e.jsx("div",{className:"pt-4 border-t border-gray-100 text-center",children:e.jsx("div",{className:"text-xs text-gray-500",children:u?"Selected for bulk operation":"Click to select for bulk operation"})})]})]})};function gs(s,N){const a=s.appointment||{},u=N.appointment||{};return a.id===u.id&&a.job_status===u.job_status&&a.promised_date===u.promised_date&&a.scheduled_start_time===u.scheduled_start_time&&a.scheduled_end_time===u.scheduled_end_time&&s.isSelected===N.isSelected&&s.bulkMode===N.bulkMode}const us=os.memo(ns,gs),fs=({appointment:s,onClose:N,onUpdate:a})=>{var se,ae,G,F,ce,ie,xe,te,oe,he,ne,K,Y,ge,f,I,ue,A,fe,be,Se,$e,De,Ee,Pe,ze,y,l,c,i,x,n;const[u,_]=v.useState([]),[j,b]=v.useState([]),[O,h]=v.useState(!0),[k,C]=v.useState(!1),[q,z]=v.useState((s==null?void 0:s.calendar_notes)||""),[$,r]=v.useState(""),[w,D]=v.useState(!1),V=(se=s==null?void 0:s.statusConfig)==null?void 0:se.icon,Q=s==null?void 0:s.isOverdue;v.useEffect(()=>{W()},[s==null?void 0:s.id]);const W=async()=>{var d,t,m,o,P,re,le;if(s!=null&&s.id)try{h(!0);const{data:J,error:de}=await((o=(m=(t=(d=T)==null?void 0:d.from("communications"))==null?void 0:t.select(`
          *,
          sent_by_profile:user_profiles!sent_by (full_name, email)
        `))==null?void 0:m.eq("job_id",s==null?void 0:s.id))==null?void 0:o.order("sent_at",{ascending:!1}));if(de)throw de;_(J||[]);const{data:p,error:L}=await((le=(re=(P=T)==null?void 0:P.from("job_parts"))==null?void 0:re.select(`
          *,
          products (name, estimated_cost, vendor_id)
        `))==null?void 0:le.eq("job_id",s==null?void 0:s.id));if(L)throw L;b(p||[])}catch(J){console.error("Error loading appointment details:",J)}finally{h(!1)}},B=async()=>{var d,t,m,o;try{const{error:P}=await((o=(m=(d=T)==null?void 0:d.from("jobs"))==null?void 0:m.update({calendar_notes:q,updated_at:(t=new Date)==null?void 0:t.toISOString()}))==null?void 0:o.eq("id",s==null?void 0:s.id));if(P)throw P;C(!1),a==null||a()}catch(P){console.error("Error saving notes:",P)}},H=async()=>{var d,t,m;if($!=null&&$.trim())try{D(!0);const{error:o}=await((m=(d=T)==null?void 0:d.from("communications"))==null?void 0:m.insert({job_id:s==null?void 0:s.id,vehicle_id:s==null?void 0:s.vehicle_id,communication_type:"note",message:$==null?void 0:$.trim(),sent_at:(t=new Date)==null?void 0:t.toISOString(),is_successful:!0}));if(o)throw o;r(""),W()}catch(o){console.error("Error sending message:",o)}finally{D(!1)}},g=d=>{var t;return d?(t=new Date(d))==null?void 0:t.toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}):"Not scheduled"},U=d=>{var t;return d?(t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}))==null?void 0:t.format(d):"$0.00"},E=(()=>{if(!(s!=null&&s.promised_date))return null;const d=new Date,m=new Date(s==null?void 0:s.promised_date)-d,o=Math.floor(m/(1e3*60*60)),P=Math.floor(o/24);return m<0?{text:"Overdue",urgent:!0}:P>0?{text:`${P}d ${o%24}h remaining`,urgent:!1}:o>0?{text:`${o}h remaining`,urgent:o<=2}:{text:"Due very soon",urgent:!0}})(),Z=j==null?void 0:j.reduce((d,t)=>{var m;return d+(parseFloat((m=t==null?void 0:t.products)==null?void 0:m.estimated_cost)||0)},0);return e.jsxs("div",{className:"h-full flex flex-col bg-white/95 backdrop-blur-xl",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Appointment Details"}),e.jsx("button",{onClick:N,className:"w-10 h-10 rounded-xl bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-all duration-200",children:e.jsx(Te,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("div",{className:`rounded-2xl p-6 border ${Q?"bg-gradient-to-r from-red-50 to-red-100 border-red-200":"bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ${Q?"bg-gradient-to-br from-red-600 to-red-700":"bg-gradient-to-br from-indigo-600 to-purple-700"}`,children:e.jsx(V,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1",children:[e.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["#",s==null?void 0:s.job_number]}),e.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${(ae=s==null?void 0:s.priorityConfig)==null?void 0:ae.bg} ${(G=s==null?void 0:s.priorityConfig)==null?void 0:G.color}`,children:(F=s==null?void 0:s.priority)==null?void 0:F.toUpperCase()})]}),e.jsx("h4",{className:"text-base font-semibold text-gray-900",children:s==null?void 0:s.title})]})]}),e.jsxs("div",{className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-semibold ${(ce=s==null?void 0:s.statusConfig)==null?void 0:ce.bg} ${(ie=s==null?void 0:s.statusConfig)==null?void 0:ie.text} ${(xe=s==null?void 0:s.statusConfig)==null?void 0:xe.border} border`,children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),(te=s==null?void 0:s.statusConfig)==null?void 0:te.label]})]}),E&&e.jsxs("div",{className:`flex items-center space-x-2 px-4 py-2 rounded-xl ${E!=null&&E.urgent?"bg-red-100 text-red-800 border border-red-200":"bg-green-100 text-green-800 border border-green-200"}`,children:[E!=null&&E.urgent?e.jsx(Re,{className:"w-4 h-4"}):e.jsx(me,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:E==null?void 0:E.text})]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Be,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Vehicle Information"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Vehicle:"}),e.jsxs("div",{className:"text-gray-900 font-semibold",children:[(oe=s==null?void 0:s.vehicles)==null?void 0:oe.year," ",(he=s==null?void 0:s.vehicles)==null?void 0:he.make," ",(ne=s==null?void 0:s.vehicles)==null?void 0:ne.model]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Stock #:"}),e.jsx("div",{className:"text-gray-900",children:((K=s==null?void 0:s.vehicles)==null?void 0:K.stock_number)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Color:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full border",style:{backgroundColor:((ge=(Y=s==null?void 0:s.vehicles)==null?void 0:Y.color)==null?void 0:ge.toLowerCase())||"#gray"}}),e.jsx("span",{className:"text-gray-900",children:(f=s==null?void 0:s.vehicles)==null?void 0:f.color})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"License:"}),e.jsx("div",{className:"text-gray-900",children:((I=s==null?void 0:s.vehicles)==null?void 0:I.license_plate)||"N/A"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(qe,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Customer Information"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Name:"}),e.jsx("div",{className:"text-gray-900 font-semibold",children:((ue=s==null?void 0:s.vehicles)==null?void 0:ue.owner_name)||"No customer info"})]}),((A=s==null?void 0:s.vehicles)==null?void 0:A.owner_phone)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Phone:"}),e.jsx("div",{className:"text-gray-900",children:(fe=s==null?void 0:s.vehicles)==null?void 0:fe.owner_phone})]}),e.jsx("a",{href:`tel:${(be=s==null?void 0:s.vehicles)==null?void 0:be.owner_phone}`,className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Call"})]}),((Se=s==null?void 0:s.vehicles)==null?void 0:Se.owner_email)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Email:"}),e.jsx("div",{className:"text-gray-900 truncate",children:($e=s==null?void 0:s.vehicles)==null?void 0:$e.owner_email})]}),e.jsx("a",{href:`mailto:${(De=s==null?void 0:s.vehicles)==null?void 0:De.owner_email}`,className:"text-indigo-600 hover:text-indigo-700 font-medium ml-2",children:"Email"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Je,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Schedule Information"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Scheduled Start:"}),e.jsx("div",{className:"text-gray-900",children:g(s==null?void 0:s.scheduled_start_time)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Scheduled End:"}),e.jsx("div",{className:"text-gray-900",children:g(s==null?void 0:s.scheduled_end_time)})]})]}),(s==null?void 0:s.promised_date)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Promised Completion:"}),e.jsx("div",{className:"text-gray-900",children:g(s==null?void 0:s.promised_date)})]}),(s==null?void 0:s.location)&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(pe,{className:"w-4 h-4 text-gray-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Location:"}),e.jsx("div",{className:"text-gray-900",children:s==null?void 0:s.location})]})]})]})]}),(s==null?void 0:s.vendors)&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Ue,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Vendor Information"})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Vendor:"}),e.jsx("div",{className:"text-gray-900 font-semibold",children:(Ee=s==null?void 0:s.vendors)==null?void 0:Ee.name})]}),((Pe=s==null?void 0:s.vendors)==null?void 0:Pe.specialty)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Specialty:"}),e.jsx("div",{className:"text-gray-900",children:(ze=s==null?void 0:s.vendors)==null?void 0:ze.specialty})]}),((y=s==null?void 0:s.vendors)==null?void 0:y.contact_person)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Contact:"}),e.jsx("div",{className:"text-gray-900",children:(l=s==null?void 0:s.vendors)==null?void 0:l.contact_person})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[((c=s==null?void 0:s.vendors)==null?void 0:c.phone)&&e.jsx("a",{href:`tel:${(i=s==null?void 0:s.vendors)==null?void 0:i.phone}`,className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Call Vendor"}),((x=s==null?void 0:s.vendors)==null?void 0:x.email)&&e.jsx("a",{href:`mailto:${(n=s==null?void 0:s.vendors)==null?void 0:n.email}`,className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"Email Vendor"})]})]})]})]}),((s==null?void 0:s.estimated_cost)||Z>0||(s==null?void 0:s.actual_cost))&&e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(es,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Cost Information"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(s==null?void 0:s.estimated_cost)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Estimated Labor:"}),e.jsx("div",{className:"text-gray-900 font-semibold",children:U(s==null?void 0:s.estimated_cost)})]}),Z>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Estimated Parts:"}),e.jsx("div",{className:"text-gray-900 font-semibold",children:U(Z)})]}),(s==null?void 0:s.actual_cost)&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Actual Cost:"}),e.jsx("div",{className:"text-gray-900 font-semibold",children:U(s==null?void 0:s.actual_cost)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Notes"})]}),e.jsx("button",{onClick:()=>k?B():C(!0),className:"text-indigo-600 hover:text-indigo-700 font-medium text-sm flex items-center space-x-1",children:k?e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"w-4 h-4"}),e.jsx("span",{children:"Save"})]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{className:"w-4 h-4"}),e.jsx("span",{children:"Edit"})]})})]}),k?e.jsx("textarea",{value:q,onChange:d=>{var t;return z((t=d==null?void 0:d.target)==null?void 0:t.value)},placeholder:"Add appointment notes...",className:"w-full h-32 p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none text-sm"}):e.jsx("div",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:(s==null?void 0:s.calendar_notes)||q||"No notes available"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Me,{className:"w-5 h-5 text-gray-600"}),e.jsx("h5",{className:"font-semibold text-gray-900",children:"Communications"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("textarea",{value:$,onChange:d=>{var t;return r((t=d==null?void 0:d.target)==null?void 0:t.value)},placeholder:"Add a communication note...",className:"flex-1 p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none text-sm",rows:"2"}),e.jsxs("button",{onClick:H,disabled:!($!=null&&$.trim())||w,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 text-sm font-medium",children:[w?e.jsx(Ne,{className:"w-4 h-4 animate-spin"}):e.jsx(Me,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Note"})]})]})}),O?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ne,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading communications..."})]}):(u==null?void 0:u.length)>0?e.jsx("div",{className:"space-y-4 max-h-64 overflow-y-auto",children:u==null?void 0:u.map((d,t)=>{var m,o;return e.jsx("div",{className:"flex space-x-3 p-3 bg-gray-50 rounded-xl",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:((m=d==null?void 0:d.sent_by_profile)==null?void 0:m.full_name)||"System"}),e.jsx("span",{className:`inline-flex px-2 py-0.5 text-xs rounded-full ${(d==null?void 0:d.communication_type)==="sms"?"bg-blue-100 text-blue-800":(d==null?void 0:d.communication_type)==="email"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:d==null?void 0:d.communication_type}),e.jsx("span",{className:"text-xs text-gray-500",children:(o=new Date(d==null?void 0:d.sent_at))==null?void 0:o.toLocaleString()})]}),e.jsx("p",{className:"text-sm text-gray-700",children:d==null?void 0:d.message})]})},(d==null?void 0:d.id)||t)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Me,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:"No communications yet"})]})]})]})]})},ms=({statusFilter:s,setStatusFilter:N,vendorFilter:a,setVendorFilter:u,priorityFilter:_,setPriorityFilter:j,vendors:b})=>{var O;return e.jsxs("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-xl border border-gray-200/50 p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(ds,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Filter Appointments"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Status"}),e.jsxs("select",{value:s,onChange:h=>{var k;return N((k=h==null?void 0:h.target)==null?void 0:k.value)},className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 appearance-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"active",children:"Active Only"}),e.jsx("option",{value:"scheduled",children:"Scheduled"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"quality_check",children:"Quality Check"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"overdue",children:"Overdue Items"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),e.jsx("span",{children:"Vendor"})]}),e.jsxs("select",{value:a,onChange:h=>{var k;return u((k=h==null?void 0:h.target)==null?void 0:k.value)},className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 appearance-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"All Vendors"}),b==null?void 0:b.map(h=>e.jsx("option",{value:h==null?void 0:h.id,children:h==null?void 0:h.name},h==null?void 0:h.id))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 flex items-center space-x-1",children:[e.jsx(as,{className:"w-4 h-4"}),e.jsx("span",{children:"Priority"})]}),e.jsxs("select",{value:_,onChange:h=>{var k;return j((k=h==null?void 0:h.target)==null?void 0:k.value)},className:"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 appearance-none cursor-pointer",children:[e.jsx("option",{value:"all",children:"All Priorities"}),e.jsx("option",{value:"urgent",children:"ðŸ”´ Urgent"}),e.jsx("option",{value:"high",children:"ðŸŸ  High"}),e.jsx("option",{value:"medium",children:"ðŸŸ¡ Medium"}),e.jsx("option",{value:"low",children:"ðŸŸ¢ Low"})]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 mt-4",children:(s!=="all"||a!=="all"||_!=="all")&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Active filters:"}),s!=="all"&&e.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:[e.jsxs("span",{children:["Status: ",s==null?void 0:s.replace("_"," ")]}),e.jsx("button",{onClick:()=>N("all"),className:"ml-2 text-blue-600 hover:text-blue-800",children:"Ã—"})]}),a!=="all"&&e.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:[e.jsxs("span",{children:["Vendor: ",(O=b==null?void 0:b.find(h=>(h==null?void 0:h.id)===a))==null?void 0:O.name]}),e.jsx("button",{onClick:()=>u("all"),className:"ml-2 text-green-600 hover:text-green-800",children:"Ã—"})]}),_!=="all"&&e.jsxs("div",{className:"inline-flex items-center px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium",children:[e.jsxs("span",{children:["Priority: ",_]}),e.jsx("button",{onClick:()=>j("all"),className:"ml-2 text-purple-600 hover:text-purple-800",children:"Ã—"})]}),e.jsx("button",{onClick:()=>{N("all"),u("all"),j("all")},className:"text-sm text-gray-600 hover:text-gray-800 font-medium",children:"Clear all"})]})})]})},js=({selectedCount:s,onStatusUpdate:N,onAssign:a,onCancel:u})=>e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-2xl border-b border-indigo-500/20",children:e.jsxs("div",{className:"px-8 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ye,{className:"w-5 h-5"}),e.jsxs("span",{className:"font-semibold",children:[s," appointment",s!==1?"s":""," selected"]})]}),e.jsx("div",{className:"h-6 w-px bg-white/20"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-white/80",children:"Bulk Actions:"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>N("in_progress"),className:"flex items-center space-x-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200 text-sm font-medium",children:[e.jsx(Ne,{className:"w-4 h-4"}),e.jsx("span",{children:"Start"})]}),e.jsxs("button",{onClick:()=>N("quality_check"),className:"flex items-center space-x-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200 text-sm font-medium",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:"QC"})]}),e.jsxs("button",{onClick:()=>N("scheduled"),className:"flex items-center space-x-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200 text-sm font-medium",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Schedule"})]})]}),e.jsx("div",{className:"h-4 w-px bg-white/20"}),e.jsxs("button",{onClick:a,className:"flex items-center space-x-2 px-4 py-1.5 bg-green-500/80 hover:bg-green-500 rounded-lg transition-all duration-200 text-sm font-medium",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Assign Staff"})]}),e.jsxs("button",{onClick:()=>N("cancelled"),className:"flex items-center space-x-1 px-3 py-1.5 bg-red-500/20 hover:bg-red-500/40 rounded-lg transition-all duration-200 text-sm font-medium border border-red-400/30",children:[e.jsx(Re,{className:"w-4 h-4"}),e.jsx("span",{children:"Cancel"})]})]})]}),e.jsxs("button",{onClick:u,className:"flex items-center space-x-2 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200",children:[e.jsx(Te,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Exit Bulk Mode"})]})]}),e.jsx("div",{className:"mt-3 text-xs text-white/60",children:"ðŸ’¡ Select appointments by clicking on them, then choose a bulk action above"})]})}),vs=({metrics:s,onClose:N})=>{const a=j=>j<1?`${Math.round(j*60)} min`:`${j==null?void 0:j.toFixed(1)}h`,u=j=>j>=80?"text-green-600":j>=60?"text-yellow-600":"text-red-600",_=j=>j>=80?"bg-green-50 border-green-200":j>=60?"bg-yellow-50 border-yellow-200":"bg-red-50 border-red-200";return e.jsxs("div",{className:"bg-white/95 backdrop-blur-xl shadow-2xl border border-gray-200/50 mx-8 mb-6 rounded-3xl overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-gray-200/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center",children:e.jsx(He,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Workflow Performance"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Real-time efficiency metrics"})]})]}),e.jsx("button",{onClick:N,className:"w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors duration-200",children:e.jsx(Te,{className:"w-4 h-4 text-gray-600"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:`rounded-2xl border-2 p-4 ${_((s==null?void 0:s.todayCompletionRate)||0)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ve,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{className:`text-xs font-semibold ${u((s==null?void 0:s.todayCompletionRate)||0)}`,children:[Math.round((s==null?void 0:s.todayCompletionRate)||0),"%"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Today"}),e.jsxs("div",{className:"text-xs text-gray-600",children:[(s==null?void 0:s.todayCompleted)||0," of ",(s==null?void 0:s.todayTotal)||0," completed"]})]})]}),e.jsxs("div",{className:`rounded-2xl border-2 p-4 ${_((s==null?void 0:s.weekCompletionRate)||0)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(cs,{className:"w-5 h-5 text-gray-600"}),e.jsxs("div",{className:`text-xs font-semibold ${u((s==null?void 0:s.weekCompletionRate)||0)}`,children:[Math.round((s==null?void 0:s.weekCompletionRate)||0),"%"]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"This Week"}),e.jsxs("div",{className:"text-xs text-gray-600",children:[(s==null?void 0:s.weekCompleted)||0," of ",(s==null?void 0:s.weekTotal)||0," completed"]})]})]}),e.jsxs("div",{className:"rounded-2xl border-2 p-4 bg-blue-50 border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(me,{className:"w-5 h-5 text-blue-600"}),e.jsx("div",{className:"text-xs font-semibold text-blue-600",children:a((s==null?void 0:s.avgCompletionTime)||0)})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Avg Time"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Per job completion"})]})]}),e.jsxs("div",{className:"rounded-2xl border-2 p-4 bg-purple-50 border-purple-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(ye,{className:"w-5 h-5 text-purple-600"}),e.jsx("div",{className:"text-xs font-semibold text-purple-600",children:s!=null&&s.weekCompletionRate?(s==null?void 0:s.weekCompletionRate)>75?"Excellent":(s==null?void 0:s.weekCompletionRate)>60?"Good":"Needs Improvement":"No Data"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:"Efficiency"}),e.jsx("div",{className:"text-xs text-gray-600",children:"Overall rating"})]})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200/50",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Quick Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${((s==null?void 0:s.weekCompletionRate)||0)>((s==null?void 0:s.todayCompletionRate)||0)?"bg-green-500":"bg-red-500"}`}),e.jsx("div",{className:"text-xs text-gray-700",children:((s==null?void 0:s.weekCompletionRate)||0)>((s==null?void 0:s.todayCompletionRate)||0)?"Weekly performance is above today's rate":"Today is performing better than weekly average"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${((s==null?void 0:s.avgCompletionTime)||0)<24?"bg-green-500":"bg-yellow-500"}`}),e.jsx("div",{className:"text-xs text-gray-700",children:((s==null?void 0:s.avgCompletionTime)||0)<24?"Jobs are completing within 24 hours":"Jobs taking longer than 24 hours on average"})]})]})]})]})]})},Ns=({unassignedJobs:s,staffMembers:N,selectedAppointments:a,onQuickAssign:u,onBulkAssign:_,onClose:j})=>{var $;const[b,O]=v.useState(""),[h,k]=v.useState((a==null?void 0:a.size)>0?"bulk":"individual"),C=()=>{!b||(a==null?void 0:a.size)===0||(_(b),O(""))},q=r=>{b&&u(r,b)},z=r=>{var w;return r?(w=new Date(r))==null?void 0:w.toLocaleDateString():"Not scheduled"};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-2xl border border-gray-200 w-full max-w-4xl max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-600 to-indigo-600 flex items-center justify-center shadow-lg",children:e.jsx(ke,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Assignment Center"}),e.jsx("p",{className:"text-sm text-gray-600",children:(a==null?void 0:a.size)>0?`Manage ${a==null?void 0:a.size} selected appointment${(a==null?void 0:a.size)!==1?"s":""} and ${s==null?void 0:s.length} unassigned job${(s==null?void 0:s.length)!==1?"s":""}`:`Assign ${s==null?void 0:s.length} unassigned job${(s==null?void 0:s.length)!==1?"s":""}`})]})]}),e.jsx("button",{onClick:j,className:"w-10 h-10 rounded-xl bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-all duration-200",children:e.jsx(Te,{className:"w-5 h-5 text-gray-600"})})]})}),e.jsxs("div",{className:"p-8",children:[(a==null?void 0:a.size)>0&&e.jsxs("div",{className:"flex items-center space-x-4 mb-6 p-4 bg-indigo-50 rounded-2xl border border-indigo-200",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"bulk",name:"assignmentMode",value:"bulk",checked:h==="bulk",onChange:r=>{var w;return k((w=r==null?void 0:r.target)==null?void 0:w.value)},className:"text-indigo-600 focus:ring-indigo-500"}),e.jsxs("label",{htmlFor:"bulk",className:"text-sm font-medium text-gray-900",children:["Bulk assign ",a==null?void 0:a.size," selected appointment",(a==null?void 0:a.size)!==1?"s":""]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"individual",name:"assignmentMode",value:"individual",checked:h==="individual",onChange:r=>{var w;return k((w=r==null?void 0:r.target)==null?void 0:w.value)},className:"text-indigo-600 focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"individual",className:"text-sm font-medium text-gray-900",children:"Individual assignments"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-0",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),e.jsx("span",{children:"Select Staff Member"})]}),e.jsx("div",{className:"space-y-3",children:N==null?void 0:N.map(r=>{var w,D;return e.jsx("div",{onClick:()=>O(r==null?void 0:r.id),className:`p-4 rounded-2xl border-2 cursor-pointer transition-all duration-200 ${b===(r==null?void 0:r.id)?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-indigo-300 hover:bg-indigo-50/50"}`,children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-white ${b===(r==null?void 0:r.id)?"bg-indigo-600":"bg-gray-400"}`,children:(D=(w=r==null?void 0:r.full_name)==null?void 0:w.charAt(0))==null?void 0:D.toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:r==null?void 0:r.full_name}),e.jsxs("div",{className:"text-sm text-gray-600",children:[r==null?void 0:r.role," â€¢ ",r==null?void 0:r.department]})]}),b===(r==null?void 0:r.id)&&e.jsx(ye,{className:"w-5 h-5 text-indigo-600"})]})},r==null?void 0:r.id)})}),h==="bulk"&&(a==null?void 0:a.size)>0&&e.jsxs("button",{onClick:C,disabled:!b,className:"w-full mt-6 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 rounded-2xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 flex items-center justify-center space-x-2",children:[e.jsx(ke,{className:"w-5 h-5"}),e.jsxs("span",{children:["Assign ",a==null?void 0:a.size," Appointment",(a==null?void 0:a.size)!==1?"s":""]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(me,{className:"w-5 h-5"}),e.jsxs("span",{children:["Unassigned Jobs (",s==null?void 0:s.length,")"]})]}),h==="individual"&&e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:(s==null?void 0:s.length)>0?s==null?void 0:s.map(r=>{var w,D,V,Q,W,B,H,g;return e.jsx("div",{className:"bg-white border border-gray-200 rounded-2xl p-4 hover:shadow-md transition-all duration-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["#",r==null?void 0:r.job_number]}),e.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${(r==null?void 0:r.priority)==="urgent"?"bg-red-100 text-red-700":(r==null?void 0:r.priority)==="high"?"bg-orange-100 text-orange-700":(r==null?void 0:r.priority)==="medium"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:(w=r==null?void 0:r.priority)==null?void 0:w.toUpperCase()})]}),e.jsx("h5",{className:"font-medium text-gray-900 mb-1",children:r==null?void 0:r.title}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Be,{className:"w-4 h-4"}),e.jsxs("span",{children:[(D=r==null?void 0:r.vehicles)==null?void 0:D.year," ",(V=r==null?void 0:r.vehicles)==null?void 0:V.make," ",(Q=r==null?void 0:r.vehicles)==null?void 0:Q.model]})]}),((W=r==null?void 0:r.vehicles)==null?void 0:W.stock_number)&&e.jsxs("span",{children:["Stock: #",(B=r==null?void 0:r.vehicles)==null?void 0:B.stock_number]})]}),((H=r==null?void 0:r.vehicles)==null?void 0:H.owner_name)&&e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Customer: ",(g=r==null?void 0:r.vehicles)==null?void 0:g.owner_name]}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Created: ",z(r==null?void 0:r.created_at)]})]}),e.jsxs("button",{onClick:()=>q(r==null?void 0:r.id),disabled:!b,className:"ml-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-xl text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:from-green-700 hover:to-emerald-700 transition-all duration-200 flex items-center space-x-2",children:[e.jsx(ke,{className:"w-4 h-4"}),e.jsx("span",{children:"Assign"})]})]})},r==null?void 0:r.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(me,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{className:"text-gray-600",children:"No unassigned jobs at the moment"})]})}),h==="bulk"&&e.jsx("div",{className:"bg-indigo-50 rounded-2xl p-6 border border-indigo-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ke,{className:"w-12 h-12 mx-auto mb-3 text-indigo-600"}),e.jsx("h5",{className:"font-semibold text-gray-900 mb-2",children:"Bulk Assignment Mode"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Select a staff member on the left to assign all ",a==null?void 0:a.size," selected appointment",(a==null?void 0:a.size)!==1?"s":""," at once."]}),b&&e.jsxs("div",{className:"text-sm text-indigo-700",children:["Ready to assign to: ",e.jsx("strong",{children:($=N==null?void 0:N.find(r=>(r==null?void 0:r.id)===b))==null?void 0:$.full_name})]})]})})]})]})]})]})})},Ss=()=>{const[s,N]=v.useState([]),[a,u]=v.useState([]),[_,j]=v.useState(!0),[b,O]=v.useState(null),[h,k]=v.useState(!1),[C,q]=v.useState(""),[z,$]=v.useState("active"),[r,w]=v.useState("all"),[D,V]=v.useState("all"),[Q,W]=v.useState([]),[B,H]=v.useState(!1),[g,U]=v.useState(new Set),[X,E]=v.useState(!1),[Z,se]=v.useState(!1),[ae,G]=v.useState(!1),[F,ce]=v.useState([]),[ie,xe]=v.useState([]),[te,oe]=v.useState({}),he=hs();v.useEffect(()=>{var c,i,x;f(),ge(),ne(),K(),Y();const l=(x=(i=(c=T)==null?void 0:c.channel("job_updates"))==null?void 0:i.on("postgres_changes",{event:"*",schema:"public",table:"jobs"},()=>{f(),K(),Y()}))==null?void 0:x.subscribe();return()=>{l==null||l.unsubscribe()}},[]),v.useEffect(()=>{I()},[C,z,r,D,a]);const ne=async()=>{var l,c,i,x;try{const{data:n,error:d}=await((x=(i=(c=(l=T)==null?void 0:l.from("user_profiles"))==null?void 0:c.select("id, full_name, email, role, department"))==null?void 0:i.eq("is_active",!0))==null?void 0:x.order("full_name"));if(d)throw d;xe(n||[])}catch(n){console.error("Error loading staff members:",n)}},K=async()=>{var l,c,i,x,n,d;try{const{data:t,error:m}=await((d=(n=(x=(i=(c=(l=T)==null?void 0:l.from("jobs"))==null?void 0:c.select(`
          *,
          vehicles (
            id, stock_number, year, make, model, owner_name
          ),
          vendors (
            id, name
          )
        `))==null?void 0:i.is("assigned_to",null))==null?void 0:x.eq("job_status","pending"))==null?void 0:n.order("created_at",{ascending:!1}))==null?void 0:d.limit(10));if(m)throw m;ce(t||[])}catch(t){console.error("Error loading unassigned jobs:",t)}},Y=async()=>{var l,c,i,x,n,d,t,m,o,P,re,le,J,de;try{const p=(i=(c=(l=new Date)==null?void 0:l.toISOString())==null?void 0:c.split("T"))==null?void 0:i[0],{data:L,error:we}=await((t=(d=(n=(x=T)==null?void 0:x.from("jobs"))==null?void 0:n.select("job_status, created_at, completed_at"))==null?void 0:d.gte("created_at",`${p}T00:00:00Z`))==null?void 0:t.lte("created_at",`${p}T23:59:59Z`));if(we)throw we;const R=new Date;R==null||R.setDate((R==null?void 0:R.getDate())-(R==null?void 0:R.getDay()));const Oe=(o=(m=R==null?void 0:R.toISOString())==null?void 0:m.split("T"))==null?void 0:o[0],{data:M,error:_e}=await((le=(re=(P=T)==null?void 0:P.from("jobs"))==null?void 0:re.select("job_status, created_at, completed_at"))==null?void 0:le.gte("created_at",`${Oe}T00:00:00Z`));if(_e)throw _e;const Ce=((J=L==null?void 0:L.filter(S=>(S==null?void 0:S.job_status)==="completed"))==null?void 0:J.length)||0,Ie=(L==null?void 0:L.length)||0,Qe=((de=M==null?void 0:M.filter(S=>(S==null?void 0:S.job_status)==="completed"))==null?void 0:de.length)||0,Le=(M==null?void 0:M.length)||0,ee=M==null?void 0:M.filter(S=>(S==null?void 0:S.job_status)==="completed"&&(S==null?void 0:S.completed_at)&&(S==null?void 0:S.created_at)),Ze=(ee==null?void 0:ee.length)>0?(ee==null?void 0:ee.reduce((S,je)=>{const Ge=new Date(je==null?void 0:je.created_at),Fe=new Date(je==null?void 0:je.completed_at);return S+(Fe-Ge)/(1e3*60*60)},0))/(ee==null?void 0:ee.length):0;oe({todayCompleted:Ce,todayTotal:Ie,todayCompletionRate:Ie>0?Ce/Ie*100:0,weekCompleted:Qe,weekTotal:Le,weekCompletionRate:Le>0?Qe/Le*100:0,avgCompletionTime:(Math==null?void 0:Math.round(Ze*100))/100})}catch(p){console.error("Error loading performance metrics:",p)}},ge=async()=>{var l,c,i,x;try{const{data:n,error:d}=await((x=(i=(c=(l=T)==null?void 0:l.from("vendors"))==null?void 0:c.select("id, name"))==null?void 0:i.eq("is_active",!0))==null?void 0:x.order("name"));if(d)throw d;W(n||[])}catch(n){console.error("Error loading vendors:",n)}},f=async()=>{var l,c,i,x,n;try{j(!0);const{data:d,error:t}=await((x=(i=(c=(l=T)==null?void 0:l.from("jobs"))==null?void 0:c.select(`
          *,
          vehicles (
            id, stock_number, year, make, model, color, owner_name, 
            owner_phone, owner_email, license_plate
          ),
          vendors (
            id, name, phone, email, specialty, contact_person
          ),
          assigned_to_profile:user_profiles!assigned_to (
            id, full_name, email, phone
          ),
          created_by_profile:user_profiles!created_by (
            id, full_name, email
          )
        `))==null?void 0:i.in("job_status",["pending","in_progress","scheduled","quality_check"]))==null?void 0:x.order("scheduled_start_time",{ascending:!0}));if(t)throw t;const m=(n=d||[])==null?void 0:n.map(o=>({...o,isOverdue:(o==null?void 0:o.promised_date)&&new Date(o==null?void 0:o.promised_date)<new Date,statusConfig:ue(o==null?void 0:o.job_status),priorityConfig:A(o==null?void 0:o.priority)}));u(m),N(m)}catch(d){console.error("Error loading appointments:",d)}finally{j(!1)}},I=()=>{var c;let l=[...a];if(z==="active"?l=l==null?void 0:l.filter(i=>["in_progress","scheduled"].includes(i==null?void 0:i.job_status)):z==="overdue"?l=l==null?void 0:l.filter(i=>i==null?void 0:i.isOverdue):z!=="all"&&(l=l==null?void 0:l.filter(i=>(i==null?void 0:i.job_status)===z)),r!=="all"&&(l=l==null?void 0:l.filter(i=>(i==null?void 0:i.vendor_id)===r)),D!=="all"&&(l=l==null?void 0:l.filter(i=>(i==null?void 0:i.priority)===D)),C!=null&&C.trim()){const i=(c=C==null?void 0:C.toLowerCase())==null?void 0:c.trim();l=l==null?void 0:l.filter(x=>{var n,d,t,m,o,P,re,le,J,de,p,L,we,R,Oe,M,_e,Ce;return((d=(n=x==null?void 0:x.job_number)==null?void 0:n.toLowerCase())==null?void 0:d.includes(i))||((m=(t=x==null?void 0:x.title)==null?void 0:t.toLowerCase())==null?void 0:m.includes(i))||((re=(P=(o=x==null?void 0:x.vehicles)==null?void 0:o.stock_number)==null?void 0:P.toLowerCase())==null?void 0:re.includes(i))||((de=(J=(le=x==null?void 0:x.vehicles)==null?void 0:le.owner_name)==null?void 0:J.toLowerCase())==null?void 0:de.includes(i))||((we=(L=(p=x==null?void 0:x.vendors)==null?void 0:p.name)==null?void 0:L.toLowerCase())==null?void 0:we.includes(i))||((Ce=(_e=`${(R=x==null?void 0:x.vehicles)==null?void 0:R.year} ${(Oe=x==null?void 0:x.vehicles)==null?void 0:Oe.make} ${(M=x==null?void 0:x.vehicles)==null?void 0:M.model}`)==null?void 0:_e.toLowerCase())==null?void 0:Ce.includes(i))})}N(l)},ue=l=>{const c={scheduled:{color:"from-blue-500 to-blue-600",bg:"bg-blue-50",text:"text-blue-700",border:"border-blue-200",icon:ve,label:"Scheduled"},in_progress:{color:"from-orange-500 to-orange-600",bg:"bg-orange-50",text:"text-orange-700",border:"border-orange-200",icon:Ne,label:"In Progress"},quality_check:{color:"from-green-500 to-green-600",bg:"bg-green-50",text:"text-green-700",border:"border-green-200",icon:ye,label:"Quality Check"},pending:{color:"from-gray-500 to-gray-600",bg:"bg-gray-50",text:"text-gray-700",border:"border-gray-200",icon:me,label:"Pending"}};return(c==null?void 0:c[l])||(c==null?void 0:c.pending)},A=l=>{const c={urgent:{color:"text-red-600",bg:"bg-red-100"},high:{color:"text-orange-600",bg:"bg-orange-100"},medium:{color:"text-yellow-600",bg:"bg-yellow-100"},low:{color:"text-green-600",bg:"bg-green-100"}};return(c==null?void 0:c[l])||(c==null?void 0:c.medium)},fe=l=>{X?be(l==null?void 0:l.id):(O(l),k(!0))},be=l=>{const c=new Set(g);c!=null&&c.has(l)?c==null||c.delete(l):c==null||c.add(l),U(c)},Se=async(l,c)=>{var i,x,n,d;try{const{error:t}=await((d=(n=(i=T)==null?void 0:i.from("jobs"))==null?void 0:n.update({job_status:c,updated_at:(x=new Date)==null?void 0:x.toISOString()}))==null?void 0:d.eq("id",l));if(t)throw t;f()}catch(t){console.error("Error updating appointment status:",t)}},$e=async l=>{var c,i,x,n;if((g==null?void 0:g.size)!==0)try{const d=Array==null?void 0:Array.from(g),{error:t}=await((n=(x=(c=T)==null?void 0:c.from("jobs"))==null?void 0:x.update({job_status:l,updated_at:(i=new Date)==null?void 0:i.toISOString()}))==null?void 0:n.in("id",d));if(t)throw t;U(new Set),f()}catch(d){console.error("Error bulk updating appointments:",d)}},De=async l=>{var c,i,x,n;if((g==null?void 0:g.size)!==0)try{const d=Array==null?void 0:Array.from(g),{error:t}=await((n=(x=(c=T)==null?void 0:c.from("jobs"))==null?void 0:x.update({assigned_to:l,updated_at:(i=new Date)==null?void 0:i.toISOString()}))==null?void 0:n.in("id",d));if(t)throw t;U(new Set),G(!1),f()}catch(d){console.error("Error bulk assigning appointments:",d)}},Ee=async(l,c)=>{var i,x,n,d;try{const{error:t}=await((d=(n=(i=T)==null?void 0:i.from("jobs"))==null?void 0:n.update({assigned_to:c,job_status:"scheduled",updated_at:(x=new Date)==null?void 0:x.toISOString()}))==null?void 0:d.eq("id",l));if(t)throw t;K(),f()}catch(t){console.error("Error assigning job:",t)}},Pe=async()=>{H(!0),await(Promise==null?void 0:Promise.all([f(),K(),Y()])),setTimeout(()=>H(!1),1e3)},y=(()=>{var d,t,m;const l=(a==null?void 0:a.length)||0,c=((d=a==null?void 0:a.filter(o=>(o==null?void 0:o.job_status)==="in_progress"))==null?void 0:d.length)||0,i=((t=a==null?void 0:a.filter(o=>(o==null?void 0:o.job_status)==="scheduled"))==null?void 0:t.length)||0,x=((m=a==null?void 0:a.filter(o=>o==null?void 0:o.isOverdue))==null?void 0:m.length)||0,n=(F==null?void 0:F.length)||0;return{total:l,inProgress:c,scheduled:i,overdue:x,unassigned:n}})();return _?e.jsx(We,{children:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-indigo-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-indigo-600 to-purple-600 flex items-center justify-center shadow-xl",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent"})}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Loading workflow center..."})]})})}):e.jsx(We,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-indigo-50",children:[e.jsx("div",{className:"bg-white/80 backdrop-blur-xl border-b border-gray-200/50 sticky top-0 z-40",children:e.jsxs("div",{className:"px-8 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 flex items-center justify-center shadow-xl",children:e.jsx(me,{className:"w-7 h-7 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent",children:"Workflow Management Center"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Active Appointments & Operations Hub"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(is,{className:"absolute left-4 top-4 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search jobs, vehicles, customers, or vendors...",value:C,onChange:l=>{var c;return q((c=l==null?void 0:l.target)==null?void 0:c.value)},className:"pl-12 pr-6 py-3.5 border border-gray-200 rounded-2xl w-96 focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md transition-all duration-200 text-gray-900 placeholder-gray-500"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:()=>se(!Z),className:`px-4 py-3 rounded-xl border text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 flex items-center space-x-2 ${Z?"bg-indigo-50 border-indigo-200 text-indigo-600":"border-gray-200"}`,children:[e.jsx(He,{className:"w-4 h-4"}),e.jsx("span",{children:"Analytics"})]}),e.jsxs("button",{onClick:()=>E(!X),className:`px-4 py-3 rounded-xl border text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 flex items-center space-x-2 ${X?"bg-orange-50 border-orange-200 text-orange-600":"border-gray-200"}`,children:[e.jsx(xs,{className:"w-4 h-4"}),e.jsx("span",{children:"Bulk Ops"}),(g==null?void 0:g.size)>0&&e.jsx("span",{className:"bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full text-xs font-semibold",children:g==null?void 0:g.size})]}),e.jsxs("button",{onClick:Pe,disabled:B,className:`px-4 py-3 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 flex items-center space-x-2 ${B?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(Ne,{className:`w-4 h-4 ${B?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]}),e.jsxs("button",{onClick:()=>he("/calendar"),className:"bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-3 rounded-xl hover:from-emerald-700 hover:to-teal-700 flex items-center space-x-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium",children:[e.jsx(ve,{className:"w-5 h-5"}),e.jsx("span",{children:"Schedule New"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-50 rounded-xl border border-blue-200",children:[e.jsx(ve,{className:"w-4 h-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[y==null?void 0:y.total," Total Active"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-orange-50 rounded-xl border border-orange-200",children:[e.jsx(Ne,{className:"w-4 h-4 text-orange-600"}),e.jsxs("span",{className:"text-sm font-medium text-orange-800",children:[y==null?void 0:y.inProgress," In Progress"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-green-50 rounded-xl border border-green-200",children:[e.jsx(ye,{className:"w-4 h-4 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium text-green-800",children:[y==null?void 0:y.scheduled," Scheduled"]})]}),(y==null?void 0:y.overdue)>0&&e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-red-50 rounded-xl border border-red-200",children:[e.jsx(Re,{className:"w-4 h-4 text-red-600"}),e.jsxs("span",{className:"text-sm font-medium text-red-800",children:[y==null?void 0:y.overdue," Overdue"]})]}),(y==null?void 0:y.unassigned)>0&&e.jsxs("div",{className:"flex items-center space-x-2 px-4 py-2 bg-purple-50 rounded-xl border border-purple-200",children:[e.jsx(ke,{className:"w-4 h-4 text-purple-600"}),e.jsxs("span",{className:"text-sm font-medium text-purple-800",children:[y==null?void 0:y.unassigned," Unassigned"]})]})]}),(y==null?void 0:y.unassigned)>0&&e.jsxs("button",{onClick:()=>G(!0),className:"flex items-center space-x-2 px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-xl transition-all duration-200 text-sm font-medium",children:[e.jsx(Ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Assign Jobs"}),e.jsx(ts,{className:"w-4 h-4"})]})]})]})}),Z&&e.jsx(vs,{metrics:te,onClose:()=>se(!1)}),X&&(g==null?void 0:g.size)>0&&e.jsx(js,{selectedCount:g==null?void 0:g.size,onStatusUpdate:$e,onAssign:()=>G(!0),onCancel:()=>{U(new Set),E(!1)}}),ae&&e.jsx(Ns,{unassignedJobs:F,staffMembers:ie,selectedAppointments:g,onQuickAssign:Ee,onBulkAssign:De,onClose:()=>G(!1)}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex-1 p-8",style:{width:h?"60%":"100%"},children:[e.jsx(ms,{statusFilter:z,setStatusFilter:$,vendorFilter:r,setVendorFilter:w,priorityFilter:D,setPriorityFilter:V,vendors:Q}),(s==null?void 0:s.length)>0?e.jsx("div",{className:"space-y-4",children:s==null?void 0:s.map(l=>e.jsx(us,{appointment:l,onClick:()=>fe(l),onUpdateStatus:Se,isSelected:g==null?void 0:g.has(l==null?void 0:l.id),bulkMode:X,onToggleSelect:()=>be(l==null?void 0:l.id)},l==null?void 0:l.id))}):e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center",children:e.jsx(me,{className:"w-12 h-12 text-indigo-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Active Appointments"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:C||z!=="all"||r!=="all"||D!=="all"?"No appointments match your current filters. Try adjusting your search criteria.":"All appointments are completed or there are no scheduled appointments at this time."})]})]}),h&&b&&e.jsx("div",{className:"w-2/5 border-l border-gray-200/50",children:e.jsx(fs,{appointment:b,onClose:()=>k(!1),onUpdate:f})})]})]})})};export{Ss as default};
//# sourceMappingURL=index-C_6P4HaC.js.map
