import{s}from"./index-Ba5jGmMi.js";import{s as n,t as o}from"./options-CllavUpK.js";async function m(t,{activeOnly:a=!0}={}){if(!t)return[];try{let e=s.from("vendors").select("id, name, is_active, phone, email, specialty").order("name",{ascending:!0});a&&(e=e.eq("is_active",!0)),e=e.or(`org_id.eq.${t},org_id.is.null`);const i=await n(e);return o(i,{labelKey:"name",valueKey:"id"})}catch(e){return console.error("listVendorsByOrg error:",(e==null?void 0:e.message)||e),[]}}async function y(t,{activeOnly:a=!0}={}){if(!t)return[];try{let e=s.from("products").select("id, name, brand, unit_price, is_active, op_code, cost, category").order("name",{ascending:!0});a&&(e=e.eq("is_active",!0)),e=e.or(`org_id.eq.${t},org_id.is.null`);const i=await n(e);return(Array.isArray(i)?i:[]).map(r=>({...r,...o([r],{labelKey:"name",valueKey:"id"})[0],label:r.brand?`${r.name} - ${r.brand}`:r.name}))}catch(e){return console.error("listProductsByOrg error:",(e==null?void 0:e.message)||e),[]}}async function f(t,{departments:a=[],roles:e=[],activeOnly:i=!0}={}){if(!t)return[];try{let r=s.from("user_profiles").select("id, full_name, email, department, role, is_active, vendor_id").order("full_name",{ascending:!0});r=r.eq("org_id",t),i&&(r=r.eq("is_active",!0)),a.length&&(r=r.in("department",a)),e.length&&(r=r.in("role",e));const l=await n(r);return(Array.isArray(l)?l:[]).map(c=>({...c,...o([c],{labelKey:"full_name",valueKey:"id"})[0]}))}catch(r){return console.error("listStaffByOrg error:",(r==null?void 0:r.message)||r),[]}}async function _(t,{activeOnly:a=!0}={}){if(!t)return[];try{let e=s.from("sms_templates").select("id, name, body, is_active").order("created_at",{ascending:!0});a&&(e=e.eq("is_active",!0)),e=e.or(`org_id.eq.${t},org_id.is.null`);const i=await n(e);return o(i,{labelKey:"name",valueKey:"id"})}catch(e){return console.error("listSmsTemplatesByOrg error:",(e==null?void 0:e.message)||e),[]}}export{y as a,f as b,_ as c,m as l};
//# sourceMappingURL=tenantService-B2AT0c2u.js.map
