{"version":3,"file":"index-BaU-ZH7P.js","sources":["../../src/pages/currently-active-appointments/components/AppointmentCard.jsx","../../src/pages/currently-active-appointments/components/AppointmentDetailPanel.jsx","../../src/pages/currently-active-appointments/components/FilterControls.jsx","../../src/pages/currently-active-appointments/components/BulkOperationsPanel.jsx","../../src/pages/currently-active-appointments/components/PerformanceWidget.jsx","../../src/pages/currently-active-appointments/components/AssignmentQuickPanel.jsx","../../src/pages/currently-active-appointments/index.jsx"],"sourcesContent":["import React from 'react'\r\nimport {\r\n  Calendar,\r\n  User,\r\n  Building2,\r\n  Phone,\r\n  Mail,\r\n  AlertTriangle,\r\n  Car,\r\n  ArrowRight,\r\n  Check,\r\n} from 'lucide-react'\r\n\r\nconst AppointmentCard = ({\r\n  appointment,\r\n  onClick,\r\n  onUpdateStatus,\r\n  isSelected,\r\n  bulkMode,\r\n  onToggleSelect,\r\n}) => {\r\n  const StatusIcon = appointment?.statusConfig?.icon\r\n  const isOverdue = appointment?.isOverdue\r\n\r\n  const formatTime = (timestamp) => {\r\n    if (!timestamp) return 'Not scheduled'\r\n    return new Date(timestamp)?.toLocaleString('en-US', {\r\n      weekday: 'short',\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: 'numeric',\r\n      minute: '2-digit',\r\n    })\r\n  }\r\n\r\n  const getTimeRemaining = () => {\r\n    if (!appointment?.promised_date) return null\r\n\r\n    const now = new Date()\r\n    const promisedDate = new Date(appointment?.promised_date)\r\n    const diffMs = promisedDate - now\r\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60))\r\n    const diffDays = Math.floor(diffHours / 24)\r\n\r\n    if (diffMs < 0) return 'Overdue'\r\n    if (diffDays > 0) return `${diffDays}d ${diffHours % 24}h remaining`\r\n    if (diffHours > 0) return `${diffHours}h remaining`\r\n    return 'Due soon'\r\n  }\r\n\r\n  const timeRemaining = getTimeRemaining()\r\n\r\n  const handleStatusChange = (newStatus, e) => {\r\n    e?.stopPropagation()\r\n    onUpdateStatus?.(appointment?.id, newStatus)\r\n  }\r\n\r\n  const handleCardClick = (e) => {\r\n    if (bulkMode && onToggleSelect) {\r\n      e?.stopPropagation()\r\n      onToggleSelect()\r\n    } else {\r\n      onClick()\r\n    }\r\n  }\r\n\r\n  const handleCheckboxClick = (e) => {\r\n    e?.stopPropagation()\r\n    onToggleSelect?.()\r\n  }\r\n\r\n  return (\r\n    <div\r\n      onClick={handleCardClick}\r\n      className={`group relative bg-white rounded-2xl shadow-sm border transition-all duration-300 overflow-hidden cursor-pointer hover:shadow-xl hover:border-gray-200 ${\r\n        isOverdue ? 'border-red-200 bg-red-50/30' : 'border-gray-100'\r\n      } ${isSelected ? 'ring-2 ring-indigo-500 border-indigo-200' : ''} ${\r\n        bulkMode ? 'hover:ring-2 hover:ring-indigo-300' : ''\r\n      }`}\r\n    >\r\n      {/* Premium gradient overlay */}\r\n      <div\r\n        className={`absolute top-0 left-0 w-full h-1 ${\r\n          isSelected\r\n            ? 'bg-gradient-to-r from-indigo-500 to-purple-500'\r\n            : isOverdue\r\n              ? 'bg-gradient-to-r from-red-500 to-red-600'\r\n              : 'bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600'\r\n        }`}\r\n      ></div>\r\n\r\n      {/* Bulk Selection Checkbox */}\r\n      {bulkMode && (\r\n        <div className=\"absolute top-4 left-4 z-10\">\r\n          <div\r\n            onClick={handleCheckboxClick}\r\n            className={`w-6 h-6 rounded-lg border-2 flex items-center justify-center cursor-pointer transition-all duration-200 ${\r\n              isSelected\r\n                ? 'bg-indigo-500 border-indigo-500 text-white'\r\n                : 'bg-white border-gray-300 hover:border-indigo-400'\r\n            }`}\r\n          >\r\n            {isSelected && <Check className=\"w-4 h-4\" />}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Overdue Alert Banner */}\r\n      {isOverdue && (\r\n        <div className=\"bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-2 flex items-center space-x-2\">\r\n          <AlertTriangle className=\"w-4 h-4\" />\r\n          <span className=\"text-sm font-semibold\">OVERDUE - Immediate Attention Required</span>\r\n        </div>\r\n      )}\r\n\r\n      <div className={`p-6 ${bulkMode ? 'ml-8' : ''}`}>\r\n        {/* Header */}\r\n        <div className=\"flex items-start justify-between mb-4\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div\r\n              className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ${\r\n                isSelected\r\n                  ? 'bg-gradient-to-br from-indigo-600 to-indigo-700'\r\n                  : isOverdue\r\n                    ? 'bg-gradient-to-br from-red-600 to-red-700'\r\n                    : 'bg-gradient-to-br from-indigo-600 to-purple-700'\r\n              }`}\r\n            >\r\n              <StatusIcon className=\"w-6 h-6 text-white\" />\r\n            </div>\r\n            <div>\r\n              <div className=\"flex items-center space-x-3 mb-1\">\r\n                <span className=\"text-lg font-bold text-gray-900\">#{appointment?.job_number}</span>\r\n                <div\r\n                  className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${appointment?.priorityConfig?.bg} ${appointment?.priorityConfig?.color}`}\r\n                >\r\n                  {appointment?.priority?.toUpperCase()}\r\n                </div>\r\n                {(appointment?.has_active_loaner || appointment?.customer_needs_loaner) && (\r\n                  <span className=\"px-1.5 py-0.5 rounded-full text-[10px] font-semibold bg-violet-100 text-violet-800 whitespace-nowrap\">\r\n                    Loaner\r\n                  </span>\r\n                )}\r\n                {appointment?.assigned_to_profile && (\r\n                  <div className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-700\">\r\n                    <User className=\"w-3 h-3 mr-1\" />\r\n                    {appointment?.assigned_to_profile?.full_name?.split(' ')?.[0]}\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <h3 className=\"text-base font-semibold text-gray-900 leading-tight\">\r\n                {appointment?.title}\r\n              </h3>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Status Badge */}\r\n          <div\r\n            className={`inline-flex items-center px-3 py-1.5 rounded-full text-xs font-semibold ${appointment?.statusConfig?.bg} ${appointment?.statusConfig?.text} ${appointment?.statusConfig?.border} border`}\r\n          >\r\n            <StatusIcon className=\"w-3 h-3 mr-1.5\" />\r\n            {appointment?.statusConfig?.label}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Vehicle & Customer Info */}\r\n        <div className=\"grid grid-cols-2 gap-6 mb-6\">\r\n          {/* Vehicle Info */}\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center space-x-2 text-sm text-gray-600 font-medium\">\r\n              <Car className=\"w-4 h-4\" />\r\n              <span>Vehicle</span>\r\n            </div>\r\n            <div>\r\n              <div className=\"font-semibold text-gray-900\">\r\n                {appointment?.vehicles?.year} {appointment?.vehicles?.make}{' '}\r\n                {appointment?.vehicles?.model}\r\n              </div>\r\n              <div className=\"text-sm text-gray-600 space-y-1\">\r\n                {appointment?.vehicles?.stock_number && (\r\n                  <div>Stock: #{appointment?.vehicles?.stock_number}</div>\r\n                )}\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div\r\n                    className={`w-3 h-3 rounded-full`}\r\n                    style={{\r\n                      backgroundColor: appointment?.vehicles?.color?.toLowerCase() || '#gray',\r\n                    }}\r\n                  ></div>\r\n                  <span>{appointment?.vehicles?.color}</span>\r\n                  <span>â€¢</span>\r\n                  <span>{appointment?.vehicles?.license_plate}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Customer Info */}\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center space-x-2 text-sm text-gray-600 font-medium\">\r\n              <User className=\"w-4 h-4\" />\r\n              <span>Customer</span>\r\n            </div>\r\n            <div>\r\n              <div className=\"font-semibold text-gray-900\">\r\n                {appointment?.vehicles?.owner_name || 'No customer info'}\r\n              </div>\r\n              <div className=\"text-sm text-gray-600 space-y-1\">\r\n                {appointment?.vehicles?.owner_phone && (\r\n                  <div className=\"flex items-center\">\r\n                    <Phone className=\"w-3 h-3 mr-2 text-gray-400\" />\r\n                    {appointment?.vehicles?.owner_phone}\r\n                  </div>\r\n                )}\r\n                {appointment?.vehicles?.owner_email && (\r\n                  <div className=\"flex items-center\">\r\n                    <Mail className=\"w-3 h-3 mr-2 text-gray-400\" />\r\n                    <div className=\"truncate\">{appointment?.vehicles?.owner_email}</div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Vendor & Schedule Info */}\r\n        <div className=\"grid grid-cols-2 gap-6 mb-6\">\r\n          {/* Vendor Info */}\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center space-x-2 text-sm text-gray-600 font-medium\">\r\n              <Building2 className=\"w-4 h-4\" />\r\n              <span>Vendor</span>\r\n            </div>\r\n            <div>\r\n              {appointment?.vendors ? (\r\n                <>\r\n                  <div className=\"font-semibold text-gray-900\">{appointment?.vendors?.name}</div>\r\n                  <div className=\"text-sm text-gray-600\">{appointment?.vendors?.specialty}</div>\r\n                </>\r\n              ) : (\r\n                <div className=\"text-sm text-gray-500 italic\">No vendor assigned</div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Schedule Info */}\r\n          <div className=\"space-y-2\">\r\n            <div className=\"flex items-center space-x-2 text-sm text-gray-600 font-medium\">\r\n              <Calendar className=\"w-4 h-4\" />\r\n              <span>Schedule</span>\r\n            </div>\r\n            <div>\r\n              <div className=\"text-sm text-gray-900 font-medium\">\r\n                {formatTime(appointment?.scheduled_start_time)}\r\n              </div>\r\n              {timeRemaining && (\r\n                <div\r\n                  className={`text-xs font-semibold ${\r\n                    isOverdue\r\n                      ? 'text-red-600'\r\n                      : timeRemaining?.includes('remaining')\r\n                        ? 'text-green-600'\r\n                        : 'text-orange-600'\r\n                  }`}\r\n                >\r\n                  {timeRemaining}\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quick Actions */}\r\n        {!bulkMode && (\r\n          <div className=\"flex items-center justify-between pt-4 border-t border-gray-100\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              {/* Quick Status Updates */}\r\n              {appointment?.job_status === 'scheduled' && (\r\n                <button\r\n                  onClick={(e) => handleStatusChange('in_progress', e)}\r\n                  className=\"px-3 py-1.5 text-xs font-medium bg-orange-100 text-orange-700 rounded-lg hover:bg-orange-200 transition-colors duration-200\"\r\n                >\r\n                  Start Work\r\n                </button>\r\n              )}\r\n              {appointment?.job_status === 'in_progress' && (\r\n                <button\r\n                  onClick={(e) => handleStatusChange('quality_check', e)}\r\n                  className=\"px-3 py-1.5 text-xs font-medium bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-colors duration-200\"\r\n                >\r\n                  Quality Check\r\n                </button>\r\n              )}\r\n              {appointment?.job_status === 'quality_check' && (\r\n                <button\r\n                  onClick={(e) => handleStatusChange('completed', e)}\r\n                  className=\"px-3 py-1.5 text-xs font-medium bg-blue-100 text-blue-700 rounded-lg hover:bg-blue-200 transition-colors duration-200\"\r\n                >\r\n                  Complete\r\n                </button>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex items-center text-sm text-gray-600 group-hover:text-indigo-600 transition-colors\">\r\n              <span className=\"mr-2\">View Details</span>\r\n              <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform duration-200\" />\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Bulk Mode Indicator */}\r\n        {bulkMode && (\r\n          <div className=\"pt-4 border-t border-gray-100 text-center\">\r\n            <div className=\"text-xs text-gray-500\">\r\n              {isSelected ? 'Selected for bulk operation' : 'Click to select for bulk operation'}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n// Memoize to avoid re-rendering large lists when irrelevant state changes\r\nfunction propsAreEqual(prev, next) {\r\n  const a = prev.appointment || {}\r\n  const b = next.appointment || {}\r\n  return (\r\n    a.id === b.id &&\r\n    a.job_status === b.job_status &&\r\n    a.promised_date === b.promised_date &&\r\n    a.scheduled_start_time === b.scheduled_start_time &&\r\n    a.scheduled_end_time === b.scheduled_end_time &&\r\n    prev.isSelected === next.isSelected &&\r\n    prev.bulkMode === next.bulkMode\r\n  )\r\n}\r\n\r\nexport default React.memo(AppointmentCard, propsAreEqual)\r\n","import React, { useState, useEffect } from 'react';\r\nimport { X, Clock, User, Building2, Phone, MessageCircle, FileText, Edit3, Save, AlertTriangle, RefreshCw, Car, DollarSign, MapPin, CalendarClock } from 'lucide-react';\r\nimport { supabase } from '../../../lib/supabase';\r\n\r\nconst AppointmentDetailPanel = ({ appointment, onClose, onUpdate }) => {\r\n  const [communications, setCommunications] = useState([]);\r\n  const [jobParts, setJobParts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [editingNotes, setEditingNotes] = useState(false);\r\n  const [notes, setNotes] = useState(appointment?.calendar_notes || '');\r\n  const [newCommunication, setNewCommunication] = useState('');\r\n  const [sendingMessage, setSendingMessage] = useState(false);\r\n\r\n  const StatusIcon = appointment?.statusConfig?.icon;\r\n  const isOverdue = appointment?.isOverdue;\r\n\r\n  useEffect(() => {\r\n    loadAppointmentDetails();\r\n  }, [appointment?.id]);\r\n\r\n  const loadAppointmentDetails = async () => {\r\n    if (!appointment?.id) return;\r\n    \r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Load communications\r\n      const { data: commsData, error: commsError } = await supabase?.from('communications')?.select(`\r\n          *,\r\n          sent_by_profile:user_profiles!sent_by (full_name, email)\r\n        `)?.eq('job_id', appointment?.id)?.order('sent_at', { ascending: false });\r\n\r\n      if (commsError) throw commsError;\r\n      setCommunications(commsData || []);\r\n\r\n      // Load job parts/products\r\n      const { data: partsData, error: partsError } = await supabase?.from('job_parts')?.select(`\r\n          *,\r\n          products (name, estimated_cost, vendor_id)\r\n        `)?.eq('job_id', appointment?.id);\r\n\r\n      if (partsError) throw partsError;\r\n      setJobParts(partsData || []);\r\n      \r\n    } catch (error) {\r\n      console.error('Error loading appointment details:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveNotes = async () => {\r\n    try {\r\n      const { error } = await supabase?.from('jobs')?.update({ \r\n          calendar_notes: notes,\r\n          updated_at: new Date()?.toISOString()\r\n        })?.eq('id', appointment?.id);\r\n\r\n      if (error) throw error;\r\n      \r\n      setEditingNotes(false);\r\n      onUpdate?.();\r\n    } catch (error) {\r\n      console.error('Error saving notes:', error);\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = async () => {\r\n    if (!newCommunication?.trim()) return;\r\n    \r\n    try {\r\n      setSendingMessage(true);\r\n      \r\n      const { error } = await supabase?.from('communications')?.insert({\r\n          job_id: appointment?.id,\r\n          vehicle_id: appointment?.vehicle_id,\r\n          communication_type: 'note',\r\n          message: newCommunication?.trim(),\r\n          sent_at: new Date()?.toISOString(),\r\n          is_successful: true\r\n        });\r\n\r\n      if (error) throw error;\r\n      \r\n      setNewCommunication('');\r\n      loadAppointmentDetails();\r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n    } finally {\r\n      setSendingMessage(false);\r\n    }\r\n  };\r\n\r\n  const formatTime = (timestamp) => {\r\n    if (!timestamp) return 'Not scheduled';\r\n    return new Date(timestamp)?.toLocaleString('en-US', {\r\n      weekday: 'long',\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: 'numeric',\r\n      minute: '2-digit'\r\n    });\r\n  };\r\n\r\n  const formatCurrency = (amount) => {\r\n    if (!amount) return '$0.00';\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: 'USD'\r\n    })?.format(amount);\r\n  };\r\n\r\n  const getTimeRemaining = () => {\r\n    if (!appointment?.promised_date) return null;\r\n    \r\n    const now = new Date();\r\n    const promisedDate = new Date(appointment?.promised_date);\r\n    const diffMs = promisedDate - now;\r\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\r\n    const diffDays = Math.floor(diffHours / 24);\r\n\r\n    if (diffMs < 0) return { text: 'Overdue', urgent: true };\r\n    if (diffDays > 0) return { text: `${diffDays}d ${diffHours % 24}h remaining`, urgent: false };\r\n    if (diffHours > 0) return { text: `${diffHours}h remaining`, urgent: diffHours <= 2 };\r\n    return { text: 'Due very soon', urgent: true };\r\n  };\r\n\r\n  const timeRemaining = getTimeRemaining();\r\n  const totalEstimatedCost = jobParts?.reduce((sum, part) => sum + (parseFloat(part?.products?.estimated_cost) || 0), 0);\r\n\r\n  return (\r\n    <div className=\"h-full flex flex-col bg-white/95 backdrop-blur-xl\">\r\n      {/* Header */}\r\n      <div className=\"p-6 border-b border-gray-200/50\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h3 className=\"text-xl font-bold text-gray-900\">Appointment Details</h3>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-10 h-10 rounded-xl bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-all duration-200\"\r\n          >\r\n            <X className=\"w-5 h-5 text-gray-600\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Appointment Overview */}\r\n        <div className={`rounded-2xl p-6 border ${\r\n          isOverdue ? 'bg-gradient-to-r from-red-50 to-red-100 border-red-200' : 'bg-gradient-to-r from-indigo-50 to-purple-50 border-indigo-200'\r\n        }`}>\r\n          <div className=\"flex items-start justify-between mb-4\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className={`w-12 h-12 rounded-xl flex items-center justify-center shadow-lg ${\r\n                isOverdue ? 'bg-gradient-to-br from-red-600 to-red-700' : 'bg-gradient-to-br from-indigo-600 to-purple-700'\r\n              }`}>\r\n                <StatusIcon className=\"w-6 h-6 text-white\" />\r\n              </div>\r\n              <div>\r\n                <div className=\"flex items-center space-x-3 mb-1\">\r\n                  <span className=\"text-lg font-bold text-gray-900\">\r\n                    #{appointment?.job_number}\r\n                  </span>\r\n                  <div className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${appointment?.priorityConfig?.bg} ${appointment?.priorityConfig?.color}`}>\r\n                    {appointment?.priority?.toUpperCase()}\r\n                  </div>\r\n                </div>\r\n                <h4 className=\"text-base font-semibold text-gray-900\">{appointment?.title}</h4>\r\n              </div>\r\n            </div>\r\n\r\n            <div className={`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-semibold ${appointment?.statusConfig?.bg} ${appointment?.statusConfig?.text} ${appointment?.statusConfig?.border} border`}>\r\n              <StatusIcon className=\"w-4 h-4 mr-2\" />\r\n              {appointment?.statusConfig?.label}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Time Remaining Alert */}\r\n          {timeRemaining && (\r\n            <div className={`flex items-center space-x-2 px-4 py-2 rounded-xl ${\r\n              timeRemaining?.urgent ? 'bg-red-100 text-red-800 border border-red-200' : 'bg-green-100 text-green-800 border border-green-200'\r\n            }`}>\r\n              {timeRemaining?.urgent ? (\r\n                <AlertTriangle className=\"w-4 h-4\" />\r\n              ) : (\r\n                <Clock className=\"w-4 h-4\" />\r\n              )}\r\n              <span className=\"text-sm font-semibold\">{timeRemaining?.text}</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* Scrollable Content */}\r\n      <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\r\n        {/* Vehicle & Customer Information */}\r\n        <div className=\"grid grid-cols-1 gap-6\">\r\n          {/* Vehicle Details */}\r\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\r\n            <div className=\"flex items-center space-x-2 mb-4\">\r\n              <Car className=\"w-5 h-5 text-gray-600\" />\r\n              <h5 className=\"font-semibold text-gray-900\">Vehicle Information</h5>\r\n            </div>\r\n            \r\n            <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n              <div>\r\n                <span className=\"font-medium text-gray-700\">Vehicle:</span>\r\n                <div className=\"text-gray-900 font-semibold\">\r\n                  {appointment?.vehicles?.year} {appointment?.vehicles?.make} {appointment?.vehicles?.model}\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <span className=\"font-medium text-gray-700\">Stock #:</span>\r\n                <div className=\"text-gray-900\">{appointment?.vehicles?.stock_number || 'N/A'}</div>\r\n              </div>\r\n              <div>\r\n                <span className=\"font-medium text-gray-700\">Color:</span>\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <div className={`w-4 h-4 rounded-full border`} style={{backgroundColor: appointment?.vehicles?.color?.toLowerCase() || '#gray'}}></div>\r\n                  <span className=\"text-gray-900\">{appointment?.vehicles?.color}</span>\r\n                </div>\r\n              </div>\r\n              <div>\r\n                <span className=\"font-medium text-gray-700\">License:</span>\r\n                <div className=\"text-gray-900\">{appointment?.vehicles?.license_plate || 'N/A'}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Customer Details */}\r\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\r\n            <div className=\"flex items-center space-x-2 mb-4\">\r\n              <User className=\"w-5 h-5 text-gray-600\" />\r\n              <h5 className=\"font-semibold text-gray-900\">Customer Information</h5>\r\n            </div>\r\n            \r\n            <div className=\"space-y-3 text-sm\">\r\n              <div>\r\n                <span className=\"font-medium text-gray-700\">Name:</span>\r\n                <div className=\"text-gray-900 font-semibold\">{appointment?.vehicles?.owner_name || 'No customer info'}</div>\r\n              </div>\r\n              {appointment?.vehicles?.owner_phone && (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <span className=\"font-medium text-gray-700\">Phone:</span>\r\n                    <div className=\"text-gray-900\">{appointment?.vehicles?.owner_phone}</div>\r\n                  </div>\r\n                  <a \r\n                    href={`tel:${appointment?.vehicles?.owner_phone}`}\r\n                    className=\"text-indigo-600 hover:text-indigo-700 font-medium\"\r\n                  >\r\n                    Call\r\n                  </a>\r\n                </div>\r\n              )}\r\n              {appointment?.vehicles?.owner_email && (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex-1 min-w-0\">\r\n                    <span className=\"font-medium text-gray-700\">Email:</span>\r\n                    <div className=\"text-gray-900 truncate\">{appointment?.vehicles?.owner_email}</div>\r\n                  </div>\r\n                  <a \r\n                    href={`mailto:${appointment?.vehicles?.owner_email}`}\r\n                    className=\"text-indigo-600 hover:text-indigo-700 font-medium ml-2\"\r\n                  >\r\n                    Email\r\n                  </a>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Schedule & Vendor Information */}\r\n        <div className=\"grid grid-cols-1 gap-6\">\r\n          {/* Schedule Details */}\r\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\r\n            <div className=\"flex items-center space-x-2 mb-4\">\r\n              <CalendarClock className=\"w-5 h-5 text-gray-600\" />\r\n              <h5 className=\"font-semibold text-gray-900\">Schedule Information</h5>\r\n            </div>\r\n            \r\n            <div className=\"space-y-3 text-sm\">\r\n              <div className=\"grid grid-cols-2 gap-4\">\r\n                <div>\r\n                  <span className=\"font-medium text-gray-700\">Scheduled Start:</span>\r\n                  <div className=\"text-gray-900\">{formatTime(appointment?.scheduled_start_time)}</div>\r\n                </div>\r\n                <div>\r\n                  <span className=\"font-medium text-gray-700\">Scheduled End:</span>\r\n                  <div className=\"text-gray-900\">{formatTime(appointment?.scheduled_end_time)}</div>\r\n                </div>\r\n              </div>\r\n              {appointment?.promised_date && (\r\n                <div>\r\n                  <span className=\"font-medium text-gray-700\">Promised Completion:</span>\r\n                  <div className=\"text-gray-900\">{formatTime(appointment?.promised_date)}</div>\r\n                </div>\r\n              )}\r\n              {appointment?.location && (\r\n                <div className=\"flex items-start space-x-2\">\r\n                  <MapPin className=\"w-4 h-4 text-gray-400 mt-0.5\" />\r\n                  <div>\r\n                    <span className=\"font-medium text-gray-700\">Location:</span>\r\n                    <div className=\"text-gray-900\">{appointment?.location}</div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Vendor Details */}\r\n          {appointment?.vendors && (\r\n            <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\r\n              <div className=\"flex items-center space-x-2 mb-4\">\r\n                <Building2 className=\"w-5 h-5 text-gray-600\" />\r\n                <h5 className=\"font-semibold text-gray-900\">Vendor Information</h5>\r\n              </div>\r\n              \r\n              <div className=\"space-y-3 text-sm\">\r\n                <div>\r\n                  <span className=\"font-medium text-gray-700\">Vendor:</span>\r\n                  <div className=\"text-gray-900 font-semibold\">{appointment?.vendors?.name}</div>\r\n                </div>\r\n                {appointment?.vendors?.specialty && (\r\n                  <div>\r\n                    <span className=\"font-medium text-gray-700\">Specialty:</span>\r\n                    <div className=\"text-gray-900\">{appointment?.vendors?.specialty}</div>\r\n                  </div>\r\n                )}\r\n                {appointment?.vendors?.contact_person && (\r\n                  <div>\r\n                    <span className=\"font-medium text-gray-700\">Contact:</span>\r\n                    <div className=\"text-gray-900\">{appointment?.vendors?.contact_person}</div>\r\n                  </div>\r\n                )}\r\n                <div className=\"flex items-center space-x-4\">\r\n                  {appointment?.vendors?.phone && (\r\n                    <a \r\n                      href={`tel:${appointment?.vendors?.phone}`}\r\n                      className=\"text-indigo-600 hover:text-indigo-700 font-medium\"\r\n                    >\r\n                      Call Vendor\r\n                    </a>\r\n                  )}\r\n                  {appointment?.vendors?.email && (\r\n                    <a \r\n                      href={`mailto:${appointment?.vendors?.email}`}\r\n                      className=\"text-indigo-600 hover:text-indigo-700 font-medium\"\r\n                    >\r\n                      Email Vendor\r\n                    </a>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Cost Information */}\r\n        {(appointment?.estimated_cost || totalEstimatedCost > 0 || appointment?.actual_cost) && (\r\n          <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\r\n            <div className=\"flex items-center space-x-2 mb-4\">\r\n              <DollarSign className=\"w-5 h-5 text-gray-600\" />\r\n              <h5 className=\"font-semibold text-gray-900\">Cost Information</h5>\r\n            </div>\r\n            \r\n            <div className=\"grid grid-cols-3 gap-4 text-sm\">\r\n              {appointment?.estimated_cost && (\r\n                <div>\r\n                  <span className=\"font-medium text-gray-700\">Estimated Labor:</span>\r\n                  <div className=\"text-gray-900 font-semibold\">{formatCurrency(appointment?.estimated_cost)}</div>\r\n                </div>\r\n              )}\r\n              {totalEstimatedCost > 0 && (\r\n                <div>\r\n                  <span className=\"font-medium text-gray-700\">Estimated Parts:</span>\r\n                  <div className=\"text-gray-900 font-semibold\">{formatCurrency(totalEstimatedCost)}</div>\r\n                </div>\r\n              )}\r\n              {appointment?.actual_cost && (\r\n                <div>\r\n                  <span className=\"font-medium text-gray-700\">Actual Cost:</span>\r\n                  <div className=\"text-gray-900 font-semibold\">{formatCurrency(appointment?.actual_cost)}</div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Notes Section */}\r\n        <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <FileText className=\"w-5 h-5 text-gray-600\" />\r\n              <h5 className=\"font-semibold text-gray-900\">Notes</h5>\r\n            </div>\r\n            <button\r\n              onClick={() => editingNotes ? handleSaveNotes() : setEditingNotes(true)}\r\n              className=\"text-indigo-600 hover:text-indigo-700 font-medium text-sm flex items-center space-x-1\"\r\n            >\r\n              {editingNotes ? (\r\n                <>\r\n                  <Save className=\"w-4 h-4\" />\r\n                  <span>Save</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Edit3 className=\"w-4 h-4\" />\r\n                  <span>Edit</span>\r\n                </>\r\n              )}\r\n            </button>\r\n          </div>\r\n          \r\n          {editingNotes ? (\r\n            <textarea\r\n              value={notes}\r\n              onChange={(e) => setNotes(e?.target?.value)}\r\n              placeholder=\"Add appointment notes...\"\r\n              className=\"w-full h-32 p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none text-sm\"\r\n            />\r\n          ) : (\r\n            <div className=\"text-sm text-gray-600 whitespace-pre-wrap\">\r\n              {appointment?.calendar_notes || notes || 'No notes available'}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Communications Section */}\r\n        <div className=\"bg-white rounded-2xl p-6 shadow-sm border border-gray-100\">\r\n          <div className=\"flex items-center space-x-2 mb-4\">\r\n            <MessageCircle className=\"w-5 h-5 text-gray-600\" />\r\n            <h5 className=\"font-semibold text-gray-900\">Communications</h5>\r\n          </div>\r\n\r\n          {/* Add New Communication */}\r\n          <div className=\"mb-6\">\r\n            <div className=\"flex space-x-3\">\r\n              <textarea\r\n                value={newCommunication}\r\n                onChange={(e) => setNewCommunication(e?.target?.value)}\r\n                placeholder=\"Add a communication note...\"\r\n                className=\"flex-1 p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent resize-none text-sm\"\r\n                rows=\"2\"\r\n              />\r\n              <button\r\n                onClick={handleSendMessage}\r\n                disabled={!newCommunication?.trim() || sendingMessage}\r\n                className=\"px-4 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2 text-sm font-medium\"\r\n              >\r\n                {sendingMessage ? (\r\n                  <RefreshCw className=\"w-4 h-4 animate-spin\" />\r\n                ) : (\r\n                  <MessageCircle className=\"w-4 h-4\" />\r\n                )}\r\n                <span>Add Note</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Communications List */}\r\n          {loading ? (\r\n            <div className=\"text-center py-8\">\r\n              <RefreshCw className=\"w-6 h-6 animate-spin mx-auto mb-2 text-gray-400\" />\r\n              <p className=\"text-sm text-gray-600\">Loading communications...</p>\r\n            </div>\r\n          ) : communications?.length > 0 ? (\r\n            <div className=\"space-y-4 max-h-64 overflow-y-auto\">\r\n              {communications?.map((comm, index) => (\r\n                <div key={comm?.id || index} className=\"flex space-x-3 p-3 bg-gray-50 rounded-xl\">\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"flex items-center space-x-2 mb-1\">\r\n                      <span className=\"text-sm font-medium text-gray-900\">\r\n                        {comm?.sent_by_profile?.full_name || 'System'}\r\n                      </span>\r\n                      <span className={`inline-flex px-2 py-0.5 text-xs rounded-full ${\r\n                        comm?.communication_type === 'sms' ? 'bg-blue-100 text-blue-800' :\r\n                        comm?.communication_type === 'email'? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'\r\n                      }`}>\r\n                        {comm?.communication_type}\r\n                      </span>\r\n                      <span className=\"text-xs text-gray-500\">\r\n                        {new Date(comm?.sent_at)?.toLocaleString()}\r\n                      </span>\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-700\">{comm?.message}</p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          ) : (\r\n            <div className=\"text-center py-8\">\r\n              <MessageCircle className=\"w-8 h-8 mx-auto mb-2 text-gray-400\" />\r\n              <p className=\"text-sm text-gray-600\">No communications yet</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AppointmentDetailPanel;","import React from 'react';\r\nimport { Filter, Building2, Star } from 'lucide-react';\r\n\r\nconst FilterControls = ({ \r\n  statusFilter, setStatusFilter,\r\n  vendorFilter, setVendorFilter,\r\n  priorityFilter, setPriorityFilter,\r\n  vendors\r\n}) => {\r\n  return (\r\n    <div className=\"bg-white/90 backdrop-blur-xl rounded-3xl shadow-xl border border-gray-200/50 p-6 mb-6\">\r\n      <div className=\"flex items-center space-x-2 mb-4\">\r\n        <Filter className=\"w-5 h-5 text-gray-600\" />\r\n        <h3 className=\"font-semibold text-gray-900\">Filter Appointments</h3>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n        {/* Status Filter */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-gray-700\">Status</label>\r\n          <select\r\n            value={statusFilter}\r\n            onChange={(e) => setStatusFilter(e?.target?.value)}\r\n            className=\"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 appearance-none cursor-pointer\"\r\n          >\r\n            <option value=\"all\">All Statuses</option>\r\n            <option value=\"active\">Active Only</option>\r\n            <option value=\"scheduled\">Scheduled</option>\r\n            <option value=\"in_progress\">In Progress</option>\r\n            <option value=\"quality_check\">Quality Check</option>\r\n            <option value=\"pending\">Pending</option>\r\n            <option value=\"overdue\">Overdue Items</option>\r\n          </select>\r\n        </div>\r\n\r\n        {/* Vendor Filter */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-gray-700 flex items-center space-x-1\">\r\n            <Building2 className=\"w-4 h-4\" />\r\n            <span>Vendor</span>\r\n          </label>\r\n          <select\r\n            value={vendorFilter}\r\n            onChange={(e) => setVendorFilter(e?.target?.value)}\r\n            className=\"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 appearance-none cursor-pointer\"\r\n          >\r\n            <option value=\"all\">All Vendors</option>\r\n            {vendors?.map((vendor) => (\r\n              <option key={vendor?.id} value={vendor?.id}>\r\n                {vendor?.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        {/* Priority Filter */}\r\n        <div className=\"space-y-2\">\r\n          <label className=\"text-sm font-medium text-gray-700 flex items-center space-x-1\">\r\n            <Star className=\"w-4 h-4\" />\r\n            <span>Priority</span>\r\n          </label>\r\n          <select\r\n            value={priorityFilter}\r\n            onChange={(e) => setPriorityFilter(e?.target?.value)}\r\n            className=\"w-full p-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white text-gray-900 appearance-none cursor-pointer\"\r\n          >\r\n            <option value=\"all\">All Priorities</option>\r\n            <option value=\"urgent\">ðŸ”´ Urgent</option>\r\n            <option value=\"high\">ðŸŸ  High</option>\r\n            <option value=\"medium\">ðŸŸ¡ Medium</option>\r\n            <option value=\"low\">ðŸŸ¢ Low</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Active Filters Display */}\r\n      <div className=\"flex items-center space-x-2 mt-4\">\r\n        {(statusFilter !== 'all' || vendorFilter !== 'all' || priorityFilter !== 'all') && (\r\n          <div className=\"flex items-center space-x-2\">\r\n            <span className=\"text-sm text-gray-600\">Active filters:</span>\r\n            \r\n            {statusFilter !== 'all' && (\r\n              <div className=\"inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium\">\r\n                <span>Status: {statusFilter?.replace('_', ' ')}</span>\r\n                <button\r\n                  onClick={() => setStatusFilter('all')}\r\n                  className=\"ml-2 text-blue-600 hover:text-blue-800\"\r\n                >\r\n                  Ã—\r\n                </button>\r\n              </div>\r\n            )}\r\n            \r\n            {vendorFilter !== 'all' && (\r\n              <div className=\"inline-flex items-center px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium\">\r\n                <span>Vendor: {vendors?.find(v => v?.id === vendorFilter)?.name}</span>\r\n                <button\r\n                  onClick={() => setVendorFilter('all')}\r\n                  className=\"ml-2 text-green-600 hover:text-green-800\"\r\n                >\r\n                  Ã—\r\n                </button>\r\n              </div>\r\n            )}\r\n            \r\n            {priorityFilter !== 'all' && (\r\n              <div className=\"inline-flex items-center px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-xs font-medium\">\r\n                <span>Priority: {priorityFilter}</span>\r\n                <button\r\n                  onClick={() => setPriorityFilter('all')}\r\n                  className=\"ml-2 text-purple-600 hover:text-purple-800\"\r\n                >\r\n                  Ã—\r\n                </button>\r\n              </div>\r\n            )}\r\n            \r\n            <button\r\n              onClick={() => {\r\n                setStatusFilter('all');\r\n                setVendorFilter('all');\r\n                setPriorityFilter('all');\r\n              }}\r\n              className=\"text-sm text-gray-600 hover:text-gray-800 font-medium\"\r\n            >\r\n              Clear all\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default FilterControls;","import React from 'react';\r\nimport { X, CheckCircle, RefreshCw, Calendar, Users, AlertTriangle } from 'lucide-react';\r\n\r\nconst BulkOperationsPanel = ({ selectedCount, onStatusUpdate, onAssign, onCancel }) => {\r\n  return (\r\n    <div className=\"bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-2xl border-b border-indigo-500/20\">\r\n      <div className=\"px-8 py-4\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <div className=\"flex items-center space-x-2\">\r\n              <CheckCircle className=\"w-5 h-5\" />\r\n              <span className=\"font-semibold\">{selectedCount} appointment{selectedCount !== 1 ? 's' : ''} selected</span>\r\n            </div>\r\n            \r\n            <div className=\"h-6 w-px bg-white/20\"></div>\r\n            \r\n            <div className=\"flex items-center space-x-3\">\r\n              <span className=\"text-sm text-white/80\">Bulk Actions:</span>\r\n              \r\n              {/* Status Updates */}\r\n              <div className=\"flex items-center space-x-2\">\r\n                <button\r\n                  onClick={() => onStatusUpdate('in_progress')}\r\n                  className=\"flex items-center space-x-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200 text-sm font-medium\"\r\n                >\r\n                  <RefreshCw className=\"w-4 h-4\" />\r\n                  <span>Start</span>\r\n                </button>\r\n                \r\n                <button\r\n                  onClick={() => onStatusUpdate('quality_check')}\r\n                  className=\"flex items-center space-x-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200 text-sm font-medium\"\r\n                >\r\n                  <CheckCircle className=\"w-4 h-4\" />\r\n                  <span>QC</span>\r\n                </button>\r\n                \r\n                <button\r\n                  onClick={() => onStatusUpdate('scheduled')}\r\n                  className=\"flex items-center space-x-1 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200 text-sm font-medium\"\r\n                >\r\n                  <Calendar className=\"w-4 h-4\" />\r\n                  <span>Schedule</span>\r\n                </button>\r\n              </div>\r\n              \r\n              <div className=\"h-4 w-px bg-white/20\"></div>\r\n              \r\n              {/* Assignment */}\r\n              <button\r\n                onClick={onAssign}\r\n                className=\"flex items-center space-x-2 px-4 py-1.5 bg-green-500/80 hover:bg-green-500 rounded-lg transition-all duration-200 text-sm font-medium\"\r\n              >\r\n                <Users className=\"w-4 h-4\" />\r\n                <span>Assign Staff</span>\r\n              </button>\r\n              \r\n              {/* Danger Actions */}\r\n              <button\r\n                onClick={() => onStatusUpdate('cancelled')}\r\n                className=\"flex items-center space-x-1 px-3 py-1.5 bg-red-500/20 hover:bg-red-500/40 rounded-lg transition-all duration-200 text-sm font-medium border border-red-400/30\"\r\n              >\r\n                <AlertTriangle className=\"w-4 h-4\" />\r\n                <span>Cancel</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \r\n          <button\r\n            onClick={onCancel}\r\n            className=\"flex items-center space-x-2 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-all duration-200\"\r\n          >\r\n            <X className=\"w-4 h-4\" />\r\n            <span className=\"text-sm\">Exit Bulk Mode</span>\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Quick Instructions */}\r\n        <div className=\"mt-3 text-xs text-white/60\">\r\n          ðŸ’¡ Select appointments by clicking on them, then choose a bulk action above\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BulkOperationsPanel;","import React from 'react';\r\nimport { X, TrendingUp, Clock, CheckCircle, BarChart3, Calendar } from 'lucide-react';\r\n\r\nconst PerformanceWidget = ({ metrics, onClose }) => {\r\n  const formatHours = (hours) => {\r\n    if (hours < 1) return `${Math.round(hours * 60)} min`;\r\n    return `${hours?.toFixed(1)}h`;\r\n  };\r\n\r\n  const getCompletionRateColor = (rate) => {\r\n    if (rate >= 80) return 'text-green-600';\r\n    if (rate >= 60) return 'text-yellow-600';\r\n    return 'text-red-600';\r\n  };\r\n\r\n  const getCompletionRateBg = (rate) => {\r\n    if (rate >= 80) return 'bg-green-50 border-green-200';\r\n    if (rate >= 60) return 'bg-yellow-50 border-yellow-200';\r\n    return 'bg-red-50 border-red-200';\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white/95 backdrop-blur-xl shadow-2xl border border-gray-200/50 mx-8 mb-6 rounded-3xl overflow-hidden\">\r\n      <div className=\"px-6 py-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-gray-200/50\">\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"w-10 h-10 rounded-xl bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center\">\r\n              <BarChart3 className=\"w-5 h-5 text-white\" />\r\n            </div>\r\n            <div>\r\n              <h3 className=\"text-lg font-bold text-gray-900\">Workflow Performance</h3>\r\n              <p className=\"text-sm text-gray-600\">Real-time efficiency metrics</p>\r\n            </div>\r\n          </div>\r\n          \r\n          <button\r\n            onClick={onClose}\r\n            className=\"w-8 h-8 rounded-lg bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors duration-200\"\r\n          >\r\n            <X className=\"w-4 h-4 text-gray-600\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"p-6\">\r\n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-6\">\r\n          {/* Today's Completion */}\r\n          <div className={`rounded-2xl border-2 p-4 ${getCompletionRateBg(metrics?.todayCompletionRate || 0)}`}>\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <Calendar className=\"w-5 h-5 text-gray-600\" />\r\n              <div className={`text-xs font-semibold ${getCompletionRateColor(metrics?.todayCompletionRate || 0)}`}>\r\n                {Math.round(metrics?.todayCompletionRate || 0)}%\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <div className=\"text-sm font-medium text-gray-900\">Today</div>\r\n              <div className=\"text-xs text-gray-600\">\r\n                {metrics?.todayCompleted || 0} of {metrics?.todayTotal || 0} completed\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* This Week's Completion */}\r\n          <div className={`rounded-2xl border-2 p-4 ${getCompletionRateBg(metrics?.weekCompletionRate || 0)}`}>\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <TrendingUp className=\"w-5 h-5 text-gray-600\" />\r\n              <div className={`text-xs font-semibold ${getCompletionRateColor(metrics?.weekCompletionRate || 0)}`}>\r\n                {Math.round(metrics?.weekCompletionRate || 0)}%\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <div className=\"text-sm font-medium text-gray-900\">This Week</div>\r\n              <div className=\"text-xs text-gray-600\">\r\n                {metrics?.weekCompleted || 0} of {metrics?.weekTotal || 0} completed\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Average Completion Time */}\r\n          <div className=\"rounded-2xl border-2 p-4 bg-blue-50 border-blue-200\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <Clock className=\"w-5 h-5 text-blue-600\" />\r\n              <div className=\"text-xs font-semibold text-blue-600\">\r\n                {formatHours(metrics?.avgCompletionTime || 0)}\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <div className=\"text-sm font-medium text-gray-900\">Avg Time</div>\r\n              <div className=\"text-xs text-gray-600\">Per job completion</div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Efficiency Score */}\r\n          <div className=\"rounded-2xl border-2 p-4 bg-purple-50 border-purple-200\">\r\n            <div className=\"flex items-center justify-between mb-2\">\r\n              <CheckCircle className=\"w-5 h-5 text-purple-600\" />\r\n              <div className=\"text-xs font-semibold text-purple-600\">\r\n                {metrics?.weekCompletionRate ? (\r\n                  metrics?.weekCompletionRate > 75 ? 'Excellent' :\r\n                  metrics?.weekCompletionRate > 60 ? 'Good': 'Needs Improvement' ) :'No Data'}\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-1\">\r\n              <div className=\"text-sm font-medium text-gray-900\">Efficiency</div>\r\n              <div className=\"text-xs text-gray-600\">Overall rating</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Quick Insights */}\r\n        <div className=\"mt-6 pt-6 border-t border-gray-200/50\">\r\n          <h4 className=\"text-sm font-semibold text-gray-900 mb-3\">Quick Insights</h4>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {/* Performance Trend */}\r\n            <div className=\"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl\">\r\n              <div className={`w-2 h-2 rounded-full ${\r\n                (metrics?.weekCompletionRate || 0) > (metrics?.todayCompletionRate || 0) ? 'bg-green-500' : 'bg-red-500'\r\n              }`}></div>\r\n              <div className=\"text-xs text-gray-700\">\r\n                {(metrics?.weekCompletionRate || 0) > (metrics?.todayCompletionRate || 0) \r\n                  ? 'Weekly performance is above today\\'s rate' \r\n                  : 'Today is performing better than weekly average'\r\n                }\r\n              </div>\r\n            </div>\r\n\r\n            {/* Time Efficiency */}\r\n            <div className=\"flex items-center space-x-3 p-3 bg-gray-50 rounded-xl\">\r\n              <div className={`w-2 h-2 rounded-full ${\r\n                (metrics?.avgCompletionTime || 0) < 24 ? 'bg-green-500' : 'bg-yellow-500'\r\n              }`}></div>\r\n              <div className=\"text-xs text-gray-700\">\r\n                {(metrics?.avgCompletionTime || 0) < 24 \r\n                  ? 'Jobs are completing within 24 hours' \r\n                  : 'Jobs taking longer than 24 hours on average'\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PerformanceWidget;","import React, { useState } from 'react';\r\nimport { X, Users, Clock, Car, UserPlus, CheckCircle } from 'lucide-react';\r\n\r\nconst AssignmentQuickPanel = ({ unassignedJobs, staffMembers, selectedAppointments, onQuickAssign, onBulkAssign, onClose }) => {\r\n  const [selectedStaff, setSelectedStaff] = useState('');\r\n  const [assignmentMode, setAssignmentMode] = useState(selectedAppointments?.size > 0 ? 'bulk' : 'individual');\r\n\r\n  const handleBulkAssign = () => {\r\n    if (!selectedStaff || selectedAppointments?.size === 0) return;\r\n    onBulkAssign(selectedStaff);\r\n    setSelectedStaff('');\r\n  };\r\n\r\n  const handleQuickAssign = (jobId) => {\r\n    if (!selectedStaff) return;\r\n    onQuickAssign(jobId, selectedStaff);\r\n  };\r\n\r\n  const formatJobTime = (timestamp) => {\r\n    if (!timestamp) return 'Not scheduled';\r\n    return new Date(timestamp)?.toLocaleDateString();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white rounded-3xl shadow-2xl border border-gray-200 w-full max-w-4xl max-h-[80vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"px-8 py-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-indigo-50\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-600 to-indigo-600 flex items-center justify-center shadow-lg\">\r\n                <UserPlus className=\"w-6 h-6 text-white\" />\r\n              </div>\r\n              <div>\r\n                <h3 className=\"text-xl font-bold text-gray-900\">Assignment Center</h3>\r\n                <p className=\"text-sm text-gray-600\">\r\n                  {selectedAppointments?.size > 0 \r\n                    ? `Manage ${selectedAppointments?.size} selected appointment${selectedAppointments?.size !== 1 ? 's' : ''} and ${unassignedJobs?.length} unassigned job${unassignedJobs?.length !== 1 ? 's' : ''}`\r\n                    : `Assign ${unassignedJobs?.length} unassigned job${unassignedJobs?.length !== 1 ? 's' : ''}`\r\n                  }\r\n                </p>\r\n              </div>\r\n            </div>\r\n            \r\n            <button\r\n              onClick={onClose}\r\n              className=\"w-10 h-10 rounded-xl bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-all duration-200\"\r\n            >\r\n              <X className=\"w-5 h-5 text-gray-600\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-8\">\r\n          {/* Mode Toggle */}\r\n          {selectedAppointments?.size > 0 && (\r\n            <div className=\"flex items-center space-x-4 mb-6 p-4 bg-indigo-50 rounded-2xl border border-indigo-200\">\r\n              <div className=\"flex items-center space-x-2\">\r\n                <input\r\n                  type=\"radio\"\r\n                  id=\"bulk\"\r\n                  name=\"assignmentMode\"\r\n                  value=\"bulk\"\r\n                  checked={assignmentMode === 'bulk'}\r\n                  onChange={(e) => setAssignmentMode(e?.target?.value)}\r\n                  className=\"text-indigo-600 focus:ring-indigo-500\"\r\n                />\r\n                <label htmlFor=\"bulk\" className=\"text-sm font-medium text-gray-900\">\r\n                  Bulk assign {selectedAppointments?.size} selected appointment{selectedAppointments?.size !== 1 ? 's' : ''}\r\n                </label>\r\n              </div>\r\n              <div className=\"flex items-center space-x-2\">\r\n                <input\r\n                  type=\"radio\"\r\n                  id=\"individual\"\r\n                  name=\"assignmentMode\"\r\n                  value=\"individual\"\r\n                  checked={assignmentMode === 'individual'}\r\n                  onChange={(e) => setAssignmentMode(e?.target?.value)}\r\n                  className=\"text-indigo-600 focus:ring-indigo-500\"\r\n                />\r\n                <label htmlFor=\"individual\" className=\"text-sm font-medium text-gray-900\">\r\n                  Individual assignments\r\n                </label>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n            {/* Staff Selection */}\r\n            <div className=\"lg:col-span-1\">\r\n              <div className=\"sticky top-0\">\r\n                <h4 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2\">\r\n                  <Users className=\"w-5 h-5\" />\r\n                  <span>Select Staff Member</span>\r\n                </h4>\r\n                \r\n                <div className=\"space-y-3\">\r\n                  {staffMembers?.map((staff) => (\r\n                    <div\r\n                      key={staff?.id}\r\n                      onClick={() => setSelectedStaff(staff?.id)}\r\n                      className={`p-4 rounded-2xl border-2 cursor-pointer transition-all duration-200 ${\r\n                        selectedStaff === staff?.id\r\n                          ? 'border-indigo-500 bg-indigo-50' :'border-gray-200 hover:border-indigo-300 hover:bg-indigo-50/50'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-center space-x-3\">\r\n                        <div className={`w-10 h-10 rounded-full flex items-center justify-center font-semibold text-white ${\r\n                          selectedStaff === staff?.id ? 'bg-indigo-600' : 'bg-gray-400'\r\n                        }`}>\r\n                          {staff?.full_name?.charAt(0)?.toUpperCase()}\r\n                        </div>\r\n                        <div className=\"flex-1\">\r\n                          <div className=\"font-medium text-gray-900\">{staff?.full_name}</div>\r\n                          <div className=\"text-sm text-gray-600\">{staff?.role} â€¢ {staff?.department}</div>\r\n                        </div>\r\n                        {selectedStaff === staff?.id && (\r\n                          <CheckCircle className=\"w-5 h-5 text-indigo-600\" />\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Bulk Assignment Button */}\r\n                {assignmentMode === 'bulk' && selectedAppointments?.size > 0 && (\r\n                  <button\r\n                    onClick={handleBulkAssign}\r\n                    disabled={!selectedStaff}\r\n                    className=\"w-full mt-6 bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-4 rounded-2xl font-semibold disabled:opacity-50 disabled:cursor-not-allowed hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 flex items-center justify-center space-x-2\"\r\n                  >\r\n                    <UserPlus className=\"w-5 h-5\" />\r\n                    <span>Assign {selectedAppointments?.size} Appointment{selectedAppointments?.size !== 1 ? 's' : ''}</span>\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Unassigned Jobs */}\r\n            <div className=\"lg:col-span-2\">\r\n              <h4 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2\">\r\n                <Clock className=\"w-5 h-5\" />\r\n                <span>Unassigned Jobs ({unassignedJobs?.length})</span>\r\n              </h4>\r\n\r\n              {assignmentMode === 'individual' && (\r\n                <div className=\"space-y-4 max-h-96 overflow-y-auto\">\r\n                  {unassignedJobs?.length > 0 ? (\r\n                    unassignedJobs?.map((job) => (\r\n                      <div key={job?.id} className=\"bg-white border border-gray-200 rounded-2xl p-4 hover:shadow-md transition-all duration-200\">\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div className=\"flex-1\">\r\n                            <div className=\"flex items-center space-x-3 mb-2\">\r\n                              <span className=\"text-sm font-semibold text-gray-900\">#{job?.job_number}</span>\r\n                              <div className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold ${\r\n                                job?.priority === 'urgent' ? 'bg-red-100 text-red-700' :\r\n                                job?.priority === 'high' ? 'bg-orange-100 text-orange-700' :\r\n                                job?.priority === 'medium' ? 'bg-yellow-100 text-yellow-700' : 'bg-green-100 text-green-700'\r\n                              }`}>\r\n                                {job?.priority?.toUpperCase()}\r\n                              </div>\r\n                            </div>\r\n                            \r\n                            <h5 className=\"font-medium text-gray-900 mb-1\">{job?.title}</h5>\r\n                            \r\n                            <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\r\n                              <div className=\"flex items-center space-x-1\">\r\n                                <Car className=\"w-4 h-4\" />\r\n                                <span>\r\n                                  {job?.vehicles?.year} {job?.vehicles?.make} {job?.vehicles?.model}\r\n                                </span>\r\n                              </div>\r\n                              {job?.vehicles?.stock_number && (\r\n                                <span>Stock: #{job?.vehicles?.stock_number}</span>\r\n                              )}\r\n                            </div>\r\n\r\n                            {job?.vehicles?.owner_name && (\r\n                              <div className=\"text-sm text-gray-600 mt-1\">\r\n                                Customer: {job?.vehicles?.owner_name}\r\n                              </div>\r\n                            )}\r\n\r\n                            <div className=\"text-xs text-gray-500 mt-2\">\r\n                              Created: {formatJobTime(job?.created_at)}\r\n                            </div>\r\n                          </div>\r\n\r\n                          <button\r\n                            onClick={() => handleQuickAssign(job?.id)}\r\n                            disabled={!selectedStaff}\r\n                            className=\"ml-4 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-4 py-2 rounded-xl text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:from-green-700 hover:to-emerald-700 transition-all duration-200 flex items-center space-x-2\"\r\n                          >\r\n                            <UserPlus className=\"w-4 h-4\" />\r\n                            <span>Assign</span>\r\n                          </button>\r\n                        </div>\r\n                      </div>\r\n                    ))\r\n                  ) : (\r\n                    <div className=\"text-center py-8\">\r\n                      <Clock className=\"w-12 h-12 mx-auto mb-3 text-gray-400\" />\r\n                      <p className=\"text-gray-600\">No unassigned jobs at the moment</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {assignmentMode === 'bulk' && (\r\n                <div className=\"bg-indigo-50 rounded-2xl p-6 border border-indigo-200\">\r\n                  <div className=\"text-center\">\r\n                    <UserPlus className=\"w-12 h-12 mx-auto mb-3 text-indigo-600\" />\r\n                    <h5 className=\"font-semibold text-gray-900 mb-2\">Bulk Assignment Mode</h5>\r\n                    <p className=\"text-gray-600 mb-4\">\r\n                      Select a staff member on the left to assign all {selectedAppointments?.size} selected appointment{selectedAppointments?.size !== 1 ? 's' : ''} at once.\r\n                    </p>\r\n                    {selectedStaff && (\r\n                      <div className=\"text-sm text-indigo-700\">\r\n                        Ready to assign to: <strong>{staffMembers?.find(s => s?.id === selectedStaff)?.full_name}</strong>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AssignmentQuickPanel;","import React, { useState, useEffect } from 'react'\r\nimport {\r\n  Clock,\r\n  Calendar,\r\n  Filter,\r\n  Search,\r\n  AlertTriangle,\r\n  CheckCircle,\r\n  RefreshCw,\r\n  Users,\r\n  BarChart3,\r\n  ArrowUpRight,\r\n  CheckCheck,\r\n  UserPlus,\r\n} from 'lucide-react'\r\nimport { supabase } from '../../lib/supabase'\r\nimport AppLayout from '../../components/layouts/AppLayout'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\n// Import components\r\nimport AppointmentCard from './components/AppointmentCard'\r\nimport AppointmentDetailPanel from './components/AppointmentDetailPanel'\r\nimport FilterControls from './components/FilterControls'\r\nimport BulkOperationsPanel from './components/BulkOperationsPanel'\r\nimport PerformanceWidget from './components/PerformanceWidget'\r\nimport AssignmentQuickPanel from './components/AssignmentQuickPanel'\r\n\r\nconst CurrentlyActiveAppointments = () => {\r\n  const [appointments, setAppointments] = useState([])\r\n  const [originalAppointments, setOriginalAppointments] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [selectedAppointment, setSelectedAppointment] = useState(null)\r\n  const [showDetailPanel, setShowDetailPanel] = useState(false)\r\n  const [searchQuery, setSearchQuery] = useState('')\r\n  const [statusFilter, setStatusFilter] = useState('active')\r\n  const [vendorFilter, setVendorFilter] = useState('all')\r\n  const [priorityFilter, setPriorityFilter] = useState('all')\r\n  const [vendors, setVendors] = useState([])\r\n  const [refreshing, setRefreshing] = useState(false)\r\n\r\n  // Enhanced workflow management state\r\n  const [selectedAppointments, setSelectedAppointments] = useState(new Set())\r\n  const [bulkOperationsMode, setBulkOperationsMode] = useState(false)\r\n  const [showPerformanceWidget, setShowPerformanceWidget] = useState(false)\r\n  const [showAssignmentPanel, setShowAssignmentPanel] = useState(false)\r\n  const [unassignedJobs, setUnassignedJobs] = useState([])\r\n  const [staffMembers, setStaffMembers] = useState([])\r\n  const [performanceMetrics, setPerformanceMetrics] = useState({})\r\n\r\n  const navigate = useNavigate()\r\n\r\n  useEffect(() => {\r\n    loadAppointments()\r\n    loadVendors()\r\n    loadStaffMembers()\r\n    loadUnassignedJobs()\r\n    loadPerformanceMetrics()\r\n\r\n    // Set up real-time subscription for job updates\r\n    const subscription = supabase\r\n      ?.channel('job_updates')\r\n      ?.on('postgres_changes', { event: '*', schema: 'public', table: 'jobs' }, () => {\r\n        loadAppointments()\r\n        loadUnassignedJobs()\r\n        loadPerformanceMetrics()\r\n      })\r\n      ?.subscribe()\r\n\r\n    return () => {\r\n      subscription?.unsubscribe()\r\n    }\r\n  }, [])\r\n\r\n  useEffect(() => {\r\n    applyFilters()\r\n  }, [searchQuery, statusFilter, vendorFilter, priorityFilter, originalAppointments])\r\n\r\n  const loadStaffMembers = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        ?.from('user_profiles')\r\n        ?.select('id, full_name, email, role, department')\r\n        ?.eq('is_active', true)\r\n        ?.order('full_name')\r\n\r\n      if (error) throw error\r\n      setStaffMembers(data || [])\r\n    } catch (error) {\r\n      console.error('Error loading staff members:', error)\r\n    }\r\n  }\r\n\r\n  const loadUnassignedJobs = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        ?.from('jobs')\r\n        ?.select(\r\n          `\r\n          *,\r\n          vehicles (\r\n            id, stock_number, year, make, model, owner_name\r\n          ),\r\n          vendors (\r\n            id, name\r\n          )\r\n        `\r\n        )\r\n        ?.is('assigned_to', null)\r\n        ?.eq('job_status', 'pending')\r\n        ?.order('created_at', { ascending: false })\r\n        ?.limit(10)\r\n\r\n      if (error) throw error\r\n      setUnassignedJobs(data || [])\r\n    } catch (error) {\r\n      console.error('Error loading unassigned jobs:', error)\r\n    }\r\n  }\r\n\r\n  const loadPerformanceMetrics = async () => {\r\n    try {\r\n      // Get today's metrics\r\n      const today = new Date()?.toISOString()?.split('T')?.[0]\r\n\r\n      const { data: todayJobs, error: todayError } = await supabase\r\n        ?.from('jobs')\r\n        ?.select('job_status, created_at, completed_at')\r\n        ?.gte('created_at', `${today}T00:00:00Z`)\r\n        ?.lte('created_at', `${today}T23:59:59Z`)\r\n\r\n      if (todayError) throw todayError\r\n\r\n      // Get this week's metrics\r\n      const weekStart = new Date()\r\n      weekStart?.setDate(weekStart?.getDate() - weekStart?.getDay())\r\n      const weekStartStr = weekStart?.toISOString()?.split('T')?.[0]\r\n\r\n      const { data: weekJobs, error: weekError } = await supabase\r\n        ?.from('jobs')\r\n        ?.select('job_status, created_at, completed_at')\r\n        ?.gte('created_at', `${weekStartStr}T00:00:00Z`)\r\n\r\n      if (weekError) throw weekError\r\n\r\n      // Calculate metrics\r\n      const todayCompleted =\r\n        todayJobs?.filter((job) => job?.job_status === 'completed')?.length || 0\r\n      const todayTotal = todayJobs?.length || 0\r\n      const weekCompleted = weekJobs?.filter((job) => job?.job_status === 'completed')?.length || 0\r\n      const weekTotal = weekJobs?.length || 0\r\n\r\n      // Average completion time (in hours)\r\n      const completedJobs = weekJobs?.filter(\r\n        (job) => job?.job_status === 'completed' && job?.completed_at && job?.created_at\r\n      )\r\n      const avgCompletionTime =\r\n        completedJobs?.length > 0\r\n          ? completedJobs?.reduce((sum, job) => {\r\n              const start = new Date(job?.created_at)\r\n              const end = new Date(job?.completed_at)\r\n              return sum + (end - start) / (1000 * 60 * 60) // Convert to hours\r\n            }, 0) / completedJobs?.length\r\n          : 0\r\n\r\n      setPerformanceMetrics({\r\n        todayCompleted,\r\n        todayTotal,\r\n        todayCompletionRate: todayTotal > 0 ? (todayCompleted / todayTotal) * 100 : 0,\r\n        weekCompleted,\r\n        weekTotal,\r\n        weekCompletionRate: weekTotal > 0 ? (weekCompleted / weekTotal) * 100 : 0,\r\n        avgCompletionTime: Math?.round(avgCompletionTime * 100) / 100,\r\n      })\r\n    } catch (error) {\r\n      console.error('Error loading performance metrics:', error)\r\n    }\r\n  }\r\n\r\n  const loadVendors = async () => {\r\n    try {\r\n      const { data, error } = await supabase\r\n        ?.from('vendors')\r\n        ?.select('id, name')\r\n        ?.eq('is_active', true)\r\n        ?.order('name')\r\n\r\n      if (error) throw error\r\n      setVendors(data || [])\r\n    } catch (error) {\r\n      console.error('Error loading vendors:', error)\r\n    }\r\n  }\r\n\r\n  const loadAppointments = async () => {\r\n    try {\r\n      setLoading(true)\r\n\r\n      const { data, error } = await supabase\r\n        ?.from('jobs')\r\n        ?.select(\r\n          `\r\n          *,\r\n          vehicles (\r\n            id, stock_number, year, make, model, color, owner_name, \r\n            owner_phone, owner_email, license_plate\r\n          ),\r\n          vendors (\r\n            id, name, phone, email, specialty, contact_person\r\n          ),\r\n          assigned_to_profile:user_profiles!assigned_to (\r\n            id, full_name, email, phone\r\n          ),\r\n          created_by_profile:user_profiles!created_by (\r\n            id, full_name, email\r\n          )\r\n        `\r\n        )\r\n        ?.in('job_status', ['pending', 'in_progress', 'scheduled', 'quality_check'])\r\n        ?.order('scheduled_start_time', { ascending: true })\r\n\r\n      if (error) throw error\r\n\r\n      // Fetch active loaner assignments for these jobs to surface a Loaner badge\r\n      const jobIds = (data || []).map((j) => j?.id).filter(Boolean)\r\n      let loaners = []\r\n      if (jobIds.length) {\r\n        const { data: loanerRows } = await supabase\r\n          ?.from('loaner_assignments')\r\n          ?.select('job_id, id')\r\n          ?.in('job_id', jobIds)\r\n          ?.is('returned_at', null)\r\n        loaners = loanerRows || []\r\n      }\r\n\r\n      const processedData = (data || [])?.map((job) => ({\r\n        ...job,\r\n        has_active_loaner: !!loaners.find((l) => l?.job_id === job?.id)?.id,\r\n        isOverdue: job?.promised_date && new Date(job?.promised_date) < new Date(),\r\n        statusConfig: getStatusConfig(job?.job_status),\r\n        priorityConfig: getPriorityConfig(job?.priority),\r\n      }))\r\n\r\n      setOriginalAppointments(processedData)\r\n      setAppointments(processedData)\r\n    } catch (error) {\r\n      console.error('Error loading appointments:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const applyFilters = () => {\r\n    let filtered = [...originalAppointments]\r\n\r\n    // Status filter\r\n    if (statusFilter === 'active') {\r\n      filtered = filtered?.filter((apt) => ['in_progress', 'scheduled']?.includes(apt?.job_status))\r\n    } else if (statusFilter === 'overdue') {\r\n      filtered = filtered?.filter((apt) => apt?.isOverdue)\r\n    } else if (statusFilter !== 'all') {\r\n      filtered = filtered?.filter((apt) => apt?.job_status === statusFilter)\r\n    }\r\n\r\n    // Vendor filter\r\n    if (vendorFilter !== 'all') {\r\n      filtered = filtered?.filter((apt) => apt?.vendor_id === vendorFilter)\r\n    }\r\n\r\n    // Priority filter\r\n    if (priorityFilter !== 'all') {\r\n      filtered = filtered?.filter((apt) => apt?.priority === priorityFilter)\r\n    }\r\n\r\n    // Search filter\r\n    if (searchQuery?.trim()) {\r\n      const query = searchQuery?.toLowerCase()?.trim()\r\n      filtered = filtered?.filter(\r\n        (apt) =>\r\n          apt?.job_number?.toLowerCase()?.includes(query) ||\r\n          apt?.title?.toLowerCase()?.includes(query) ||\r\n          apt?.vehicles?.stock_number?.toLowerCase()?.includes(query) ||\r\n          apt?.vehicles?.owner_name?.toLowerCase()?.includes(query) ||\r\n          apt?.vendors?.name?.toLowerCase()?.includes(query) ||\r\n          `${apt?.vehicles?.year} ${apt?.vehicles?.make} ${apt?.vehicles?.model}`\r\n            ?.toLowerCase()\r\n            ?.includes(query)\r\n      )\r\n    }\r\n\r\n    setAppointments(filtered)\r\n  }\r\n\r\n  const getStatusConfig = (status) => {\r\n    const configs = {\r\n      scheduled: {\r\n        color: 'from-blue-500 to-blue-600',\r\n        bg: 'bg-blue-50',\r\n        text: 'text-blue-700',\r\n        border: 'border-blue-200',\r\n        icon: Calendar,\r\n        label: 'Scheduled',\r\n      },\r\n      in_progress: {\r\n        color: 'from-orange-500 to-orange-600',\r\n        bg: 'bg-orange-50',\r\n        text: 'text-orange-700',\r\n        border: 'border-orange-200',\r\n        icon: RefreshCw,\r\n        label: 'In Progress',\r\n      },\r\n      quality_check: {\r\n        color: 'from-green-500 to-green-600',\r\n        bg: 'bg-green-50',\r\n        text: 'text-green-700',\r\n        border: 'border-green-200',\r\n        icon: CheckCircle,\r\n        label: 'Quality Check',\r\n      },\r\n      pending: {\r\n        color: 'from-gray-500 to-gray-600',\r\n        bg: 'bg-gray-50',\r\n        text: 'text-gray-700',\r\n        border: 'border-gray-200',\r\n        icon: Clock,\r\n        label: 'Pending',\r\n      },\r\n    }\r\n    return configs?.[status] || configs?.pending\r\n  }\r\n\r\n  const getPriorityConfig = (priority) => {\r\n    const configs = {\r\n      urgent: { color: 'text-red-600', bg: 'bg-red-100' },\r\n      high: { color: 'text-orange-600', bg: 'bg-orange-100' },\r\n      medium: { color: 'text-yellow-600', bg: 'bg-yellow-100' },\r\n      low: { color: 'text-green-600', bg: 'bg-green-100' },\r\n    }\r\n    return configs?.[priority] || configs?.medium\r\n  }\r\n\r\n  const handleAppointmentClick = (appointment) => {\r\n    if (bulkOperationsMode) {\r\n      toggleAppointmentSelection(appointment?.id)\r\n    } else {\r\n      setSelectedAppointment(appointment)\r\n      setShowDetailPanel(true)\r\n    }\r\n  }\r\n\r\n  const toggleAppointmentSelection = (appointmentId) => {\r\n    const newSelection = new Set(selectedAppointments)\r\n    if (newSelection?.has(appointmentId)) {\r\n      newSelection?.delete(appointmentId)\r\n    } else {\r\n      newSelection?.add(appointmentId)\r\n    }\r\n    setSelectedAppointments(newSelection)\r\n  }\r\n\r\n  const handleUpdateStatus = async (appointmentId, newStatus) => {\r\n    try {\r\n      const { error } = await supabase\r\n        ?.from('jobs')\r\n        ?.update({\r\n          job_status: newStatus,\r\n          updated_at: new Date()?.toISOString(),\r\n        })\r\n        ?.eq('id', appointmentId)\r\n\r\n      if (error) throw error\r\n\r\n      loadAppointments()\r\n    } catch (error) {\r\n      console.error('Error updating appointment status:', error)\r\n    }\r\n  }\r\n\r\n  const handleBulkStatusUpdate = async (status) => {\r\n    if (selectedAppointments?.size === 0) return\r\n\r\n    try {\r\n      const appointmentIds = Array?.from(selectedAppointments)\r\n      const { error } = await supabase\r\n        ?.from('jobs')\r\n        ?.update({\r\n          job_status: status,\r\n          updated_at: new Date()?.toISOString(),\r\n        })\r\n        ?.in('id', appointmentIds)\r\n\r\n      if (error) throw error\r\n\r\n      setSelectedAppointments(new Set())\r\n      loadAppointments()\r\n    } catch (error) {\r\n      console.error('Error bulk updating appointments:', error)\r\n    }\r\n  }\r\n\r\n  const handleBulkAssignment = async (staffId) => {\r\n    if (selectedAppointments?.size === 0) return\r\n\r\n    try {\r\n      const appointmentIds = Array?.from(selectedAppointments)\r\n      const { error } = await supabase\r\n        ?.from('jobs')\r\n        ?.update({\r\n          assigned_to: staffId,\r\n          updated_at: new Date()?.toISOString(),\r\n        })\r\n        ?.in('id', appointmentIds)\r\n\r\n      if (error) throw error\r\n\r\n      setSelectedAppointments(new Set())\r\n      setShowAssignmentPanel(false)\r\n      loadAppointments()\r\n    } catch (error) {\r\n      console.error('Error bulk assigning appointments:', error)\r\n    }\r\n  }\r\n\r\n  const handleQuickAssignJob = async (jobId, staffId) => {\r\n    try {\r\n      const { error } = await supabase\r\n        ?.from('jobs')\r\n        ?.update({\r\n          assigned_to: staffId,\r\n          job_status: 'scheduled',\r\n          updated_at: new Date()?.toISOString(),\r\n        })\r\n        ?.eq('id', jobId)\r\n\r\n      if (error) throw error\r\n\r\n      loadUnassignedJobs()\r\n      loadAppointments()\r\n    } catch (error) {\r\n      console.error('Error assigning job:', error)\r\n    }\r\n  }\r\n\r\n  const handleRefresh = async () => {\r\n    setRefreshing(true)\r\n    await Promise?.all([loadAppointments(), loadUnassignedJobs(), loadPerformanceMetrics()])\r\n    setTimeout(() => setRefreshing(false), 1000)\r\n  }\r\n\r\n  const getAppointmentCounts = () => {\r\n    const total = originalAppointments?.length || 0\r\n    const inProgress =\r\n      originalAppointments?.filter((apt) => apt?.job_status === 'in_progress')?.length || 0\r\n    const scheduled =\r\n      originalAppointments?.filter((apt) => apt?.job_status === 'scheduled')?.length || 0\r\n    const overdue = originalAppointments?.filter((apt) => apt?.isOverdue)?.length || 0\r\n    const unassigned = unassignedJobs?.length || 0\r\n\r\n    return { total, inProgress, scheduled, overdue, unassigned }\r\n  }\r\n\r\n  const counts = getAppointmentCounts()\r\n\r\n  if (loading) {\r\n    return (\r\n      <AppLayout>\r\n        <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-indigo-50 flex items-center justify-center\">\r\n          <div className=\"text-center\">\r\n            <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-indigo-600 to-purple-600 flex items-center justify-center shadow-xl\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-2 border-white border-t-transparent\"></div>\r\n            </div>\r\n            <p className=\"text-gray-600 font-medium\">Loading workflow center...</p>\r\n          </div>\r\n        </div>\r\n      </AppLayout>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <AppLayout>\r\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-indigo-50\">\r\n        {/* Enhanced Header */}\r\n        <div className=\"bg-white/80 backdrop-blur-xl border-b border-gray-200/50 sticky top-0 z-40\">\r\n          <div className=\"px-8 py-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"flex items-center space-x-6\">\r\n                <div className=\"flex items-center space-x-4\">\r\n                  <div className=\"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 flex items-center justify-center shadow-xl\">\r\n                    <Clock className=\"w-7 h-7 text-white\" />\r\n                  </div>\r\n                  <div>\r\n                    <h1 className=\"text-2xl font-bold bg-gradient-to-r from-gray-900 to-gray-700 bg-clip-text text-transparent\">\r\n                      Workflow Management Center\r\n                    </h1>\r\n                    <p className=\"text-sm text-gray-600 font-medium\">\r\n                      Active Appointments & Operations Hub\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Enhanced Search */}\r\n                <div className=\"relative\">\r\n                  <Search className=\"absolute left-4 top-4 h-5 w-5 text-gray-400\" />\r\n                  <input\r\n                    type=\"text\"\r\n                    placeholder=\"Search jobs, vehicles, customers, or vendors...\"\r\n                    value={searchQuery}\r\n                    onChange={(e) => setSearchQuery(e?.target?.value)}\r\n                    className=\"pl-12 pr-6 py-3.5 border border-gray-200 rounded-2xl w-96 focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white/80 backdrop-blur-sm shadow-sm hover:shadow-md transition-all duration-200 text-gray-900 placeholder-gray-500\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center space-x-4\">\r\n                {/* Workflow Management Tools */}\r\n                <button\r\n                  onClick={() => setShowPerformanceWidget(!showPerformanceWidget)}\r\n                  className={`px-4 py-3 rounded-xl border text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 flex items-center space-x-2 ${showPerformanceWidget ? 'bg-indigo-50 border-indigo-200 text-indigo-600' : 'border-gray-200'}`}\r\n                >\r\n                  <BarChart3 className=\"w-4 h-4\" />\r\n                  <span>Analytics</span>\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => setBulkOperationsMode(!bulkOperationsMode)}\r\n                  className={`px-4 py-3 rounded-xl border text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 flex items-center space-x-2 ${bulkOperationsMode ? 'bg-orange-50 border-orange-200 text-orange-600' : 'border-gray-200'}`}\r\n                >\r\n                  <CheckCheck className=\"w-4 h-4\" />\r\n                  <span>Bulk Ops</span>\r\n                  {selectedAppointments?.size > 0 && (\r\n                    <span className=\"bg-orange-100 text-orange-700 px-2 py-0.5 rounded-full text-xs font-semibold\">\r\n                      {selectedAppointments?.size}\r\n                    </span>\r\n                  )}\r\n                </button>\r\n\r\n                <button\r\n                  onClick={handleRefresh}\r\n                  disabled={refreshing}\r\n                  className={`px-4 py-3 rounded-xl border border-gray-200 text-gray-600 hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 flex items-center space-x-2 ${refreshing ? 'opacity-50 cursor-not-allowed' : ''}`}\r\n                >\r\n                  <RefreshCw className={`w-4 h-4 ${refreshing ? 'animate-spin' : ''}`} />\r\n                  <span>Refresh</span>\r\n                </button>\r\n\r\n                <button\r\n                  onClick={() => navigate('/calendar')}\r\n                  className=\"bg-gradient-to-r from-emerald-600 to-teal-600 text-white px-6 py-3 rounded-xl hover:from-emerald-700 hover:to-teal-700 flex items-center space-x-3 shadow-lg hover:shadow-xl transition-all duration-200 font-medium\"\r\n                >\r\n                  <Calendar className=\"w-5 h-5\" />\r\n                  <span>Schedule New</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Enhanced Stats Overview */}\r\n            <div className=\"flex items-center justify-between mt-6\">\r\n              <div className=\"flex items-center space-x-6\">\r\n                <div className=\"flex items-center space-x-2 px-4 py-2 bg-blue-50 rounded-xl border border-blue-200\">\r\n                  <Calendar className=\"w-4 h-4 text-blue-600\" />\r\n                  <span className=\"text-sm font-medium text-blue-800\">\r\n                    {counts?.total} Total Active\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2 px-4 py-2 bg-orange-50 rounded-xl border border-orange-200\">\r\n                  <RefreshCw className=\"w-4 h-4 text-orange-600\" />\r\n                  <span className=\"text-sm font-medium text-orange-800\">\r\n                    {counts?.inProgress} In Progress\r\n                  </span>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2 px-4 py-2 bg-green-50 rounded-xl border border-green-200\">\r\n                  <CheckCircle className=\"w-4 h-4 text-green-600\" />\r\n                  <span className=\"text-sm font-medium text-green-800\">\r\n                    {counts?.scheduled} Scheduled\r\n                  </span>\r\n                </div>\r\n                {counts?.overdue > 0 && (\r\n                  <div className=\"flex items-center space-x-2 px-4 py-2 bg-red-50 rounded-xl border border-red-200\">\r\n                    <AlertTriangle className=\"w-4 h-4 text-red-600\" />\r\n                    <span className=\"text-sm font-medium text-red-800\">\r\n                      {counts?.overdue} Overdue\r\n                    </span>\r\n                  </div>\r\n                )}\r\n                {counts?.unassigned > 0 && (\r\n                  <div className=\"flex items-center space-x-2 px-4 py-2 bg-purple-50 rounded-xl border border-purple-200\">\r\n                    <UserPlus className=\"w-4 h-4 text-purple-600\" />\r\n                    <span className=\"text-sm font-medium text-purple-800\">\r\n                      {counts?.unassigned} Unassigned\r\n                    </span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {counts?.unassigned > 0 && (\r\n                <button\r\n                  onClick={() => setShowAssignmentPanel(true)}\r\n                  className=\"flex items-center space-x-2 px-4 py-2 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-xl transition-all duration-200 text-sm font-medium\"\r\n                >\r\n                  <Users className=\"w-4 h-4\" />\r\n                  <span>Assign Jobs</span>\r\n                  <ArrowUpRight className=\"w-4 h-4\" />\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Performance Widget */}\r\n        {showPerformanceWidget && (\r\n          <PerformanceWidget\r\n            metrics={performanceMetrics}\r\n            onClose={() => setShowPerformanceWidget(false)}\r\n          />\r\n        )}\r\n\r\n        {/* Bulk Operations Panel */}\r\n        {bulkOperationsMode && selectedAppointments?.size > 0 && (\r\n          <BulkOperationsPanel\r\n            selectedCount={selectedAppointments?.size}\r\n            onStatusUpdate={handleBulkStatusUpdate}\r\n            onAssign={() => setShowAssignmentPanel(true)}\r\n            onCancel={() => {\r\n              setSelectedAppointments(new Set())\r\n              setBulkOperationsMode(false)\r\n            }}\r\n          />\r\n        )}\r\n\r\n        {/* Assignment Quick Panel */}\r\n        {showAssignmentPanel && (\r\n          <AssignmentQuickPanel\r\n            unassignedJobs={unassignedJobs}\r\n            staffMembers={staffMembers}\r\n            selectedAppointments={selectedAppointments}\r\n            onQuickAssign={handleQuickAssignJob}\r\n            onBulkAssign={handleBulkAssignment}\r\n            onClose={() => setShowAssignmentPanel(false)}\r\n          />\r\n        )}\r\n\r\n        {/* Main Content */}\r\n        <div className=\"flex\">\r\n          {/* Appointments List (60%) */}\r\n          <div className=\"flex-1 p-8\" style={{ width: showDetailPanel ? '60%' : '100%' }}>\r\n            {/* Filter Controls */}\r\n            <FilterControls\r\n              statusFilter={statusFilter}\r\n              setStatusFilter={setStatusFilter}\r\n              vendorFilter={vendorFilter}\r\n              setVendorFilter={setVendorFilter}\r\n              priorityFilter={priorityFilter}\r\n              setPriorityFilter={setPriorityFilter}\r\n              vendors={vendors}\r\n            />\r\n\r\n            {/* Appointments Grid */}\r\n            {appointments?.length > 0 ? (\r\n              <div className=\"space-y-4\">\r\n                {appointments?.map((appointment) => (\r\n                  <AppointmentCard\r\n                    key={appointment?.id}\r\n                    appointment={appointment}\r\n                    onClick={() => handleAppointmentClick(appointment)}\r\n                    onUpdateStatus={handleUpdateStatus}\r\n                    isSelected={selectedAppointments?.has(appointment?.id)}\r\n                    bulkMode={bulkOperationsMode}\r\n                    onToggleSelect={() => toggleAppointmentSelection(appointment?.id)}\r\n                  />\r\n                ))}\r\n              </div>\r\n            ) : (\r\n              <div className=\"text-center py-20\">\r\n                <div className=\"w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center\">\r\n                  <Clock className=\"w-12 h-12 text-indigo-600\" />\r\n                </div>\r\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-2\">No Active Appointments</h3>\r\n                <p className=\"text-gray-600 mb-8 max-w-md mx-auto\">\r\n                  {searchQuery ||\r\n                  statusFilter !== 'all' ||\r\n                  vendorFilter !== 'all' ||\r\n                  priorityFilter !== 'all'\r\n                    ? 'No appointments match your current filters. Try adjusting your search criteria.'\r\n                    : 'All appointments are completed or there are no scheduled appointments at this time.'}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Appointment Detail Panel (40%) */}\r\n          {showDetailPanel && selectedAppointment && (\r\n            <div className=\"w-2/5 border-l border-gray-200/50\">\r\n              <AppointmentDetailPanel\r\n                appointment={selectedAppointment}\r\n                onClose={() => setShowDetailPanel(false)}\r\n                onUpdate={loadAppointments}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </AppLayout>\r\n  )\r\n}\r\n\r\nexport default CurrentlyActiveAppointments\r\n"],"names":["AppointmentCard","appointment","onClick","onUpdateStatus","isSelected","bulkMode","onToggleSelect","StatusIcon","_a","isOverdue","formatTime","timestamp","timeRemaining","now","diffMs","diffHours","diffDays","handleStatusChange","newStatus","e","handleCardClick","handleCheckboxClick","jsxs","jsx","Check","AlertTriangle","_b","_c","_d","User","_g","_f","_e","_h","_i","_j","_k","Car","_l","_m","_n","_o","_p","_r","_q","_s","_t","_u","_v","Phone","_w","_x","Mail","_y","Building2","Fragment","_z","_A","Calendar","ArrowRight","propsAreEqual","prev","next","b","AppointmentCard$1","React","AppointmentDetailPanel","onClose","onUpdate","communications","setCommunications","useState","jobParts","setJobParts","loading","setLoading","editingNotes","setEditingNotes","notes","setNotes","newCommunication","setNewCommunication","sendingMessage","setSendingMessage","useEffect","loadAppointmentDetails","commsData","commsError","supabase","partsData","partsError","error","handleSaveNotes","handleSendMessage","formatCurrency","amount","totalEstimatedCost","sum","part","X","Clock","CalendarClock","MapPin","_B","_C","_D","_E","_F","DollarSign","FileText","Save","Edit3","MessageCircle","RefreshCw","comm","index","FilterControls","statusFilter","setStatusFilter","vendorFilter","setVendorFilter","priorityFilter","setPriorityFilter","vendors","Filter","vendor","Star","v","BulkOperationsPanel","selectedCount","onStatusUpdate","onAssign","onCancel","CheckCircle","Users","PerformanceWidget","metrics","formatHours","hours","getCompletionRateColor","rate","getCompletionRateBg","BarChart3","TrendingUp","AssignmentQuickPanel","unassignedJobs","staffMembers","selectedAppointments","onQuickAssign","onBulkAssign","selectedStaff","setSelectedStaff","assignmentMode","setAssignmentMode","handleBulkAssign","handleQuickAssign","jobId","formatJobTime","UserPlus","staff","job","s","CurrentlyActiveAppointments","appointments","setAppointments","originalAppointments","setOriginalAppointments","selectedAppointment","setSelectedAppointment","showDetailPanel","setShowDetailPanel","searchQuery","setSearchQuery","setVendors","refreshing","setRefreshing","setSelectedAppointments","bulkOperationsMode","setBulkOperationsMode","showPerformanceWidget","setShowPerformanceWidget","showAssignmentPanel","setShowAssignmentPanel","setUnassignedJobs","setStaffMembers","performanceMetrics","setPerformanceMetrics","navigate","useNavigate","loadAppointments","loadVendors","loadStaffMembers","loadUnassignedJobs","loadPerformanceMetrics","subscription","applyFilters","data","today","todayJobs","todayError","weekStart","weekStartStr","weekJobs","weekError","todayCompleted","todayTotal","weekCompleted","weekTotal","completedJobs","avgCompletionTime","start","end","jobIds","j","loaners","loanerRows","processedData","l","getStatusConfig","getPriorityConfig","filtered","apt","query","status","configs","priority","handleAppointmentClick","toggleAppointmentSelection","appointmentId","newSelection","handleUpdateStatus","handleBulkStatusUpdate","appointmentIds","handleBulkAssignment","staffId","handleQuickAssignJob","handleRefresh","counts","total","inProgress","scheduled","overdue","unassigned","AppLayout","Search","CheckCheck","ArrowUpRight"],"mappings":"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"}