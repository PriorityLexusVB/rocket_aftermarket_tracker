import{s as D,m as P,k as T,N as G,aj as J,z as W,j as e,H as B,ak as Y,I,u as Z,n as R,F as q,al as E,U as z,am as Q,X as k,an as ee}from"./index-J61ARFIv.js";import{r as p}from"./react-Czq5O75u.js";import{a as X,u as se,L as _}from"./router-CZES1Sa0.js";const y={async getNotifications(x,c={}){var l,i,m,g,o;try{if(!x)return{data:[],error:null,count:0};let r=(i=(l=D)==null?void 0:l.from("communications"))==null?void 0:i.select(`
          id,
          message,
          subject,
          communication_type,
          sent_at,
          is_successful,
          recipient,
          job_id,
          vehicle_id
        `);c!=null&&c.orgId&&(r=r==null?void 0:r.eq("org_id",c.orgId));const{data:t}=await((g=(m=r==null?void 0:r.order("sent_at",{ascending:!1}))==null?void 0:m.limit(10))==null?void 0:g.throwOnError()),h=new Date;h==null||h.setDate((h==null?void 0:h.getDate())-7);const w=(t==null?void 0:t.filter(n=>new Date(n.sent_at)>=h))||[];return{data:w,error:null,count:w==null?void 0:w.length}}catch(r){return(o=r==null?void 0:r.message)!=null&&o.includes("Failed to fetch")?{data:[],error:"Cannot connect to database. Please check your connection.",count:0}:(console.warn("[notify] getNotifications failed:",(r==null?void 0:r.message)||r),{data:[],error:"Failed to load notifications",count:0})}},async getPendingSMSNotifications(x={}){var c,l,i,m,g;try{let o=(i=(l=(c=D)==null?void 0:c.from("notification_outbox"))==null?void 0:l.select("id, status, created_at, message_template, phone_e164"))==null?void 0:i.eq("status","pending");x!=null&&x.orgId&&(o=o==null?void 0:o.eq("org_id",x.orgId));const{data:r}=await((g=(m=o==null?void 0:o.order("created_at",{ascending:!1}))==null?void 0:m.limit(5))==null?void 0:g.throwOnError());return{data:r||[],error:null,count:(r==null?void 0:r.length)||0}}catch(o){return console.warn("[notify] getPendingSMSNotifications failed:",(o==null?void 0:o.message)||o),{data:[],error:"Failed to load pending notifications",count:0}}},async getNotificationCount(x,c={}){try{const[l,i]=await Promise.all([this.getNotifications(x,c),this.getPendingSMSNotifications(c)]);return{count:((l==null?void 0:l.count)||0)+((i==null?void 0:i.count)||0),error:null}}catch(l){return console.warn("[notify] getNotificationCount failed:",(l==null?void 0:l.message)||l),{count:0,error:"Failed to load notification count"}}},subscribeToNotifications(x,c){var l,i,m,g;if(!x||!c)return null;try{return(g=(m=(i=(l=D)==null?void 0:l.channel("notifications"))==null?void 0:i.on("postgres_changes",{event:"*",schema:"public",table:"communications"},()=>{var r;(r=this.getNotificationCount(x))==null||r.then(c)}))==null?void 0:m.on("postgres_changes",{event:"*",schema:"public",table:"notification_outbox"},()=>{var r;(r=this.getNotificationCount(x))==null||r.then(c)}))==null?void 0:g.subscribe()}catch(o){return console.warn("Failed to subscribe to notifications:",o),null}},unsubscribeFromNotifications(x){try{x&&(x==null||x.unsubscribe())}catch(c){console.warn("Failed to unsubscribe from notifications:",c)}}},ae=()=>{const[x,c]=p.useState(!1),[l,i]=p.useState(""),[m,g]=p.useState([]),o=X(),r=p.useRef(),t=[{name:"Calendar & Scheduling",path:"/calendar",icon:P,description:"Manage appointments and scheduling",keywords:["calendar","appointments","schedule","time"]},{name:"Vehicle Management",path:"/vehicles",icon:T,description:"Vehicle inventory and tracking",keywords:["vehicles","inventory","stock","cars"]},{name:"Active Deals",path:"/deals",icon:G,description:"Track deals and installations",keywords:["deals","sales","transactions","money"]},{name:"Administration",path:"/admin",icon:J,description:"Vendor management and system config",keywords:["vendors","partners","suppliers","admin","settings","configuration","users"]},{name:"Analytics Dashboard",path:"/calendar",icon:W,description:"Business intelligence and reports",keywords:["analytics","reports","dashboard","insights"]}];p.useEffect(()=>{if((l==null?void 0:l.length)>1){const n=t==null?void 0:t.filter(a=>{var d,O,C,v,N;return((O=(d=a==null?void 0:a.name)==null?void 0:d.toLowerCase())==null?void 0:O.includes(l==null?void 0:l.toLowerCase()))||((v=(C=a==null?void 0:a.description)==null?void 0:C.toLowerCase())==null?void 0:v.includes(l==null?void 0:l.toLowerCase()))||((N=a==null?void 0:a.keywords)==null?void 0:N.some(S=>{var F;return(F=S==null?void 0:S.toLowerCase())==null?void 0:F.includes(l==null?void 0:l.toLowerCase())}))});g(n)}else g(t==null?void 0:t.slice(0,6))},[l]),p.useEffect(()=>{const n=a=>{(a!=null&&a.metaKey||a!=null&&a.ctrlKey)&&(a==null?void 0:a.key)==="k"&&(a==null||a.preventDefault(),c(!0),setTimeout(()=>{var d;return(d=r==null?void 0:r.current)==null?void 0:d.focus()},100)),(a==null?void 0:a.key)==="Escape"&&(c(!1),i(""))};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[]);const h=n=>{o(n==null?void 0:n.path),c(!1),i("")},w=()=>{c(!1),i("")};return x?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25 flex items-start justify-center pt-16 z-50",onClick:w,children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md mx-4",onClick:n=>n==null?void 0:n.stopPropagation(),children:[e.jsx("div",{className:"p-4 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 w-4 h-4 text-gray-400"}),e.jsx("input",{ref:r,type:"text",placeholder:"Search pages and features...",value:l,onChange:n=>{var a;return i((a=n==null?void 0:n.target)==null?void 0:a.value)},className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),e.jsx("div",{className:"max-h-96 overflow-y-auto",children:m==null?void 0:m.map((n,a)=>{const d=n==null?void 0:n.icon;return e.jsx("button",{onClick:()=>h(n),className:"w-full text-left px-4 py-3 hover:bg-gray-50 focus:bg-gray-50 focus:outline-none border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(d,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900",children:n==null?void 0:n.name}),e.jsx("div",{className:"text-sm text-gray-500",children:n==null?void 0:n.description})]})]})},n==null?void 0:n.path)})}),e.jsxs("div",{className:"p-3 border-t border-gray-200 text-xs text-gray-500 flex items-center justify-between",children:[e.jsx("span",{children:"Press ESC to close"}),e.jsx("span",{children:"â†µ to navigate"})]})]})}):e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center space-x-2 px-3 py-2 text-sm text-gray-500 hover:text-gray-700 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:"Quick search..."}),e.jsx("kbd",{className:"hidden sm:inline-flex items-center px-2 py-0.5 border border-gray-200 rounded text-xs",children:"âŒ˜K"})]})},H=({className:x=""})=>{var r;const{currentTheme:c,changeTheme:l,availableThemes:i}=Y(),[m,g]=p.useState(!1),o=t=>{l(t),g(!1)};return e.jsxs("div",{className:`relative ${x}`,children:[e.jsxs("button",{onClick:()=>g(!m),className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 rounded-lg hover:bg-gray-50 transition-colors duration-200 min-h-[44px] touch-manipulation",title:"Change Theme Style",children:[e.jsx(I,{name:"Palette",size:18}),e.jsx("span",{className:"hidden sm:block",children:"Style"}),e.jsx(I,{name:"ChevronDown",size:14,className:`transform transition-transform duration-200 ${m?"rotate-180":""}`})]}),m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>g(!1)}),e.jsxs("div",{className:"absolute right-0 mt-2 w-80 md:w-96 bg-white rounded-xl shadow-2xl border-2 border-gray-200 py-2 z-40 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"UI Style Presets"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Choose your preferred interface style"})]}),(r=Object.entries(i))==null?void 0:r.map(([t,h])=>e.jsxs("button",{onClick:()=>o(t),className:`w-full px-4 py-4 text-left hover:bg-gray-50 transition-colors duration-150 border-l-4 touch-manipulation min-h-[60px] ${c===t?"border-l-indigo-500 bg-indigo-50":"border-l-transparent"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-base font-bold text-gray-900",children:h==null?void 0:h.name}),c===t&&e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-indigo-100 rounded-full",children:[e.jsx(I,{name:"Check",size:12,className:"text-indigo-600"}),e.jsx("span",{className:"text-xs font-semibold text-indigo-600",children:"Active"})]})]}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:h==null?void 0:h.description})]}),e.jsxs("div",{className:"ml-4 flex flex-col space-y-1",children:[t==="default"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-2 bg-gradient-to-r from-indigo-400 to-purple-400 rounded-sm"}),e.jsx("div",{className:"w-4 h-2 bg-gradient-to-r from-slate-300 to-indigo-300 rounded-sm"}),e.jsx("div",{className:"w-4 h-2 bg-gradient-to-r from-emerald-300 to-green-300 rounded-sm"})]}),t==="neutral-luxe"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-2 bg-white border border-gray-300 rounded-sm"}),e.jsx("div",{className:"w-4 h-2 bg-gray-50 border border-gray-300 rounded-sm"}),e.jsx("div",{className:"w-4 h-2 bg-blue-600 rounded-sm"})]}),t==="carded"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-2 bg-white border-2 border-slate-300 rounded-sm shadow-sm"}),e.jsx("div",{className:"w-4 h-2 bg-white border-2 border-indigo-300 rounded-sm shadow-sm"}),e.jsx("div",{className:"w-4 h-2 bg-gradient-to-r from-indigo-500 to-blue-500 rounded-sm shadow-sm"})]}),t==="compact"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-1.5 bg-gray-300 rounded-sm"}),e.jsx("div",{className:"w-4 h-1.5 bg-indigo-500 rounded-sm"}),e.jsx("div",{className:"w-4 h-1.5 bg-gray-400 rounded-sm"})]}),t==="zebra"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-2 bg-white border border-gray-400 rounded-sm"}),e.jsx("div",{className:"w-4 h-2 bg-gray-100 border border-gray-400 rounded-sm"}),e.jsx("div",{className:"w-4 h-2 bg-white border border-gray-400 rounded-sm"})]})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[t==="default"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-full",children:"Gradients"}),e.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-full",children:"Premium"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:"Luxury"})]}),t==="neutral-luxe"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:"Light"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:"Mobile-First"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Dealership"})]}),t==="carded"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-700 text-xs font-medium rounded-full",children:"Material"}),e.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-full",children:"Elevated"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:"Clean"})]}),t==="compact"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:"Dense"}),e.jsx("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-full",children:"Efficient"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Space-Saving"})]}),t==="zebra"&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs font-medium rounded-full",children:"Striped"}),e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs font-medium rounded-full",children:"Readable"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:"Scannable"})]})]})]},t)),e.jsx("div",{className:"px-4 py-3 border-t border-gray-100 mt-2",children:e.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ Theme preferences are saved automatically and persist across sessions"})})]})]})]})},ne=()=>{var M,$,L,U,K,V;const[x,c]=p.useState(!1),[l,i]=p.useState(!1),[m,g]=p.useState(!1),[o,r]=p.useState(0),[t,h]=p.useState([]),[w,n]=p.useState(!1),{user:a,userProfile:d,signOut:O}=Z(),C=X(),v=se(),N=[{name:"Calendar",href:"/calendar-flow-management-center",icon:P},{name:"Appointments",href:"/currently-active-appointments",icon:R,shortName:"Active"},{name:"Claims",href:"/claims-management-center",icon:q},{name:"Deals",href:"/deals",icon:G},{name:"Analytics",href:"/advanced-business-intelligence-analytics",icon:W},{name:"Admin",href:"/admin",icon:J}];p.useEffect(()=>{let s=null;return(async()=>{if(!(a!=null&&a.id)){r(0),h([]);return}n(!0);try{const[u,b]=await Promise.all([y==null?void 0:y.getNotificationCount(a==null?void 0:a.id),y==null?void 0:y.getNotifications(a==null?void 0:a.id)]);u!=null&&u.error?(console.warn("Notification count error:",u==null?void 0:u.error),r(0)):r((u==null?void 0:u.count)||0),b!=null&&b.error?(console.warn("Notifications load error:",b==null?void 0:b.error),h([])):h((b==null?void 0:b.data)||[]),s=y==null?void 0:y.subscribeToNotifications(a==null?void 0:a.id,f=>{f!=null&&f.error?console.warn("Real-time notification error:",f==null?void 0:f.error):r((f==null?void 0:f.count)||0)})}catch(u){console.warn("Failed to load notifications:",u),r(0),h([])}finally{n(!1)}})(),()=>{s&&(y==null||y.unsubscribeFromNotifications(s))}},[a==null?void 0:a.id]);const S=async()=>{try{await O(),C("/auth")}catch(s){console.error("Error signing out:",s)}},F=s=>{var j;return(v==null?void 0:v.pathname)===s||((j=v==null?void 0:v.pathname)==null?void 0:j.startsWith(s+"/"))},A=s=>{if(!s)return"";try{const j=new Date(s),u=new Date,b=(u-j)/(1e3*60*60);if(b<1){const f=Math.floor((u-j)/6e4);return f<=0?"Just now":`${f}m ago`}else return b<24?`${Math.floor(b)}h ago`:`${Math.floor(b/24)}d ago`}catch{return""}};return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200 shadow-lg",children:e.jsx("div",{className:"grid grid-cols-5 h-16",children:(M=N==null?void 0:N.slice(0,5))==null?void 0:M.map(s=>{const j=s==null?void 0:s.icon,u=F(s==null?void 0:s.href),b=(s==null?void 0:s.shortName)||(s==null?void 0:s.name);return e.jsxs(_,{to:s==null?void 0:s.href,className:`flex flex-col items-center justify-center space-y-1 px-1 transition-colors duration-200 ${u?"text-blue-600 bg-blue-50":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{className:"text-[10px] font-medium leading-tight text-center",children:b})]},s==null?void 0:s.name)})})}),e.jsx("nav",{className:"hidden md:block fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 lg:px-6",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsxs(_,{to:"/",className:"flex items-center space-x-2 group",children:[e.jsx("div",{className:"w-9 h-9 bg-blue-600 rounded-lg flex items-center justify-center shadow-md group-hover:bg-blue-700 transition-colors duration-200",children:e.jsx(T,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"w-2"})]})}),e.jsx("div",{className:"flex items-center space-x-1",children:N==null?void 0:N.map(s=>{const j=s==null?void 0:s.icon,u=F(s==null?void 0:s.href);return e.jsxs(_,{to:s==null?void 0:s.href,className:`flex items-center space-x-1.5 px-2.5 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${u?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden lg:inline",children:s==null?void 0:s.name})]},s==null?void 0:s.name)})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(ae,{})}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(H,{})}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>g(!m),className:"relative p-2 text-gray-400 hover:text-blue-600 transition-colors duration-200 rounded-lg hover:bg-gray-50",children:[e.jsx(E,{className:"w-5 h-5"}),o>0&&e.jsx("div",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] bg-red-500 rounded-full text-xs text-white flex items-center justify-center font-bold px-1",children:o>99?"99+":o})]}),m&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50 max-h-96 overflow-y-auto",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Recent Activity"}),w&&e.jsx("div",{className:"text-xs text-gray-500",children:"Loading..."})]})}),e.jsxs("div",{className:"py-1",children:[(t==null?void 0:t.length)>0?t==null?void 0:t.map(s=>e.jsx("div",{className:"px-4 py-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx("div",{className:`w-2 h-2 rounded-full ${s!=null&&s.is_successful?"bg-green-500":"bg-red-500"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 truncate",children:(s==null?void 0:s.subject)||"Communication"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:(s==null?void 0:s.message)||`${s==null?void 0:s.communication_type} to ${s==null?void 0:s.recipient}`}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:A(s==null?void 0:s.sent_at)})]})]})},s==null?void 0:s.id)):e.jsxs("div",{className:"px-4 py-6 text-center",children:[e.jsx(E,{className:"w-8 h-8 text-gray-300 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-500",children:"No recent notifications"}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Communications will appear here"})]}),(t==null?void 0:t.length)>0&&e.jsx("div",{className:"px-4 py-3 border-t border-gray-200",children:e.jsx(_,{to:"/communications",onClick:()=>g(!1),className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View all communications â†’"})})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!l),className:"flex items-center space-x-3 p-2 text-gray-600 hover:text-blue-600 rounded-lg hover:bg-gray-50 transition-colors duration-200",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsxs("div",{className:"hidden xl:block text-left",children:[e.jsx("p",{className:"text-sm font-medium",children:(d==null?void 0:d.full_name)||((L=($=a==null?void 0:a.email)==null?void 0:$.split("@"))==null?void 0:L[0])||"User"}),e.jsx("p",{className:"text-xs text-gray-500 capitalize",children:(d==null?void 0:d.role)||"Staff"})]})]}),l&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center",children:e.jsx(z,{className:"w-5 h-5 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(d==null?void 0:d.full_name)||"User"}),e.jsx("p",{className:"text-xs text-gray-500",children:a==null?void 0:a.email}),(d==null?void 0:d.role)&&e.jsx("p",{className:"text-xs text-blue-600 capitalize font-medium",children:d==null?void 0:d.role})]})]})}),e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{onClick:()=>{i(!1),C("/profile")},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 hover:text-blue-600 transition-colors duration-200",children:[e.jsx(z,{className:"w-4 h-4 mr-3"}),"Profile Settings"]}),e.jsxs("button",{onClick:S,className:"flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors duration-200",children:[e.jsx(Q,{className:"w-4 h-4 mr-3"}),"Sign Out"]})]})]})]})]})]})})}),e.jsxs("nav",{className:"md:hidden bg-white border-b border-gray-200 shadow-sm sticky top-0 z-40",children:[e.jsxs("div",{className:"flex items-center justify-between h-16 px-4",children:[e.jsxs(_,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsx(T,{className:"w-4 h-4 text-white"})}),e.jsx("div",{className:"w-1"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:()=>g(!m),className:"relative p-2 text-gray-400 hover:text-blue-600",children:[e.jsx(E,{className:"w-5 h-5"}),o>0&&e.jsx("div",{className:"absolute -top-1 -right-1 min-w-[16px] h-[16px] bg-red-500 rounded-full text-xs text-white flex items-center justify-center font-bold px-1",children:o>99?"99+":o})]}),e.jsx("button",{onClick:()=>c(!x),className:"p-2 text-gray-600 hover:text-blue-600 rounded-lg hover:bg-gray-50",children:x?e.jsx(k,{className:"w-6 h-6"}):e.jsx(ee,{className:"w-6 h-6"})})]})]}),m&&e.jsxs("div",{className:"border-t border-gray-200 bg-white max-h-60 overflow-y-auto",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100",children:e.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Recent Activity"})}),(t==null?void 0:t.length)>0?(U=t==null?void 0:t.slice(0,3))==null?void 0:U.map(s=>e.jsx("div",{className:"px-4 py-3 border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 flex-shrink-0 ${s!=null&&s.is_successful?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900 truncate",children:(s==null?void 0:s.subject)||"Communication"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:A(s==null?void 0:s.sent_at)})]})]})},s==null?void 0:s.id)):e.jsx("div",{className:"px-4 py-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No recent notifications"})})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 z-40",onClick:()=>c(!1)}),e.jsx("div",{className:"fixed top-16 right-0 w-72 h-full bg-white shadow-xl z-50 overflow-y-auto border-l border-gray-200",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-xl mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl flex items-center justify-center",children:e.jsx(z,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:(d==null?void 0:d.full_name)||((V=(K=a==null?void 0:a.email)==null?void 0:K.split("@"))==null?void 0:V[0])||"User"}),e.jsx("p",{className:"text-xs text-gray-500",children:a==null?void 0:a.email}),(d==null?void 0:d.role)&&e.jsx("p",{className:"text-xs text-blue-600 capitalize font-medium",children:d==null?void 0:d.role})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx(H,{className:"w-full"})}),e.jsxs("div",{className:"space-y-1 mb-6",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-3",children:"Navigation"}),N==null?void 0:N.map(s=>{const j=s==null?void 0:s.icon,u=F(s==null?void 0:s.href);return e.jsxs(_,{to:s==null?void 0:s.href,onClick:()=>c(!1),className:`flex items-center space-x-3 px-3 py-3 rounded-lg text-sm font-medium transition-colors duration-200 ${u?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-600 hover:text-blue-600 hover:bg-gray-50"}`,children:[e.jsx(j,{className:"w-5 h-5"}),e.jsx("span",{children:s==null?void 0:s.name})]},s==null?void 0:s.name)})]}),e.jsxs("div",{className:"space-y-2 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider mb-3",children:"Account"}),e.jsxs("button",{onClick:()=>{c(!1),C("/profile")},className:"flex items-center w-full space-x-3 px-3 py-3 text-sm text-gray-600 hover:text-blue-600 hover:bg-gray-50 rounded-lg transition-colors duration-200",children:[e.jsx(z,{className:"w-5 h-5"}),e.jsx("span",{children:"Profile Settings"})]}),e.jsxs("button",{onClick:S,className:"flex items-center w-full space-x-3 px-3 py-3 text-sm text-red-600 hover:bg-red-50 rounded-lg transition-colors duration-200",children:[e.jsx(Q,{className:"w-5 h-5"}),e.jsx("span",{children:"Sign Out"})]})]})]})})]})]}),(l||m)&&e.jsx("div",{className:"fixed inset-0 z-30",onClick:()=>{i(!1),g(!1)}})]})};export{ne as N};
//# sourceMappingURL=Navbar-DB6JDjwm.js.map
