{"version":3,"file":"index-CXZTO1lW.js","sources":["../../src/pages/loaner-management-drawer/index.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { supabase } from '../../lib/supabase'\r\nimport { useAuth } from '../../contexts/AuthContext'\r\nimport Navbar from '../../components/ui/Navbar'\r\nimport Button from '../../components/ui/Button'\r\nimport Icon from '../../components/ui/Icon'\r\n\r\nexport default function LoanerManagementDrawer() {\r\n  const { user } = useAuth()\r\n  const [loaners, setLoaners] = useState([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [error, setError] = useState('')\r\n  const [showAssignModal, setShowAssignModal] = useState(false)\r\n  const [selectedJob, setSelectedJob] = useState(null)\r\n  const [inventory, setInventory] = useState({\r\n    available: 0,\r\n    assigned: 0,\r\n    overdue: 0,\r\n  })\r\n\r\n  // Loaner assignment form state\r\n  const [assignmentForm, setAssignmentForm] = useState({\r\n    loaner_number: '',\r\n    eta_return_date: '',\r\n    notes: '',\r\n  })\r\n\r\n  // Load loaner data\r\n  const loadLoaners = async () => {\r\n    try {\r\n      setLoading(true)\r\n      setError('')\r\n\r\n      // Get all loaner assignments with job and customer data\r\n      const { data: assignments, error: assignmentsError } = await supabase\r\n        ?.from('loaner_assignments')\r\n        ?.select(\r\n          `\r\n          id,\r\n          job_id,\r\n          loaner_number,\r\n          eta_return_date,\r\n          returned_at,\r\n          notes,\r\n          created_at,\r\n          jobs (\r\n            id,\r\n            title,\r\n            customer_needs_loaner,\r\n            transactions (\r\n              customer_name,\r\n              customer_phone\r\n            )\r\n          )\r\n        `\r\n        )\r\n        ?.order('created_at', { ascending: false })\r\n\r\n      if (assignmentsError) throw assignmentsError\r\n\r\n      // Calculate inventory stats\r\n      const today = new Date()\r\n      const assigned = assignments?.filter((a) => !a?.returned_at)?.length || 0\r\n      const overdue =\r\n        assignments?.filter((a) => !a?.returned_at && new Date(a?.eta_return_date) < today)\r\n          ?.length || 0\r\n\r\n      setLoaners(assignments || [])\r\n      setInventory({\r\n        available: Math.max(0, 10 - assigned), // Assuming 10 total loaners\r\n        assigned,\r\n        overdue,\r\n      })\r\n    } catch (err) {\r\n      setError(`Failed to load loaner data: ${err?.message}`)\r\n      console.error('Load loaners error:', err)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  // Load jobs that need loaners\r\n  const [jobsNeedingLoaners, setJobsNeedingLoaners] = useState([])\r\n\r\n  const loadJobsNeedingLoaners = async () => {\r\n    try {\r\n      const { data: jobs, error } = await supabase\r\n        ?.from('jobs')\r\n        ?.select(\r\n          `\r\n          id,\r\n          title,\r\n          customer_needs_loaner,\r\n          transactions (\r\n            customer_name,\r\n            customer_phone\r\n          ),\r\n          loaner_assignments (\r\n            id,\r\n            returned_at\r\n          )\r\n        `\r\n        )\r\n        ?.eq('customer_needs_loaner', true)\r\n        ?.in('job_status', ['pending', 'in_progress'])\r\n\r\n      if (error) throw error\r\n\r\n      // Filter jobs that don't have active loaner assignments\r\n      const jobsWithoutActiveLoaners = jobs?.filter((job) => {\r\n        const hasActiveLoaner = job?.loaner_assignments?.some((la) => !la?.returned_at)\r\n        return !hasActiveLoaner\r\n      })\r\n\r\n      setJobsNeedingLoaners(jobsWithoutActiveLoaners || [])\r\n    } catch (err) {\r\n      console.error('Load jobs needing loaners error:', err)\r\n    }\r\n  }\r\n\r\n  // Handle loaner assignment\r\n  const handleAssignLoaner = async () => {\r\n    if (\r\n      !selectedJob ||\r\n      !assignmentForm?.loaner_number?.trim() ||\r\n      !assignmentForm?.eta_return_date\r\n    ) {\r\n      setError('Please fill in all required fields')\r\n      return\r\n    }\r\n\r\n    try {\r\n      setError('')\r\n\r\n      const { error } = await supabase?.from('loaner_assignments')?.insert([\r\n        {\r\n          job_id: selectedJob?.id,\r\n          loaner_number: assignmentForm?.loaner_number?.trim(),\r\n          eta_return_date: assignmentForm?.eta_return_date,\r\n          notes: assignmentForm?.notes?.trim() || null,\r\n        },\r\n      ])\r\n\r\n      if (error) throw error\r\n\r\n      // Reset form and close modal\r\n      setAssignmentForm({ loaner_number: '', eta_return_date: '', notes: '' })\r\n      setShowAssignModal(false)\r\n      setSelectedJob(null)\r\n\r\n      // Reload data\r\n      await Promise.all([loadLoaners(), loadJobsNeedingLoaners()])\r\n    } catch (err) {\r\n      setError(`Failed to assign loaner: ${err?.message}`)\r\n    }\r\n  }\r\n\r\n  // Handle mark returned\r\n  const handleMarkReturned = async (assignmentId) => {\r\n    try {\r\n      setError('')\r\n\r\n      const { error } = await supabase\r\n        ?.from('loaner_assignments')\r\n        ?.update({ returned_at: new Date()?.toISOString() })\r\n        ?.eq('id', assignmentId)\r\n\r\n      if (error) throw error\r\n\r\n      await loadLoaners()\r\n    } catch (err) {\r\n      setError(`Failed to mark loaner as returned: ${err?.message}`)\r\n    }\r\n  }\r\n\r\n  // Format date for display\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return 'â€”'\r\n    return new Date(dateString)?.toLocaleDateString('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      year: 'numeric',\r\n    })\r\n  }\r\n\r\n  // Determine loaner status\r\n  const getLoanerStatus = (assignment) => {\r\n    if (assignment?.returned_at) return 'returned'\r\n\r\n    const today = new Date()\r\n    const etaDate = new Date(assignment?.eta_return_date)\r\n\r\n    if (etaDate < today) return 'overdue'\r\n\r\n    const daysDiff = Math.ceil((etaDate - today) / (1000 * 60 * 60 * 24))\r\n    if (daysDiff <= 2) return 'due-soon'\r\n\r\n    return 'active'\r\n  }\r\n\r\n  // Status colors and labels\r\n  const getStatusDisplay = (status) => {\r\n    const statusMap = {\r\n      active: {\r\n        color: 'bg-green-100 text-green-800 border-green-200',\r\n        label: 'Active',\r\n      },\r\n      'due-soon': {\r\n        color: 'bg-yellow-100 text-yellow-800 border-yellow-200',\r\n        label: 'Due Soon',\r\n      },\r\n      overdue: {\r\n        color: 'bg-red-100 text-red-800 border-red-200',\r\n        label: 'Overdue',\r\n      },\r\n      returned: {\r\n        color: 'bg-gray-100 text-gray-700 border-gray-200',\r\n        label: 'Returned',\r\n      },\r\n    }\r\n\r\n    return statusMap?.[status] || statusMap?.['active']\r\n  }\r\n\r\n  useEffect(() => {\r\n    Promise.all([loadLoaners(), loadJobsNeedingLoaners()])\r\n  }, [])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-slate-50 text-slate-900\">\r\n        <Navbar />\r\n        <div className=\"p-4 md:p-8\" style={{ paddingTop: '5rem' }}>\r\n          <div className=\"flex items-center justify-center py-12\">\r\n            <div className=\"text-center\">\r\n              <Icon name=\"Loader\" size={32} className=\"animate-spin mx-auto mb-4 text-slate-400\" />\r\n              <div className=\"text-slate-600\">Loading loaner management...</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-slate-50 text-slate-900\">\r\n      <Navbar />\r\n      <div className=\"p-4 md:p-8 max-w-7xl mx-auto\" style={{ paddingTop: '5rem' }}>\r\n        {/* Error Display */}\r\n        {error && (\r\n          <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n            <div className=\"flex justify-between items-start\">\r\n              <div className=\"flex\">\r\n                <Icon name=\"AlertCircle\" size={20} className=\"text-red-500 mr-2 mt-0.5\" />\r\n                <div>\r\n                  <h4 className=\"text-sm font-medium text-red-800\">Error</h4>\r\n                  <p className=\"text-sm text-red-700 mt-1\">{error}</p>\r\n                </div>\r\n              </div>\r\n              <button\r\n                onClick={() => setError('')}\r\n                className=\"text-red-400 hover:text-red-600\"\r\n                aria-label=\"Dismiss error\"\r\n              >\r\n                <Icon name=\"X\" size={16} />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Header */}\r\n        <div className=\"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4\">\r\n          <div>\r\n            <h1 className=\"text-2xl md:text-3xl font-bold text-slate-900\">Loaner Management</h1>\r\n            <p className=\"text-slate-600 mt-1\">Track and manage loaner vehicle assignments</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Inventory Overview */}\r\n        <div className=\"mb-8\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\r\n            {/* Available Loaners */}\r\n            <div className=\"bg-white p-6 rounded-xl border shadow-sm\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-3 rounded-lg bg-green-100 mr-4\">\r\n                  <Icon name=\"Car\" size={24} className=\"text-green-700\" />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"text-slate-600 text-sm font-medium uppercase tracking-wide\">\r\n                    Available\r\n                  </h3>\r\n                  <p className=\"text-slate-900 text-2xl font-bold\">{inventory?.available}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Assigned Loaners */}\r\n            <div className=\"bg-white p-6 rounded-xl border shadow-sm\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-3 rounded-lg bg-blue-100 mr-4\">\r\n                  <Icon name=\"Users\" size={24} className=\"text-blue-700\" />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"text-slate-600 text-sm font-medium uppercase tracking-wide\">\r\n                    Assigned\r\n                  </h3>\r\n                  <p className=\"text-slate-900 text-2xl font-bold\">{inventory?.assigned}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Overdue Returns */}\r\n            <div className=\"bg-white p-6 rounded-xl border shadow-sm\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-3 rounded-lg bg-red-100 mr-4\">\r\n                  <Icon name=\"AlertTriangle\" size={24} className=\"text-red-700\" />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"text-slate-600 text-sm font-medium uppercase tracking-wide\">\r\n                    Overdue\r\n                  </h3>\r\n                  <p className=\"text-slate-900 text-2xl font-bold\">{inventory?.overdue}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Jobs Needing Loaners */}\r\n            <div className=\"bg-white p-6 rounded-xl border shadow-sm\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-3 rounded-lg bg-purple-100 mr-4\">\r\n                  <Icon name=\"Clock\" size={24} className=\"text-purple-700\" />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"text-slate-600 text-sm font-medium uppercase tracking-wide\">\r\n                    Pending\r\n                  </h3>\r\n                  <p className=\"text-slate-900 text-2xl font-bold\">{jobsNeedingLoaners?.length}</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Jobs Needing Loaners Section */}\r\n        {jobsNeedingLoaners?.length > 0 && (\r\n          <div className=\"mb-8\">\r\n            <div className=\"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6\">\r\n              <div className=\"flex items-center\">\r\n                <Icon name=\"AlertCircle\" size={20} className=\"text-yellow-600 mr-2\" />\r\n                <div>\r\n                  <h3 className=\"font-medium text-yellow-800\">Jobs Requiring Loaner Assignment</h3>\r\n                  <p className=\"text-sm text-yellow-700 mt-1\">\r\n                    {jobsNeedingLoaners?.length} job{jobsNeedingLoaners?.length !== 1 ? 's' : ''}{' '}\r\n                    need loaner vehicles assigned\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid gap-4\">\r\n              {jobsNeedingLoaners?.map((job) => (\r\n                <div\r\n                  key={job?.id}\r\n                  className=\"bg-white rounded-lg border p-4 flex flex-col md:flex-row md:items-center justify-between gap-4\"\r\n                >\r\n                  <div>\r\n                    <h4 className=\"font-medium text-slate-900\">\r\n                      {job?.job_number || job?.transactions?.[0]?.customer_name || 'â€”'}\r\n                    </h4>\r\n                    <p className=\"text-sm text-slate-600\">\r\n                      Customer: {job?.transactions?.[0]?.customer_name || 'Unknown'}\r\n                    </p>\r\n                    {job?.transactions?.[0]?.customer_phone && (\r\n                      <p className=\"text-sm text-slate-500\">\r\n                        Phone: {job?.transactions?.[0]?.customer_phone}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  <Button\r\n                    onClick={() => {\r\n                      setSelectedJob(job)\r\n                      setShowAssignModal(true)\r\n                    }}\r\n                    className=\"bg-purple-600 hover:bg-purple-700 text-white h-11 px-6\"\r\n                  >\r\n                    <Icon name=\"Car\" size={16} className=\"mr-2\" />\r\n                    Assign Loaner\r\n                  </Button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Active Loaner Assignments */}\r\n        <div className=\"bg-white rounded-lg border overflow-hidden shadow-sm\">\r\n          <div className=\"p-6 border-b\">\r\n            <h2 className=\"text-lg font-semibold text-slate-900\">Active Loaner Assignments</h2>\r\n            <p className=\"text-sm text-slate-600 mt-1\">\r\n              Track current and returned loaner vehicles\r\n            </p>\r\n          </div>\r\n\r\n          {loaners?.length === 0 ? (\r\n            <div className=\"p-8 text-center text-slate-500\">\r\n              <Icon name=\"Car\" size={48} className=\"mx-auto mb-4 text-slate-300\" />\r\n              <p>No loaner assignments found</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full\">\r\n                <thead className=\"bg-slate-50\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider\">\r\n                      Loaner #\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider\">\r\n                      Customer\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider\">\r\n                      Job\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider\">\r\n                      Expected Return\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider\">\r\n                      Status\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-right text-xs font-medium text-slate-500 uppercase tracking-wider\">\r\n                      Actions\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-slate-200\">\r\n                  {loaners?.map((assignment) => {\r\n                    const status = getLoanerStatus(assignment)\r\n                    const statusDisplay = getStatusDisplay(status)\r\n\r\n                    return (\r\n                      <tr key={assignment?.id} className=\"hover:bg-slate-50\">\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"flex items-center\">\r\n                            <Icon name=\"Car\" size={16} className=\"text-slate-400 mr-2\" />\r\n                            <span className=\"font-medium text-slate-900\">\r\n                              #{assignment?.loaner_number}\r\n                            </span>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4\">\r\n                          <div>\r\n                            <div className=\"font-medium text-slate-900\">\r\n                              {assignment?.jobs?.transactions?.[0]?.customer_name || 'Unknown'}\r\n                            </div>\r\n                            {assignment?.jobs?.transactions?.[0]?.customer_phone && (\r\n                              <div className=\"text-sm text-slate-500\">\r\n                                {assignment?.jobs?.transactions?.[0]?.customer_phone}\r\n                              </div>\r\n                            )}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4\">\r\n                          <div className=\"text-sm text-slate-900\">\r\n                            {assignment?.jobs?.job_number ||\r\n                              assignment?.jobs?.transactions?.[0]?.customer_name ||\r\n                              'Unknown Job'}\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"text-sm text-slate-900\">\r\n                            {formatDate(assignment?.eta_return_date)}\r\n                          </div>\r\n                          {assignment?.returned_at && (\r\n                            <div className=\"text-xs text-slate-500\">\r\n                              Returned: {formatDate(assignment?.returned_at)}\r\n                            </div>\r\n                          )}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span\r\n                            className={`inline-flex items-center px-2 py-1 rounded text-xs font-medium border ${statusDisplay?.color}`}\r\n                          >\r\n                            {statusDisplay?.label}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm\">\r\n                          {!assignment?.returned_at && (\r\n                            <Button\r\n                              size=\"sm\"\r\n                              variant=\"ghost\"\r\n                              onClick={() => handleMarkReturned(assignment?.id)}\r\n                              className=\"text-green-600 hover:text-green-800\"\r\n                            >\r\n                              Mark Returned\r\n                            </Button>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    )\r\n                  })}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Assignment Modal */}\r\n        {showAssignModal && selectedJob && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n            <div className=\"bg-white rounded-xl w-full max-w-md\">\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-center justify-between mb-6\">\r\n                  <h3 className=\"text-lg font-semibold text-slate-900\">Assign Loaner Vehicle</h3>\r\n                  <button\r\n                    onClick={() => {\r\n                      setShowAssignModal(false)\r\n                      setSelectedJob(null)\r\n                      setAssignmentForm({ loaner_number: '', eta_return_date: '', notes: '' })\r\n                    }}\r\n                    className=\"text-slate-400 hover:text-slate-600\"\r\n                  >\r\n                    <Icon name=\"X\" size={20} />\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Job Info */}\r\n                <div className=\"mb-6 p-4 bg-slate-50 rounded-lg border\">\r\n                  <h4 className=\"font-medium text-slate-900 mb-1\">\r\n                    {selectedJob?.job_number ||\r\n                      selectedJob?.transactions?.[0]?.customer_name ||\r\n                      'â€”'}\r\n                  </h4>\r\n                  <p className=\"text-sm text-slate-600\">\r\n                    {selectedJob?.transactions?.[0]?.customer_name}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Assignment Form */}\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-slate-700 mb-2\">\r\n                      Loaner Number *\r\n                    </label>\r\n                    <input\r\n                      type=\"text\"\r\n                      value={assignmentForm?.loaner_number}\r\n                      onChange={(e) =>\r\n                        setAssignmentForm((prev) => ({\r\n                          ...prev,\r\n                          loaner_number: e?.target?.value,\r\n                        }))\r\n                      }\r\n                      className=\"bg-white border border-slate-200 rounded-lg w-full h-11 px-3 text-base focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                      placeholder=\"e.g., L-001\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-slate-700 mb-2\">\r\n                      Expected Return Date *\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={assignmentForm?.eta_return_date}\r\n                      onChange={(e) =>\r\n                        setAssignmentForm((prev) => ({\r\n                          ...prev,\r\n                          eta_return_date: e?.target?.value,\r\n                        }))\r\n                      }\r\n                      className=\"bg-white border border-slate-200 rounded-lg w-full h-11 px-3 text-base focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                      min={new Date()?.toISOString()?.split('T')?.[0]}\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-slate-700 mb-2\">\r\n                      Notes (optional)\r\n                    </label>\r\n                    <textarea\r\n                      value={assignmentForm?.notes}\r\n                      onChange={(e) =>\r\n                        setAssignmentForm((prev) => ({\r\n                          ...prev,\r\n                          notes: e?.target?.value,\r\n                        }))\r\n                      }\r\n                      className=\"bg-white border border-slate-200 rounded-lg w-full px-3 py-2 text-base focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n                      rows={3}\r\n                      placeholder=\"Any special instructions or notes...\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                {/* Modal Actions */}\r\n                <div className=\"flex gap-3 mt-6\">\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    onClick={() => {\r\n                      setShowAssignModal(false)\r\n                      setSelectedJob(null)\r\n                      setAssignmentForm({ loaner_number: '', eta_return_date: '', notes: '' })\r\n                    }}\r\n                    className=\"flex-1 h-11\"\r\n                  >\r\n                    Cancel\r\n                  </Button>\r\n                  <Button\r\n                    onClick={handleAssignLoaner}\r\n                    className=\"flex-1 h-11 bg-purple-600 hover:bg-purple-700 text-white\"\r\n                    disabled={\r\n                      !assignmentForm?.loaner_number?.trim() || !assignmentForm?.eta_return_date\r\n                    }\r\n                  >\r\n                    Assign Loaner\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":["LoanerManagementDrawer","user","useAuth","loaners","setLoaners","useState","loading","setLoading","error","setError","showAssignModal","setShowAssignModal","selectedJob","setSelectedJob","inventory","setInventory","assignmentForm","setAssignmentForm","loadLoaners","assignments","assignmentsError","_c","_b","_a","supabase","today","assigned","_d","a","overdue","_e","err","jobsNeedingLoaners","setJobsNeedingLoaners","loadJobsNeedingLoaners","jobs","jobsWithoutActiveLoaners","job","la","handleAssignLoaner","handleMarkReturned","assignmentId","formatDate","dateString","getLoanerStatus","assignment","etaDate","getStatusDisplay","status","statusMap","useEffect","jsxs","jsx","Navbar","Icon","_f","_h","_g","Button","statusDisplay","_i","_j","_m","_l","_k","e","prev"],"mappings":"iPAOA,SAAwBA,IAAyB,qBAC/C,KAAM,CAAE,KAAAC,EAAA,EAASC,EAAA,EACX,CAACC,EAASC,CAAU,EAAIC,EAAAA,SAAS,CAAA,CAAE,EACnC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAS,EAAE,EAC/B,CAACK,EAAiBC,CAAkB,EAAIN,EAAAA,SAAS,EAAK,EACtD,CAACO,EAAaC,CAAc,EAAIR,EAAAA,SAAS,IAAI,EAC7C,CAACS,EAAWC,CAAY,EAAIV,WAAS,CACzC,UAAW,EACX,SAAU,EACV,QAAS,CAAA,CACV,EAGK,CAACW,EAAgBC,CAAiB,EAAIZ,WAAS,CACnD,cAAe,GACf,gBAAiB,GACjB,MAAO,EAAA,CACR,EAGKa,EAAc,SAAY,eAC9B,GAAI,CACFX,EAAW,EAAI,EACfE,EAAS,EAAE,EAGX,KAAM,CAAE,KAAMU,EAAa,MAAOC,GAAqB,OAAMC,GAAAC,GAAAC,EAAAC,IAAA,YAAAD,EACzD,KAAK,wBADoD,YAAAD,EAEzD,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAHyD,YAAAD,EAsBzD,MAAM,aAAc,CAAE,UAAW,MAErC,GAAID,EAAkB,MAAMA,EAG5B,MAAMK,MAAY,KACZC,IAAWC,EAAAR,GAAA,YAAAA,EAAa,OAAQS,GAAM,EAACA,GAAA,MAAAA,EAAG,gBAA/B,YAAAD,EAA6C,SAAU,EAClEE,IACJC,EAAAX,GAAA,YAAAA,EAAa,OAAQS,GAAM,EAACA,GAAA,MAAAA,EAAG,cAAe,IAAI,KAAKA,GAAA,YAAAA,EAAG,eAAe,EAAIH,KAA7E,YAAAK,EACI,SAAU,EAEhB1B,EAAWe,GAAe,EAAE,EAC5BJ,EAAa,CACX,UAAW,KAAK,IAAI,EAAG,GAAKW,CAAQ,EACpC,SAAAA,EACA,QAAAG,CAAA,CACD,CACH,OAASE,EAAK,CACZtB,EAAS,+BAA+BsB,GAAA,YAAAA,EAAK,OAAO,EAAE,EACtD,QAAQ,MAAM,sBAAuBA,CAAG,CAC1C,QAAA,CACExB,EAAW,EAAK,CAClB,CACF,EAGM,CAACyB,EAAoBC,CAAqB,EAAI5B,EAAAA,SAAS,CAAA,CAAE,EAEzD6B,EAAyB,SAAY,aACzC,GAAI,CACF,KAAM,CAAE,KAAMC,EAAM,MAAA3B,GAAU,OAAMmB,GAAAN,GAAAC,GAAAC,EAAAC,IAAA,YAAAD,EAChC,KAAK,UAD2B,YAAAD,EAEhC,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAHgC,YAAAD,EAiBhC,GAAG,wBAAyB,MAjBI,YAAAM,EAkBhC,GAAG,aAAc,CAAC,UAAW,aAAa,IAE9C,GAAInB,EAAO,MAAMA,EAGjB,MAAM4B,EAA2BD,GAAA,YAAAA,EAAM,OAAQE,GAAQ,OAErD,MAAO,GADiBd,EAAAc,GAAA,YAAAA,EAAK,qBAAL,YAAAd,EAAyB,KAAMe,GAAO,EAACA,GAAA,MAAAA,EAAI,cAErE,GAEAL,EAAsBG,GAA4B,EAAE,CACtD,OAASL,EAAK,CACZ,QAAQ,MAAM,mCAAoCA,CAAG,CACvD,CACF,EAGMQ,EAAqB,SAAY,eACrC,GACE,CAAC3B,GACD,GAACW,EAAAP,GAAA,YAAAA,EAAgB,gBAAhB,MAAAO,EAA+B,SAChC,EAACP,GAAA,MAAAA,EAAgB,iBACjB,CACAP,EAAS,oCAAoC,EAC7C,MACF,CAEA,GAAI,CACFA,EAAS,EAAE,EAEX,KAAM,CAAE,MAAAD,GAAU,OAAMsB,GAAAR,EAAAE,IAAA,YAAAF,EAAU,KAAK,wBAAf,YAAAQ,EAAsC,OAAO,CACnE,CACE,OAAQlB,GAAA,YAAAA,EAAa,GACrB,eAAeS,EAAAL,GAAA,YAAAA,EAAgB,gBAAhB,YAAAK,EAA+B,OAC9C,gBAAiBL,GAAA,YAAAA,EAAgB,gBACjC,QAAOW,EAAAX,GAAA,YAAAA,EAAgB,QAAhB,YAAAW,EAAuB,SAAU,IAAA,CAC1C,IAGF,GAAInB,EAAO,MAAMA,EAGjBS,EAAkB,CAAE,cAAe,GAAI,gBAAiB,GAAI,MAAO,GAAI,EACvEN,EAAmB,EAAK,EACxBE,EAAe,IAAI,EAGnB,MAAM,QAAQ,IAAI,CAACK,IAAegB,EAAA,CAAwB,CAAC,CAC7D,OAASH,EAAK,CACZtB,EAAS,4BAA4BsB,GAAA,YAAAA,EAAK,OAAO,EAAE,CACrD,CACF,EAGMS,EAAqB,MAAOC,GAAiB,aACjD,GAAI,CACFhC,EAAS,EAAE,EAEX,KAAM,CAAE,MAAAD,CAAAA,EAAU,OAAMmB,GAAAN,GAAAE,EAAAC,IAAA,YAAAD,EACpB,KAAK,wBADe,YAAAF,EAEpB,OAAO,CAAE,aAAaC,EAAA,IAAI,OAAJ,YAAAA,EAAY,kBAFd,YAAAK,EAGpB,GAAG,KAAMc,IAEb,GAAIjC,EAAO,MAAMA,EAEjB,MAAMU,EAAA,CACR,OAASa,EAAK,CACZtB,EAAS,sCAAsCsB,GAAA,YAAAA,EAAK,OAAO,EAAE,CAC/D,CACF,EAGMW,EAAcC,GAAe,OACjC,OAAKA,GACEpB,EAAA,IAAI,KAAKoB,CAAU,IAAnB,YAAApB,EAAsB,mBAAmB,QAAS,CACvD,MAAO,QACP,IAAK,UACL,KAAM,SAAA,GAJgB,GAM1B,EAGMqB,EAAmBC,GAAe,CACtC,GAAIA,GAAA,MAAAA,EAAY,YAAa,MAAO,WAEpC,MAAMpB,MAAY,KACZqB,EAAU,IAAI,KAAKD,GAAA,YAAAA,EAAY,eAAe,EAEpD,OAAIC,EAAUrB,EAAc,UAEX,KAAK,MAAMqB,EAAUrB,IAAU,IAAO,GAAK,GAAK,GAAG,GACpD,EAAU,WAEnB,QACT,EAGMsB,EAAoBC,GAAW,CACnC,MAAMC,EAAY,CAChB,OAAQ,CACN,MAAO,+CACP,MAAO,QAAA,EAET,WAAY,CACV,MAAO,kDACP,MAAO,UAAA,EAET,QAAS,CACP,MAAO,yCACP,MAAO,SAAA,EAET,SAAU,CACR,MAAO,4CACP,MAAO,UAAA,CACT,EAGF,OAAOA,GAAA,YAAAA,EAAYD,MAAWC,GAAA,YAAAA,EAAY,OAC5C,EAMA,OAJAC,EAAAA,UAAU,IAAM,CACd,QAAQ,IAAI,CAAChC,EAAA,EAAegB,EAAA,CAAwB,CAAC,CACvD,EAAG,CAAA,CAAE,EAED5B,EAEA6C,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAACC,EAAA,EAAO,QACP,MAAA,CAAI,UAAU,aAAa,MAAO,CAAE,WAAY,MAAA,EAC/C,SAAAD,EAAAA,IAAC,OAAI,UAAU,yCACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAC,MAACE,GAAK,KAAK,SAAS,KAAM,GAAI,UAAU,2CAA2C,EACnFF,EAAAA,IAAC,MAAA,CAAI,UAAU,iBAAiB,SAAA,8BAAA,CAA4B,CAAA,CAAA,CAC9D,EACF,CAAA,CACF,CAAA,EACF,EAKFD,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAC,EAAAA,IAACC,EAAA,EAAO,EACRF,OAAC,OAAI,UAAU,+BAA+B,MAAO,CAAE,WAAY,QAEhE,SAAA,CAAA3C,SACE,MAAA,CAAI,UAAU,sDACb,SAAA2C,EAAAA,KAAC,MAAA,CAAI,UAAU,mCACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,MAACE,GAAK,KAAK,cAAc,KAAM,GAAI,UAAU,2BAA2B,SACvE,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,mCAAmC,SAAA,QAAK,EACtDA,EAAAA,IAAC,IAAA,CAAE,UAAU,4BAA6B,SAAA5C,CAAA,CAAM,CAAA,CAAA,CAClD,CAAA,EACF,EACA4C,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM3C,EAAS,EAAE,EAC1B,UAAU,kCACV,aAAW,gBAEX,SAAA2C,EAAAA,IAACE,EAAA,CAAK,KAAK,IAAI,KAAM,EAAA,CAAI,CAAA,CAAA,CAC3B,CAAA,CACF,CAAA,CACF,EAIFF,MAAC,MAAA,CAAI,UAAU,uEACb,gBAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,KAAA,CAAG,UAAU,gDAAgD,SAAA,oBAAiB,EAC/EA,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAsB,SAAA,6CAAA,CAA2C,CAAA,CAAA,CAChF,CAAA,CACF,QAGC,MAAA,CAAI,UAAU,OACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,wCAEb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,2CACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,mCACb,SAAAA,EAAAA,IAACE,EAAA,CAAK,KAAK,MAAM,KAAM,GAAI,UAAU,gBAAA,CAAiB,EACxD,SACC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,6DAA6D,SAAA,YAE3E,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAqC,0BAAW,SAAA,CAAU,CAAA,CAAA,CACzE,CAAA,CAAA,CACF,CAAA,CACF,QAGC,MAAA,CAAI,UAAU,2CACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,kCACb,SAAAA,EAAAA,IAACE,EAAA,CAAK,KAAK,QAAQ,KAAM,GAAI,UAAU,eAAA,CAAgB,EACzD,SACC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,6DAA6D,SAAA,WAE3E,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAqC,0BAAW,QAAA,CAAS,CAAA,CAAA,CACxE,CAAA,CAAA,CACF,CAAA,CACF,QAGC,MAAA,CAAI,UAAU,2CACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,iCACb,SAAAA,EAAAA,IAACE,EAAA,CAAK,KAAK,gBAAgB,KAAM,GAAI,UAAU,cAAA,CAAe,EAChE,SACC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,6DAA6D,SAAA,UAE3E,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAqC,0BAAW,OAAA,CAAQ,CAAA,CAAA,CACvE,CAAA,CAAA,CACF,CAAA,CACF,QAGC,MAAA,CAAI,UAAU,2CACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CAAI,UAAU,oCACb,SAAAA,EAAAA,IAACE,EAAA,CAAK,KAAK,QAAQ,KAAM,GAAI,UAAU,iBAAA,CAAkB,EAC3D,SACC,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,6DAA6D,SAAA,UAE3E,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,oCAAqC,0BAAoB,MAAA,CAAO,CAAA,CAAA,CAC/E,CAAA,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,GAGCpB,GAAA,YAAAA,EAAoB,QAAS,GAC5BmB,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,4DACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,MAACE,GAAK,KAAK,cAAc,KAAM,GAAI,UAAU,uBAAuB,SACnE,MAAA,CACC,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,8BAA8B,SAAA,mCAAgC,EAC5ED,EAAAA,KAAC,IAAA,CAAE,UAAU,+BACV,SAAA,CAAAnB,GAAA,YAAAA,EAAoB,OAAO,QAAKA,GAAA,YAAAA,EAAoB,UAAW,EAAI,IAAM,GAAI,IAAI,+BAAA,CAAA,CAEpF,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,QAEC,MAAA,CAAI,UAAU,aACZ,SAAAA,GAAA,YAAAA,EAAoB,IAAKK,wBACxBc,OAAAA,EAAAA,KAAC,MAAA,CAEC,UAAU,iGAEV,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,6BACX,UAAAf,GAAA,YAAAA,EAAK,eAAcf,GAAAC,EAAAc,GAAA,YAAAA,EAAK,eAAL,YAAAd,EAAoB,KAApB,YAAAD,EAAwB,gBAAiB,GAAA,CAC/D,EACA6B,EAAAA,KAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,CAAA,eACzBxB,GAAAN,EAAAgB,GAAA,YAAAA,EAAK,eAAL,YAAAhB,EAAoB,KAApB,YAAAM,EAAwB,gBAAiB,SAAA,EACtD,IACC4B,GAAAzB,EAAAO,GAAA,YAAAA,EAAK,eAAL,YAAAP,EAAoB,KAApB,YAAAyB,EAAwB,iBACvBJ,OAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,CAAA,WAC5BK,GAAAC,EAAApB,GAAA,YAAAA,EAAK,eAAL,YAAAoB,EAAoB,KAApB,YAAAD,EAAwB,cAAA,CAAA,CAClC,CAAA,EAEJ,EACAL,EAAAA,KAACO,EAAA,CACC,QAAS,IAAM,CACb7C,EAAewB,CAAG,EAClB1B,EAAmB,EAAI,CACzB,EACA,UAAU,yDAEV,SAAA,CAAAyC,MAACE,GAAK,KAAK,MAAM,KAAM,GAAI,UAAU,OAAO,EAAE,eAAA,CAAA,CAAA,CAEhD,CAAA,EAzBKjB,GAAA,YAAAA,EAAK,EAAA,GA2Bb,CACH,CAAA,EACF,EAIFc,EAAAA,KAAC,MAAA,CAAI,UAAU,uDACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,eACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAuC,SAAA,4BAAyB,EAC9EA,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA8B,SAAA,4CAAA,CAE3C,CAAA,EACF,GAECjD,GAAA,YAAAA,EAAS,UAAW,EACnBgD,EAAAA,KAAC,MAAA,CAAI,UAAU,iCACb,SAAA,CAAAC,MAACE,GAAK,KAAK,MAAM,KAAM,GAAI,UAAU,8BAA8B,EACnEF,EAAAA,IAAC,KAAE,SAAA,6BAAA,CAA2B,CAAA,CAAA,CAChC,QAEC,MAAA,CAAI,UAAU,kBACb,SAAAD,EAAAA,KAAC,QAAA,CAAM,UAAU,aACf,SAAA,CAAAC,MAAC,QAAA,CAAM,UAAU,cACf,SAAAD,EAAAA,KAAC,KAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kFAAkF,SAAA,WAEhG,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kFAAkF,SAAA,WAEhG,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kFAAkF,SAAA,MAEhG,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kFAAkF,SAAA,kBAEhG,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,kFAAkF,SAAA,SAEhG,EACAA,EAAAA,IAAC,KAAA,CAAG,UAAU,mFAAmF,SAAA,SAAA,CAEjG,CAAA,CAAA,CACF,CAAA,CACF,QACC,QAAA,CAAM,UAAU,qCACd,SAAAjD,GAAA,YAAAA,EAAS,IAAK0C,GAAe,+BAC5B,MAAMG,EAASJ,EAAgBC,CAAU,EACnCc,EAAgBZ,EAAiBC,CAAM,EAE7C,OACEG,EAAAA,KAAC,KAAA,CAAwB,UAAU,oBACjC,SAAA,CAAAC,EAAAA,IAAC,MAAG,UAAU,8BACZ,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,oBACb,SAAA,CAAAC,MAACE,GAAK,KAAK,MAAM,KAAM,GAAI,UAAU,sBAAsB,EAC3DH,EAAAA,KAAC,OAAA,CAAK,UAAU,6BAA6B,SAAA,CAAA,IACzCN,GAAA,YAAAA,EAAY,aAAA,CAAA,CAChB,CAAA,CAAA,CACF,CAAA,CACF,EACAO,MAAC,KAAA,CAAG,UAAU,YACZ,gBAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,6BACZ,WAAA/B,GAAAC,GAAAC,EAAAsB,GAAA,YAAAA,EAAY,OAAZ,YAAAtB,EAAkB,eAAlB,YAAAD,EAAiC,KAAjC,YAAAD,EAAqC,gBAAiB,SAAA,CACzD,IACCkC,GAAAzB,GAAAH,EAAAkB,GAAA,YAAAA,EAAY,OAAZ,YAAAlB,EAAkB,eAAlB,YAAAG,EAAiC,KAAjC,YAAAyB,EAAqC,iBACpCH,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACZ,UAAAQ,GAAAJ,GAAAC,EAAAZ,GAAA,YAAAA,EAAY,OAAZ,YAAAY,EAAkB,eAAlB,YAAAD,EAAiC,KAAjC,YAAAI,EAAqC,cAAA,CACxC,CAAA,CAAA,CAEJ,CAAA,CACF,QACC,KAAA,CAAG,UAAU,YACZ,SAAAR,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACZ,WAAAS,EAAAhB,GAAA,YAAAA,EAAY,OAAZ,YAAAgB,EAAkB,eACjBC,GAAAC,GAAAC,EAAAnB,GAAA,YAAAA,EAAY,OAAZ,YAAAmB,EAAkB,eAAlB,YAAAD,EAAiC,KAAjC,YAAAD,EAAqC,gBACrC,cACJ,EACF,EACAX,EAAAA,KAAC,KAAA,CAAG,UAAU,8BACZ,SAAA,CAAAC,MAAC,OAAI,UAAU,yBACZ,SAAAV,EAAWG,GAAA,YAAAA,EAAY,eAAe,EACzC,GACCA,GAAA,YAAAA,EAAY,cACXM,OAAC,MAAA,CAAI,UAAU,yBAAyB,SAAA,CAAA,aAC3BT,EAAWG,GAAA,YAAAA,EAAY,WAAW,CAAA,CAAA,CAC/C,CAAA,EAEJ,EACAO,EAAAA,IAAC,KAAA,CAAG,UAAU,8BACZ,SAAAA,EAAAA,IAAC,OAAA,CACC,UAAW,yEAAyEO,GAAA,YAAAA,EAAe,KAAK,GAEvG,SAAAA,GAAA,YAAAA,EAAe,KAAA,CAAA,EAEpB,QACC,KAAA,CAAG,UAAU,iDACX,SAAA,EAACd,GAAA,MAAAA,EAAY,cACZO,EAAAA,IAACM,EAAA,CACC,KAAK,KACL,QAAQ,QACR,QAAS,IAAMlB,EAAmBK,GAAA,YAAAA,EAAY,EAAE,EAChD,UAAU,sCACX,SAAA,eAAA,CAAA,CAED,CAEJ,CAAA,CAAA,EAxDOA,GAAA,YAAAA,EAAY,EAyDrB,CAEJ,EAAC,CACH,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EAEJ,EAGCnC,GAAmBE,GAClBwC,EAAAA,IAAC,MAAA,CAAI,UAAU,iFACb,SAAAA,MAAC,MAAA,CAAI,UAAU,sCACb,SAAAD,EAAAA,KAAC,MAAA,CAAI,UAAU,MACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,uCAAuC,SAAA,wBAAqB,EAC1EA,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACbzC,EAAmB,EAAK,EACxBE,EAAe,IAAI,EACnBI,EAAkB,CAAE,cAAe,GAAI,gBAAiB,GAAI,MAAO,GAAI,CACzE,EACA,UAAU,sCAEV,SAAAmC,EAAAA,IAACE,EAAA,CAAK,KAAK,IAAI,KAAM,EAAA,CAAI,CAAA,CAAA,CAC3B,EACF,EAGAH,EAAAA,KAAC,MAAA,CAAI,UAAU,yCACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,kCACX,UAAAxC,GAAA,YAAAA,EAAa,eACZU,GAAAC,EAAAX,GAAA,YAAAA,EAAa,eAAb,YAAAW,EAA4B,KAA5B,YAAAD,EAAgC,gBAChC,GAAA,CACJ,EACA8B,MAAC,KAAE,UAAU,yBACV,gCAAa,6BAAe,mBAAI,aAAA,CACnC,CAAA,EACF,EAGAD,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAC,EAAAA,IAAC,QAAA,CAAM,UAAU,gDAAgD,SAAA,kBAEjE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOpC,GAAA,YAAAA,EAAgB,cACvB,SAAWiD,GACThD,EAAmBiD,GAAA,OAAU,OAC3B,GAAGA,EACH,eAAe3C,EAAA0C,GAAA,YAAAA,EAAG,SAAH,YAAA1C,EAAW,KAAA,EAC1B,EAEJ,UAAU,gIACV,YAAY,cACZ,SAAQ,EAAA,CAAA,CACV,EACF,SAEC,MAAA,CACC,SAAA,CAAA6B,EAAAA,IAAC,QAAA,CAAM,UAAU,gDAAgD,SAAA,yBAEjE,EACAA,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOpC,GAAA,YAAAA,EAAgB,gBACvB,SAAWiD,GACThD,EAAmBiD,GAAA,OAAU,OAC3B,GAAGA,EACH,iBAAiB3C,EAAA0C,GAAA,YAAAA,EAAG,SAAH,YAAA1C,EAAW,KAAA,EAC5B,EAEJ,UAAU,gIACV,iBAAS,qBAAQ,8BAAe,MAAM,qBAAO,GAC7C,SAAQ,EAAA,CAAA,CACV,EACF,SAEC,MAAA,CACC,SAAA,CAAA6B,EAAAA,IAAC,QAAA,CAAM,UAAU,gDAAgD,SAAA,mBAEjE,EACAA,EAAAA,IAAC,WAAA,CACC,MAAOpC,GAAA,YAAAA,EAAgB,MACvB,SAAWiD,GACThD,EAAmBiD,GAAA,OAAU,OAC3B,GAAGA,EACH,OAAO3C,EAAA0C,GAAA,YAAAA,EAAG,SAAH,YAAA1C,EAAW,KAAA,EAClB,EAEJ,UAAU,gIACV,KAAM,EACN,YAAY,sCAAA,CAAA,CACd,CAAA,CACF,CAAA,EACF,EAGA4B,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAAA,IAACM,EAAA,CACC,QAAQ,UACR,QAAS,IAAM,CACb/C,EAAmB,EAAK,EACxBE,EAAe,IAAI,EACnBI,EAAkB,CAAE,cAAe,GAAI,gBAAiB,GAAI,MAAO,GAAI,CACzE,EACA,UAAU,cACX,SAAA,QAAA,CAAA,EAGDmC,EAAAA,IAACM,EAAA,CACC,QAASnB,EACT,UAAU,2DACV,SACE,GAACiB,EAAAxC,GAAA,YAAAA,EAAgB,gBAAhB,MAAAwC,EAA+B,SAAU,EAACxC,GAAA,MAAAA,EAAgB,iBAE9D,SAAA,eAAA,CAAA,CAED,CAAA,CACF,CAAA,CAAA,CACF,EACF,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,CAEJ"}